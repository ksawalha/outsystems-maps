(()=>{"use strict";var OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OSFramework,OutSystems,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,MapAPI,OutSystems,PlacesAPI,OutSystems,PlacesAPI,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Constants,Leaflet,Maps,Provider_1,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider,Provider;!function(e){!function(e){!function(e){e.OSMapsVersion="2.0.1",e.OSPlatform="<->platformType<->"}(e.Constants||(e.Constants={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(r){var t;(t=r.ProviderVersion||(r.ProviderVersion={})).Change=function(r,t,a=!1){let s=!1;switch(r){case e.Maps.Enum.ProviderType.Google:s=Provider.Maps.Google.Version.Change(t);break;case e.Maps.Enum.ProviderType.Leaflet:s=Provider.Maps.Leaflet.Version.Change(t);break;default:throw new Error(`There provider '${r}' is not supported.`)}a&&s&&window.location.reload()},t.Get=function(r){let t="";switch(r){case e.Maps.Enum.ProviderType.Google:t=Provider.Maps.Google.Version.Get();break;case e.Maps.Enum.ProviderType.Leaflet:t=Provider.Maps.Leaflet.Version.Get();break;default:throw new Error(`There provider '${r}' is not supported.`)}return t}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Configuration||(e.Configuration={})).AbstractConfiguration=class{constructor(e){const r=e;let t;for(t in r)void 0!==r[t]&&(this[t]=r[t])}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.DrawingTools||(e.DrawingTools={})).AbstractDrawingTools=class{constructor(r,t,a){this._map=r,this._uniqueId=t,this._config=a,this._built=!1,this._drawingToolsEvents=new e.Event.DrawingTools.DrawingToolsEventsManager(this),this._tools=new Map,this._toolsSet=new Set,this._createElements=[]}get config(){return this._config}get createdElements(){return this._createElements}get drawingToolsEvents(){return this._drawingToolsEvents}get isReady(){return this._built}get map(){return this._map}get provider(){return this._provider}get tools(){return Array.from(this._toolsSet)}get uniqueId(){return this._uniqueId}get widgetId(){return void 0!==this._widgetId&&""!==this._widgetId||this._setWidgetId(),this._widgetId}_setWidgetId(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(e.Helper.Constants.drawingToolsTag).id:void 0}finishBuild(){this._built=!0,this.drawingToolsEvents.trigger(e.Event.DrawingTools.DrawingToolsEventType.Initialized)}addTool(e){return this._tools.set(e.uniqueId,e),this._toolsSet.add(e),e}build(){this._built||this._setWidgetId()}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.map.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this.map,e.Enum.ErrorCodes.GEN_InvalidChangePropertyDrawingTools,`${r}`)}changeToolProperty(e,r,t){this._tools.get(e).changeProperty(r,t)}dispose(){this._built=!1,this.removeAllTools()}equalsToID(e){return e===this._uniqueId||e===this.widgetId}getProviderConfig(){return this._config.getProviderConfig()}hasTool(e){return this._tools.has(e)}removeAllTools(){this._tools.forEach((e=>{e.dispose()})),this._tools.clear(),this._toolsSet.clear()}removeTool(e){if(this.hasTool(e)){const r=this._tools.get(e);r.dispose(),this._tools.delete(e),this._toolsSet.delete(r)}}toolAlreadyExists(e){return Array.from(this._tools.values()).some((r=>r.type===e))}validateProviderEvent(e){return-1!==this.providerEvents.indexOf(e)}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.DrawingTools||(e.DrawingTools={})).AbstractTool=class{constructor(e,r,t,a,s){this._map=e,this._drawingTools=r,this._uniqueId=t,this._config=s,this._built=!1,this._type=a}get config(){return this._config}get drawingTools(){return this._drawingTools}get isReady(){return this._built}get map(){return this._map}get type(){return this._type}get uniqueId(){return this._uniqueId}get widgetId(){return void 0!==this._widgetId&&""!==this._widgetId||this._setWidgetId(),this._widgetId}_setWidgetId(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(e.Helper.Constants.drawingToolsTag).id:void 0}finishBuild(){this._built=!0}build(){this._built||this._setWidgetId()}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.map.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this.map,e.Enum.ErrorCodes.GEN_InvalidChangePropertyTools,`${r}`)}dispose(){this._built=!1}equalsToID(e){return e===this._uniqueId||e===this.widgetId}getProviderConfig(){return this._config.getProviderConfig()}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(r){let t;!function(r){r.MakeDrawingTools=function(r,t,a){switch(r.providerType){case e.Enum.ProviderType.Google:return Provider.Maps.Google.DrawingTools.DrawingToolsFactory.MakeDrawingTools(r,t,a);case e.Enum.ProviderType.Leaflet:return Provider.Maps.Leaflet.DrawingTools.DrawingToolsFactory.MakeDrawingTools(r,t,a);default:throw new Error(`There is no factory for the DrawingTools using the provider ${r.providerType}`)}},r.MakeTool=function(r,t,a,s,o){switch(r.providerType){case e.Enum.ProviderType.Google:return Provider.Maps.Google.DrawingTools.DrawingToolsFactory.MakeTool(r,t,a,s,o);case e.Enum.ProviderType.Leaflet:return Provider.Maps.Leaflet.DrawingTools.DrawingToolsFactory.MakeTool(r,t,a,s,o);default:throw new Error(`There is no factory for the Tool (${s}) using the provider ${r.providerType}`)}}}(t=r.DrawingToolsFactory||(r.DrawingToolsFactory={}))}(e.DrawingTools||(e.DrawingTools={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e.Circle="circle",e.Marker="marker",e.Polygon="polygon",e.Polyline="polyline",e.Rectangle="rectangle"}(r=e.DrawingToolsTypes||(e.DrawingToolsTypes={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;e.Success={code:"200",message:"Success"},e.Unsupported={code:"MAPS-GEN-01003",message:"The action ContainsLocation canâ€™t verify if a given marker is inside a Polyline shape. Please, change the ShapeWidgetId parameter to a Circle, Rectangle, or Polygon."},function(e){e.CFG_APIKeyAlreadySetMap="MAPS-CFG-01001",e.CFG_LocalizationAlreadySetMap="MAPS-CFG-01003",e.CFG_APIKeyAlreadySetStaticMap="MAPS-CFG-02001",e.CFG_CantChangeParamsStaticMap="MAPS-CFG-02002",e.CFG_LocalizationAlreadySetStaticMap="MAPS-CFG-02003",e.CFG_InvalidPolylineShapeLocations="MAPS-CFG-05001",e.CFG_InvalidPolygonShapeLocations="MAPS-CFG-05002",e.CFG_InvalidCircleShapeCenter="MAPS-CFG-05003",e.CFG_InvalidRectangleShapeBounds="MAPS-CFG-05004",e.CFG_APIKeyDiffersFromPlacesToMaps="MAPS-CFG-01002",e.CFG_APIKeyAlreadySetSearchPlaces="MAPS-CFG-10001",e.CFG_InvalidSearchPlacesSearchArea="MAPS-CFG-10002",e.CFG_MaximumCountriesNumber="MAPS-CFG-10003",e.CFG_InvalidInputSearchPlaces="MAPS-CFG-10004",e.CFG_InvalidTravelMode="MAPS-CFG-04001",e.CFG_InvalidDrawingToolsPosition="MAPS-CFG-06001",e.CFG_InvalidMapId="MAPS-CFG-10005",e.LIB_InvalidApiKeyMap="MAPS-LIB-01001",e.LIB_FailedGeocodingMap="MAPS-LIB-01002",e.LIB_InvalidApiKeyStaticMap="MAPS-LIB-02001",e.LIB_FailedGeocodingMarker="MAPS-LIB-03001",e.LIB_FailedGeocodingLeafletMarker="MAPS-LIB-03002",e.LIB_FailedSetDirections="MAPS-LIB-04001",e.LIB_FailedGeocodingShapeLocations="MAPS-LIB-05001",e.LIB_FailedGeocodingLeafletShapeLocations="MAPS-LIB-05002",e.LIB_InvalidApiKeySearchPlaces="MAPS-LIB-10001",e.LIB_FailedGeocodingSearchAreaLocations="MAPS-LIB-10002",e.LIB_FailedGeocodingLeafletMap="MAPS-LIB-11001",e.API_FailedRemoveDirections="MAPS-API-03001",e.API_FailedGettingShapePath="MAPS-API-05001",e.API_FailedGettingCircleShape="MAPS-API-05002",e.API_FailedGettingShapeCenter="MAPS-API-05003",e.API_FailedGettingShapeRadius="MAPS-API-05004",e.API_FailedLoadingPlugin="MAPS-API-04002",e.API_FailedNoPluginDirections="MAPS-API-04003",e.API_FailedRemoveMarkerFromCluster="MAPS-API-09001",e.API_FailedContainsLocation="MAPS-API-05005",e.API_FailedGettingCenterCoordinates="MAPS-API-01001",e.API_FailedCreateMarker="MAPS-API-09002",e.API_FailedRemoveMarker="MAPS-API-09003",e.API_FailedRemoveMarkers="MAPS-API-09004",e.API_FailedSubscribeMarkerEvent="MAPS-API-09005",e.API_FailedUnsubscribeMarkerEvent="MAPS-API-09006",e.GEN_InvalidChangePropertyMap="MAPS-GEN-01001",e.GEN_InvalidChangePropertyMarker="MAPS-GEN-03001",e.GEN_UnsupportedEventMap="MAPS-GEN-01002",e.GEN_UnsupportedEventMarker="MAPS-GEN-03002",e.GEN_InvalidChangePropertyShape="MAPS-GEN-05001",e.GEN_InvalidChangePropertyDrawingTools="MAPS-GEN-06001",e.GEN_InvalidChangePropertyTools="MAPS-GEN-06002",e.GEN_InvalidChangePropertyUseAdvancedMarkers="MAPS-GEN-06005",e.GEN_UnsupportedEventShape="MAPS-GEN-05002",e.GEN_UnsupportedEventDrawingTools="MAPS-GEN-06003",e.GEN_ToolTypeAlreadyExists="MAPS-GEN-06004",e.GEN_InvalidChangePropertyFileLayer="MAPS-GEN-07001",e.GEN_UnsupportedEventFileLayer="MAPS-GEN-07002",e.GEN_InvalidChangePropertyHeatmapLayer="MAPS-GEN-08001",e.GEN_InvalidChangePropertyMarkerClusterer="MAPS-GEN-09001",e.GEN_InvalidChangePropertySearchPlaces="MAPS-GEN-10001",e.GEN_UnsupportedEventSearchPlaces="MAPS-GEN-10002",e.GEN_NoPluginDirectionsNeeded="MAPS-GEN-04001"}(r=e.ErrorCodes||(e.ErrorCodes={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e.Marker="Marker",e.MarkerPopup="MarkerPopup",e.Shapes="Shapes",e.Directions="Directions",e.DrawingTools="DrawingTools",e.FileLayer="FileLayer",e.HeatmapLayer="HeatmapLayer"}(r=e.Feature||(e.Feature={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e.Map="Map",e.StaticMap="StaticMap"}(r=e.MapType||(e.MapType={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e.Marker="Marker",e.MarkerPopup="MarkerPopup"}(r=e.MarkerType||(e.MarkerType={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.position=0]="position"}(r=e.OS_Config_DrawingTools||(e.OS_Config_DrawingTools={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.layerUrl=0]="layerUrl",e[e.preserveViewport=1]="preserveViewport",e[e.suppressPopups=2]="suppressPopups"}(r=e.OS_Config_FileLayer||(e.OS_Config_FileLayer={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.dissipateOnZoom=0]="dissipateOnZoom",e[e.gradient=1]="gradient",e[e.maxIntensity=2]="maxIntensity",e[e.points=3]="points",e[e.opacity=4]="opacity",e[e.radius=5]="radius"}(r=e.OS_Config_HeatmapLayer||(e.OS_Config_HeatmapLayer={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.advancedFormat=0]="advancedFormat",e[e.apiKey=1]="apiKey",e[e.height=2]="height",e[e.center=3]="center",e[e.localization=4]="localization",e[e.mapStyleId=5]="mapStyleId",e[e.markerClustererActive=6]="markerClustererActive",e[e.markerClustererMaxZoom=7]="markerClustererMaxZoom",e[e.markerClustererMinClusterSize=8]="markerClustererMinClusterSize",e[e.markerClustererZoomOnClick=9]="markerClustererZoomOnClick",e[e.offset=10]="offset",e[e.respectUserZoom=11]="respectUserZoom",e[e.showTraffic=12]="showTraffic",e[e.staticMap=13]="staticMap",e[e.style=14]="style",e[e.type=15]="type",e[e.uniqueId=16]="uniqueId",e[e.useAdvancedMarkers=17]="useAdvancedMarkers",e[e.zoom=18]="zoom"}(r=e.OS_Config_Map||(e.OS_Config_Map={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.advancedFormat=0]="advancedFormat",e[e.allowDrag=1]="allowDrag",e[e.iconHeight=2]="iconHeight",e[e.iconUrl=3]="iconUrl",e[e.iconWidth=4]="iconWidth",e[e.label=5]="label",e[e.location=6]="location",e[e.title=7]="title",e[e.uniqueId=8]="uniqueId"}(r=e.OS_Config_Marker||(e.OS_Config_Marker={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.markerClustererActive=0]="markerClustererActive",e[e.markerClustererMinClusterSize=1]="markerClustererMinClusterSize",e[e.markerClustererMaxZoom=2]="markerClustererMaxZoom",e[e.markerClustererZoomOnClick=3]="markerClustererZoomOnClick"}(r=e.OS_Config_MarkerClusterer||(e.OS_Config_MarkerClusterer={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.apiKey=0]="apiKey",e[e.localization=1]="localization",e[e.countries=2]="countries",e[e.searchArea=3]="searchArea",e[e.searchType=4]="searchType"}(r=e.OS_Config_SearchPlaces||(e.OS_Config_SearchPlaces={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.allowDrag=0]="allowDrag",e[e.allowEdit=1]="allowEdit",e[e.bounds=2]="bounds",e[e.center=3]="center",e[e.fillColor=4]="fillColor",e[e.fillOpacity=5]="fillOpacity",e[e.locations=6]="locations",e[e.radius=7]="radius",e[e.strokeColor=8]="strokeColor",e[e.strokeOpacity=9]="strokeOpacity",e[e.strokeWeight=10]="strokeWeight",e[e.uniqueId=11]="uniqueId"}(r=e.OS_Config_Shape||(e.OS_Config_Shape={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.apiKey=0]="apiKey",e[e.localization=1]="localization",e[e.height=2]="height",e[e.center=3]="center",e[e.type=4]="type",e[e.uniqueId=5]="uniqueId",e[e.zoom=6]="zoom"}(r=e.OS_Config_StaticMap||(e.OS_Config_StaticMap={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e.Google="Google",e.Leaflet="Leaflet"}(r=e.ProviderType||(e.ProviderType={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.Addresses=0]="Addresses",e[e.Cities=1]="Cities",e[e.Establishments=2]="Establishments",e[e.Geocodes=3]="Geocodes",e[e.Regions=4]="Regions"}(r=e.SearchTypes||(e.SearchTypes={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e[e.Polygon=3]="Polygon",e[e.Polyline=2]="Polyline"}(r=e.ShapeMinPath||(e.ShapeMinPath={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(e){let r;!function(e){e.Circle="Circle",e.Polygon="Polygon",e.Polyline="Polyline",e.Rectangle="Rectangle"}(r=e.ShapeType||(e.ShapeType={}))}(e.Enum||(e.Enum={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e[e.Standard=0]="Standard",e[e.Silver=1]="Silver",e[e.Retro=2]="Retro",e[e.Dark=3]="Dark",e[e.Night=4]="Night",e[e.Aubergine=5]="Aubergine"}(r=e.Style||(e.Style={}))})((r=e.Enum||(e.Enum={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Roadmap="Roadmap",e.Satellite="Satellite",e.Hybrid="Hybrid",e.Terrain="Terrain"}(r=e.Type||(e.Type={}))})((r=e.Enum||(e.Enum={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e[e.Auto=0]="Auto",e[e.Zoom1_World=1]="Zoom1_World",e[e.Zoom2=2]="Zoom2",e[e.Zoom3=3]="Zoom3",e[e.Zoom4=4]="Zoom4",e[e.Zoom5_Continent=5]="Zoom5_Continent",e[e.Zoom6=6]="Zoom6",e[e.Zoom7=7]="Zoom7",e[e.Zoom8=8]="Zoom8",e[e.Zoom9=9]="Zoom9",e[e.Zoom10_City=10]="Zoom10_City",e[e.Zoom11=11]="Zoom11",e[e.Zoom12=12]="Zoom12",e[e.Zoom13=13]="Zoom13",e[e.Zoom14=14]="Zoom14",e[e.Zoom15_Streets=15]="Zoom15_Streets",e[e.Zoom16=16]="Zoom16",e[e.Zoom17=17]="Zoom17",e[e.Zoom18=18]="Zoom18",e[e.Zoom19=19]="Zoom19",e[e.Zoom20_Buildings=20]="Zoom20_Buildings"}(r=e.Zoom||(e.Zoom={}))})((r=e.Enum||(e.Enum={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Event||(e.Event={})).AbstractEvent=class{constructor(){this._handlers=[]}get handlers(){return this._handlers}addHandler(e,r){this._handlers.push({eventHandler:e,uniqueId:r})}hasHandlers(){return this._handlers.length>0}removeHandler(e){const r=this._handlers.findIndex((r=>r.eventHandler===e));-1!==r&&this._handlers.splice(r,1)}trigger(r,...t){this._handlers.slice(0).forEach((a=>e.Helper.CallbackAsyncInvocation(a.eventHandler,r,...t)))}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Event||(e.Event={})).AbstractEventsManager=class{constructor(){this._handlers=new Map}get handlers(){return this._handlers}addHandler(e,r,t){if(this._handlers&&this._handlers.has(e))this._handlers.get(e).addHandler(r,t);else{const a=this.getInstanceOfEventType(e);void 0!==a&&(a.addHandler(r,t),this._handlers.set(e,a))}}hasHandlers(e){let r=!1;return this._handlers.has(e)&&(r=this._handlers.get(e).hasHandlers()),r}removeHandler(e,r){this._handlers.has(e)&&this._handlers.get(e).removeHandler(r)}trigger(e,r,...t){this._handlers.has(e)&&this._handlers.get(e).trigger(r,...t)}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEvent{trigger(r,t,...a){this.handlers.slice(0).forEach((s=>e.Helper.CallbackAsyncInvocation(s.eventHandler,r,t,...a)))}}t.AbstractDrawingToolsEvent=a})((r=e.Event||(e.Event={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Initialized="Initialized",e.ProviderEvent="ProviderEvent"}(r=e.DrawingToolsEventType||(e.DrawingToolsEventType={}))})((r=e.Event||(e.Event={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEventsManager{constructor(e){super(),this._drawingTools=e}getInstanceOfEventType(a){let s;switch(a){case t.DrawingToolsEventType.Initialized:s=new t.DrawingToolsInitializedEvent;break;default:if(!0===this._drawingTools.validateProviderEvent(a)){s=new t.DrawingToolsProviderEvent;break}return void this._drawingTools.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._drawingTools.map,e.Enum.ErrorCodes.GEN_UnsupportedEventDrawingTools,`${a}`)}return s}trigger(a,s,o,...n){if(a===t.DrawingToolsEventType.ProviderEvent?this.handlers.has(s):this.handlers.has(a)){const i=this.handlers.get(a);switch(a){case t.DrawingToolsEventType.Initialized:i.trigger(this._drawingTools.map.widgetId,this._drawingTools.widgetId||this._drawingTools.uniqueId,...n);break;case t.DrawingToolsEventType.ProviderEvent:if(!0===this._drawingTools.validateProviderEvent(s)){this.handlers.get(s).trigger(this._drawingTools.map.widgetId,o.uniqueId||this._drawingTools.widgetId||this._drawingTools.uniqueId,o.isNewElement,o.coordinates,o.location,...n);break}default:return void this._drawingTools.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._drawingTools.map,e.Enum.ErrorCodes.GEN_UnsupportedEventDrawingTools,`${a}`)}}}}t.DrawingToolsEventsManager=a})((r=e.Event||(e.Event={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractDrawingToolsEvent{}e.DrawingToolsInitializedEvent=r})((r=e.Event||(e.Event={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){class t extends r.AbstractDrawingToolsEvent{trigger(r,t,a,s,o){this.handlers.slice(0).forEach((n=>e.Helper.CallbackAsyncInvocation(n.eventHandler,r,t,a,s,o)))}}r.DrawingToolsProviderEvent=t})((r=e.Event||(e.Event={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEvent{trigger(r,t,...a){this.handlers.slice(0).forEach((s=>e.Helper.CallbackAsyncInvocation(s.eventHandler,r,t,...a)))}}t.AbstractFileLayersEvent=a})((r=e.Event||(e.Event={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Initialized="Initialized",e.OnClick="OnClick"}(r=e.FileLayersEventType||(e.FileLayersEventType={}))})((r=e.Event||(e.Event={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEventsManager{constructor(e){super(),this._fileLayer=e}getInstanceOfEventType(a){let s;switch(a){case t.FileLayersEventType.Initialized:s=new t.FileLayersInitializedEvent;break;case t.FileLayersEventType.OnClick:s=new t.FileLayersOnClickEvent;break;default:return void this._fileLayer.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._fileLayer.map,e.Enum.ErrorCodes.GEN_UnsupportedEventFileLayer,`${a}`)}return s}trigger(a,s,o,...n){if(this.handlers.has(a)){const s=this.handlers.get(a);switch(a){case t.FileLayersEventType.Initialized:s.trigger(this._fileLayer.map.widgetId,this._fileLayer.widgetId||this._fileLayer.uniqueId);break;case t.FileLayersEventType.OnClick:s.trigger(this._fileLayer.map.widgetId,this._fileLayer.widgetId||this._fileLayer.uniqueId,o.coordinates,o.featureData,...n);break;default:return void this._fileLayer.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._fileLayer.map,e.Enum.ErrorCodes.GEN_UnsupportedEventFileLayer,`${a}`)}}}}t.FileLayersEventsManager=a})((r=e.Event||(e.Event={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractFileLayersEvent{}e.FileLayersInitializedEvent=r})((r=e.Event||(e.Event={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractFileLayersEvent{}e.FileLayersOnClickEvent=r})((r=e.Event||(e.Event={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEvent{trigger(r,t,...a){this.handlers.slice(0).forEach((s=>e.Helper.CallbackAsyncInvocation(s.eventHandler,r,t,...a)))}}t.AbstractMarkerEvent=a})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Initialized="Initialized",e.OnEventTriggered="OnEventTriggered",e.OnClick="OnClick",e.OnMouseover="OnMouseover",e.OnMouseout="OnMouseout",e.ProviderEvent="ProviderEvent"}(r=e.MarkerEventType||(e.MarkerEventType={}))})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEventsManager{constructor(e){super(),this._marker=e}getInstanceOfEventType(a){let s;switch(a){case t.MarkerEventType.Initialized:s=new t.MarkerInitializedEvent;break;case t.MarkerEventType.OnClick:s=new t.MarkerOnClickEvent;break;case t.MarkerEventType.OnMouseout:s=new t.MarkerOnMouseoutEvent;break;case t.MarkerEventType.OnMouseover:s=new t.MarkerOnMouseoverEvent;break;case t.MarkerEventType.OnEventTriggered:s=new t.MarkerOnEventTriggered;break;default:if(!0===this._marker.validateProviderEvent(a)){s=new t.MarkerProviderEvent;break}return void this._marker.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._marker.map,e.Enum.ErrorCodes.GEN_UnsupportedEventMarker,`${a}`)}return s}trigger(a,s,...o){if(a===t.MarkerEventType.ProviderEvent?this.handlers.has(s):this.handlers.has(a)){const n=this.handlers.get(a);switch(a){case t.MarkerEventType.Initialized:case t.MarkerEventType.OnMouseout:case t.MarkerEventType.OnMouseover:n.trigger(this._marker.map.widgetId,this._marker.widgetId||this._marker.uniqueId,a,this._marker.index);break;case t.MarkerEventType.OnClick:n.trigger(this._marker.map.widgetId,this._marker.widgetId||this._marker.uniqueId,a,...o);break;case t.MarkerEventType.OnEventTriggered:n.trigger(this._marker.map.widgetId,this._marker.widgetId||this._marker.uniqueId,this._marker.index,s);break;case t.MarkerEventType.ProviderEvent:if(!0===this._marker.validateProviderEvent(s)){this.handlers.get(s).trigger(this._marker.map.widgetId,this._marker.widgetId||this._marker.uniqueId,s,...o);break}default:return void this._marker.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._marker.map,e.Enum.ErrorCodes.GEN_UnsupportedEventMarker,`${a}`)}}}}t.MarkerEventsManager=a})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMarkerEvent{}e.MarkerInitializedEvent=r})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMarkerEvent{}e.MarkerOnClickEvent=r})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMarkerEvent{}e.MarkerOnEventTriggered=r})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMarkerEvent{}e.MarkerOnMouseoutEvent=r})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMarkerEvent{}e.MarkerOnMouseoverEvent=r})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){class t extends r.AbstractMarkerEvent{trigger(r,t,a,s){this.handlers.slice(0).forEach((o=>e.Helper.CallbackAsyncInvocation(o.eventHandler,r,t,a,s)))}}r.MarkerProviderEvent=t})((r=e.Event||(e.Event={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEvent{trigger(r,t,...a){this.handlers.slice(0).forEach((s=>e.Helper.CallbackAsyncInvocation(s.eventHandler,r,t,...a)))}}t.AbstractMapEvent=a})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Initialized="Initialized",e.OnError="OnError",e.OnEventTriggered="OnEventTriggered",e.ProviderEvent="ProviderEvent"}(r=e.MapEventType||(e.MapEventType={}))})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEventsManager{constructor(e){super(),this._map=e}getInstanceOfEventType(r){let a;switch(r){case t.MapEventType.Initialized:a=new t.MapInitializedEvent;break;case t.MapEventType.OnError:a=new t.MapOnError;break;case t.MapEventType.OnEventTriggered:a=new t.MapOnEventTriggered;break;default:if(!0===this._map.validateProviderEvent(r)){a=new t.MapProviderEvent;break}return void this._map.mapEvents.trigger(t.MapEventType.OnError,this._map,e.Enum.ErrorCodes.GEN_UnsupportedEventMap,`${r}`)}return a}addHandler(r,a,s){r===t.MapEventType.Initialized&&this._map.isReady?e.Helper.CallbackAsyncInvocation(a,this._map,this._map.widgetId):super.addHandler(r,a,s)}trigger(r,a,s,...o){if(r===t.MapEventType.ProviderEvent?this.handlers.has(s):this.handlers.has(r)){const n=this.handlers.get(r);switch(r){case t.MapEventType.Initialized:n.trigger(a,a.widgetId);break;case t.MapEventType.OnError:n.trigger(a,a.widgetId,s,...o);break;case t.MapEventType.OnEventTriggered:n.trigger(a,a.widgetId,s);break;case t.MapEventType.ProviderEvent:if(!0===this._map.validateProviderEvent(s)){this.handlers.get(s).trigger(a,a.widgetId,s,...o);break}default:return void this._map.mapEvents.trigger(t.MapEventType.OnError,a,e.Enum.ErrorCodes.GEN_UnsupportedEventMap,`${r}`)}}}}t.MapEventsManager=a})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMapEvent{}e.MapInitializedEvent=r})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){class t extends r.AbstractMapEvent{trigger(r,t,a,s){this.handlers.slice(0).forEach((o=>e.Helper.CallbackAsyncInvocation(o.eventHandler,r,t,a,s)))}}r.MapOnError=t})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractMapEvent{}e.MapOnEventTriggered=r})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){class t extends r.AbstractMapEvent{trigger(r,t,a,s,o){this.handlers.slice(0).forEach((n=>{document.querySelector('.event-preview[name="'+n.uniqueId+'"]')&&e.Helper.CallbackAsyncInvocation(n.eventHandler,r,t,a,s,o)}))}}r.MapProviderEvent=t})((r=e.Event||(e.Event={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEvent{trigger(r,t,...a){this.handlers.slice(0).forEach((s=>e.Helper.CallbackAsyncInvocation(s.eventHandler,r,t,...a)))}}t.AbstractSearchPlacesEvent=a})((r=e.Event||(e.Event={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Initialized="Initialized",e.OnError="OnError",e.OnPlaceSelect="OnPlaceSelect"}(r=e.SearchPlacesEventType||(e.SearchPlacesEventType={}))})((r=e.Event||(e.Event={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEventsManager{constructor(e){super(),this._searchPlaces=e}getInstanceOfEventType(r){let a;switch(r){case t.SearchPlacesEventType.Initialized:a=new t.SearchPlacesInitializedEvent;break;case t.SearchPlacesEventType.OnError:a=new t.SearchPlacesOnError;break;case t.SearchPlacesEventType.OnPlaceSelect:a=new t.SearchPlacesOnPlaceSelect;break;default:return void this._searchPlaces.searchPlacesEvents.trigger(t.SearchPlacesEventType.OnError,this._searchPlaces,e.Enum.ErrorCodes.GEN_UnsupportedEventSearchPlaces,void 0,`${r}`)}return a}addHandler(r,a,s){r===t.SearchPlacesEventType.Initialized&&this._searchPlaces.isReady?e.Helper.CallbackAsyncInvocation(a,this._searchPlaces,this._searchPlaces.widgetId):super.addHandler(r,a,s)}trigger(r,a,s,o,...n){if(this.handlers.has(r)){const i=this.handlers.get(r);switch(r){case t.SearchPlacesEventType.Initialized:i.trigger(a,a.widgetId||a.uniqueId);break;case t.SearchPlacesEventType.OnError:i.trigger(a,a.widgetId||a.uniqueId,s,...n);break;case t.SearchPlacesEventType.OnPlaceSelect:i.trigger(a,a.widgetId||a.uniqueId,o.name,o.coordinates,o.address);break;default:return void this._searchPlaces.searchPlacesEvents.trigger(t.SearchPlacesEventType.OnError,a,e.Enum.ErrorCodes.GEN_UnsupportedEventSearchPlaces,void 0,`${r}`)}}}}t.SearchPlacesEventsManager=a})((r=e.Event||(e.Event={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractSearchPlacesEvent{}e.SearchPlacesInitializedEvent=r})((r=e.Event||(e.Event={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){class t extends r.AbstractSearchPlacesEvent{trigger(r,t,a,s){this.handlers.slice(0).forEach((o=>e.Helper.CallbackAsyncInvocation(o.eventHandler,r,t,a,s)))}}r.SearchPlacesOnError=t})((r=e.Event||(e.Event={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractSearchPlacesEvent{}e.SearchPlacesOnPlaceSelect=r})((r=e.Event||(e.Event={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEvent{trigger(r,t,...a){this.handlers.slice(0).forEach((s=>e.Helper.CallbackAsyncInvocation(s.eventHandler,r,t,...a)))}}t.AbstractShapeEvent=a})((r=e.Event||(e.Event={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Initialized="Initialized",e.OnClick="OnClick",e.ProviderEvent="ProviderEvent"}(r=e.ShapeEventType||(e.ShapeEventType={}))})((r=e.Event||(e.Event={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(t){class a extends r.AbstractEventsManager{constructor(e){super(),this._shape=e}getInstanceOfEventType(a){let s;switch(a){case t.ShapeEventType.Initialized:s=new t.ShapeInitializedEvent;break;case t.ShapeEventType.OnClick:s=new t.ShapeOnClickEvent;break;default:if(!0===this._shape.validateProviderEvent(a)){s=new t.ShapeProviderEvent;break}return void this._shape.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._shape.map,e.Enum.ErrorCodes.GEN_UnsupportedEventShape,`${a}`)}return s}trigger(a,s,...o){if(a===t.ShapeEventType.ProviderEvent?this.handlers.has(s):this.handlers.has(a)){const n=this.handlers.get(a);switch(a){case t.ShapeEventType.Initialized:case t.ShapeEventType.OnClick:n.trigger(this._shape.map.widgetId,this._shape.widgetId||this._shape.uniqueId);break;case t.ShapeEventType.ProviderEvent:if(!0===this._shape.validateProviderEvent(s)){this.handlers.get(s).trigger(this._shape.map.widgetId,this._shape.widgetId||this._shape.uniqueId,s,...o);break}default:return void this._shape.map.mapEvents.trigger(r.OSMap.MapEventType.OnError,this._shape.map,e.Enum.ErrorCodes.GEN_UnsupportedEventMarker,`${a}`)}}}}t.ShapeEventsManager=a})((r=e.Event||(e.Event={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractShapeEvent{}e.ShapeInitializedEvent=r})((r=e.Event||(e.Event={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractShapeEvent{}e.ShapeOnClickEvent=r})((r=e.Event||(e.Event={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){class t extends r.AbstractShapeEvent{trigger(r,t,a,s){this.handlers.slice(0).forEach((o=>e.Helper.CallbackAsyncInvocation(o.eventHandler,r,t,a,s)))}}r.ShapeProviderEvent=t})((r=e.Event||(e.Event={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Feature||(e.Feature={})).ExposedFeatures=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.FileLayer||(e.FileLayer={})).AbstractFileLayer=class{constructor(r,t,a){this._map=r,this._uniqueId=t,this._config=a,this._built=!1,this._fileLayerEvents=new e.Event.FileLayer.FileLayersEventsManager(this),this._createElements=[]}get config(){return this._config}get createdElements(){return this._createElements}get fileLayerEvents(){return this._fileLayerEvents}get isReady(){return this._built}get map(){return this._map}get provider(){return this._provider}get uniqueId(){return this._uniqueId}get widgetId(){return void 0!==this._widgetId&&""!==this._widgetId||this._setWidgetId(),this._widgetId}_setWidgetId(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(e.Helper.Constants.fileLayerTag).id:void 0}finishBuild(){this._built=!0,this.fileLayerEvents.trigger(e.Event.FileLayer.FileLayersEventType.Initialized)}build(){this._built||this._setWidgetId()}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.map.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this.map,e.Enum.ErrorCodes.GEN_InvalidChangePropertyFileLayer,`${r}`)}dispose(){this._built=!1}equalsToID(e){return e===this._uniqueId||e===this.widgetId}getProviderConfig(){return this._config.getProviderConfig()}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.HeatmapLayer||(e.HeatmapLayer={})).AbstractHeatmapLayer=class{constructor(e,r,t){this._map=e,this._uniqueId=r,this._config=t,this._built=!1}get config(){return this._config}get isReady(){return this._built}get map(){return this._map}get provider(){return this._provider}get uniqueId(){return this._uniqueId}get widgetId(){return void 0!==this._widgetId&&""!==this._widgetId||this._setWidgetId(),this._widgetId}_setWidgetId(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(e.Helper.Constants.heatmapLayerTag).id:void 0}finishBuild(){this._built=!0}build(){this._built||this._setWidgetId()}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.map.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this.map,e.Enum.ErrorCodes.GEN_InvalidChangePropertyHeatmapLayer,`${r}`)}dispose(){this._built=!1}equalsToID(e){return e===this._uniqueId||e===this.widgetId}getProviderConfig(){return this._config.getProviderConfig()}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).CallbackAsyncInvocation=function(e,...r){e&&setTimeout(e,0,...r)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(function(r){r.markerGeneric='[data-block*="Marker.Marker"]',r.markerTag='[data-block="Marker.Marker"]',r.markerPopupTag='[data-block="Marker.MarkerPopup"]',r.shapeGeneric='[data-block*="Shapes."]',r.shapePolylineTag='[data-block="Shapes.Polyline"]',r.shapePolygonTag='[data-block="Shapes.Polygon"]',r.shapeCircleTag='[data-block="Shapes.Circle"]',r.shapeRectangleTag='[data-block="Shapes.Rectangle"]',r.fileLayerTag='[data-block="FileLayer.FileLayer"]',r.heatmapLayerTag='[data-block="HeatmapLayer.HeatmapLayer"]',r.searchPlacesTag='[data-block="SearchPlaces.SearchPlaces"]',r.outsystemsWidgetTag="[data-block]",r.staticMapTag='[data-block="Maps.StaticMap"]',r.mapTag=`[data-block*="Maps."]:not(${r.staticMapTag})`,r.drawingToolsTag='[data-block="Drawing_Tools.Drawing_Tools"]',r.drawingToolsGeneric='[data-block*="Drawing_Tools.Draw"]',r.runtimeMapUniqueIdCss=".runtime-map-container",r.mapUniqueIdCss=".map-container",r.markerPopup=".marker-popup-placeholder",r.markerUniqueIdCss=".ss-marker",r.staticMapCss=".staticMap-image",r.shapeUniqueIdCss=".ss-shape",r.drawingToolsUniqueIdCss=".ss-drawingTools",r.uniqueIdAttribute="name",r.runtimeSearchPlacesUniqueIdCss=".ss-searchPlaces",r.defaultMapCenter={lat:42.3517926,lng:-71.0467845},r.zoomAutofit=e.Enum.OSMap.Zoom.Zoom8,r.shapeChangedEvent="shape_changed",r.drawingMarkerCompleted="markercomplete",r.drawingPolylineCompleted="polylinecomplete",r.drawingPolygonCompleted="polygoncomplete",r.drawingCircleCompleted="circlecomplete",r.drawingRectangleCompleted="rectanglecomplete",r.clusterIconCSSClass="custom-clustericon"})((r=e.Helper||(e.Helper={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(r=e.Helper||(e.Helper={})).HasAllEmptyBounds=function(e){return r.IsEmptyString(e.north)&&r.IsEmptyString(e.south)&&r.IsEmptyString(e.east)&&r.IsEmptyString(e.west)},r.HasAnyEmptyBound=function(e){return r.IsEmptyString(e.north)||r.IsEmptyString(e.south)||r.IsEmptyString(e.east)||r.IsEmptyString(e.west)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).GenerateHashCode=function(e){let r,t=0,a=0;for(;a<e.length;a++)r=e.charCodeAt(a),t=(t<<5)-t+r,t|=0;return t}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).GenerateUniqueId=function(){return Math.random().toString(36)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(r=e.Helper||(e.Helper={})).GetClosestMapId=function(e){let t;t="string"==typeof e||e instanceof String?r.GetElementByUniqueId(e):e;const a=t.closest(r.Constants.mapTag);return a?a.querySelector(r.Constants.mapUniqueIdCss).getAttribute(r.Constants.uniqueIdAttribute):null},r.GetClosestMarkerId=function(e){let t;t="string"==typeof e||e instanceof String?r.GetElementByUniqueId(e):e;const a=t.closest(r.Constants.markerGeneric);if(a)return a.querySelector(r.Constants.markerUniqueIdCss).getAttribute(r.Constants.uniqueIdAttribute);throw new Error("The marker doesn't exist on the DOM")},r.GetClosestShapeId=function(e){let t;t="string"==typeof e||e instanceof String?r.GetElementByUniqueId(e):e;const a=t.closest(r.Constants.shapeGeneric);if(a)return a.querySelector(r.Constants.shapeUniqueIdCss).getAttribute(r.Constants.uniqueIdAttribute);throw new Error("The shape doesn't exist on the DOM")},r.GetClosestDrawingToolsId=function(e){let t;t="string"==typeof e||e instanceof String?r.GetElementByUniqueId(e):e;const a=t.closest(r.Constants.drawingToolsTag);if(a)return a.querySelector(r.Constants.drawingToolsUniqueIdCss).getAttribute(r.Constants.uniqueIdAttribute);throw new Error("The DrawingTools element doesn't exist on the DOM")},r.GetClosestSearchPlacesId=function(e){let t;t="string"==typeof e||e instanceof String?r.GetElementByUniqueId(e):e;const a=t.closest(r.Constants.searchPlacesTag);if(a)return a.querySelector(r.Constants.runtimeSearchPlacesUniqueIdCss).getAttribute(r.Constants.uniqueIdAttribute);throw new Error("The SearchPlaces element doesn't exist on the DOM")}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).GetElementByUniqueId=function(e,r=!0){const t=document.getElementsByName(e);if(t.length)return t[0];if(r)throw new Error(`Object with name '${e}' not found.`)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).GetElementByWidgetId=function(e){const r=document.getElementById(e);if(r)return r;throw new Error(`Object with name '${e}' not found.`)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).IsEmptyString=function(e){return"string"!=typeof e||""===e||0===e.trim().length}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).IsValidNumber=function(e){return!isNaN(e)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(OSFramework){var Maps;(function(Maps){var Helper;(function(Helper){function JsonFormatter(text){let json={};return void 0===text||""===text||(json=eval("("+text+")")),json}Helper.JsonFormatter=JsonFormatter})(Helper=Maps.Helper||(Maps.Helper={}))})(Maps=OSFramework.Maps||(OSFramework.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r,t;r=e.Helper||(e.Helper={}),(t=r.LocalStorage||(r.LocalStorage={})).GetItem=function(e){return window.localStorage.getItem(e)},t.HasItem=function(e){return null!==window.localStorage.getItem(e)},t.SetItem=function(e,r){window.localStorage.setItem(e,r)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;(r=e.Helper||(e.Helper={})).warningMessage="This API is deprecated please use the new api",r.LogWarningMessage=function(e){console.warn(e)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).ThrowError=function(r,t,a){r.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,r,t,`${a||""}`)}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Helper||(e.Helper={})).ValidateFeatureProvider=function(r,t){if(r.providerType===e.Enum.ProviderType.Google)return!0;switch(t){case e.Enum.Feature.Marker:case e.Enum.Feature.MarkerPopup:case e.Enum.Feature.Shapes:case e.Enum.Feature.Directions:case e.Enum.Feature.DrawingTools:return!0;case e.Enum.Feature.HeatmapLayer:case e.Enum.Feature.FileLayer:default:return console.warn(`Feature ${t} is not implemented for the Map Leaflet`),!1}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Marker||(e.Marker={})).AbstractMarker=class{constructor(r,t,a,s){this._map=r,this._uniqueId=t,this._config=s,this._built=!1,this._destroyed=!1,this._markerEvents=new e.Event.Marker.MarkerEventsManager(this)}get config(){return this._config}get hasPopup(){return!1}get index(){return this._map.markers.findIndex((e=>e.uniqueId===this.uniqueId))}get isReady(){return this._built}get map(){return this._map}get markerEvents(){return this._markerEvents}get provider(){return this._provider}get uniqueId(){return this._uniqueId}get widgetId(){return this._widgetId}finishBuild(){this._built=!0,this.markerEvents.trigger(e.Event.Marker.MarkerEventType.Initialized),this._map.hasMarkerClusterer()&&this._map.features.markerClusterer.addMarker(this)}build(){this._built||(this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(this.markerTag).id:void 0)}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.map.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this.map,e.Enum.ErrorCodes.GEN_InvalidChangePropertyMarker,`${r}`)}dispose(){this._built=!1,this._destroyed=!0}equalsToID(e){return e===this._uniqueId||e===this._widgetId}getPosition(){const e=this._provider;return e.getPosition?e.getPosition():e.position}getProviderConfig(){return this.config.getProviderConfig()}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(r){let t;!function(r){r.MakeMarker=function(r,t,a,s){switch(r.providerType){case e.Enum.ProviderType.Google:return Provider.Maps.Google.Marker.MarkerFactory.MakeMarker(r,t,a,s);case e.Enum.ProviderType.Leaflet:return Provider.Maps.Leaflet.Marker.MarkerFactory.MakeMarker(r,t,a,s);default:throw new Error(`There is no factory for the Marker using the provider ${r.providerType}`)}}}(t=r.MarkerFactory||(r.MarkerFactory={}))}(e.Marker||(e.Marker={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.OSMap||(e.OSMap={})).AbstractMap=class{constructor(r,t,a,s){this._uniqueId=r,this._fileLayers=new Map,this._heatmapLayers=new Map,this._markers=new Map,this._shapes=new Map,this._fileLayersSet=new Set,this._heatmapLayersSet=new Set,this._markersSet=new Set,this._shapesSet=new Set,this._config=a,this._isReady=!1,this._mapEvents=new e.Event.OSMap.MapEventsManager(this),this._mapType=s,this._mapRefreshRequest=0,this._providerType=t,this._zoomChanged=!1,this._mapZoomChangeCallback=this._mapZoomChangeHandler.bind(this)}get allowRefreshZoom(){return!(this.config.respectUserZoom&&this._zoomChanged)}get shapes(){return Array.from(this._shapesSet)}get config(){return this._config}get features(){return this._features}get isReady(){return this._isReady}get drawingTools(){return this._drawingTools}get fileLayers(){return Array.from(this._fileLayersSet)}get heatmapLayers(){return Array.from(this._heatmapLayersSet)}get markers(){return Array.from(this._markersSet)}get markersReady(){return this.markers.filter((e=>e.isReady)).map((e=>e.provider))}get mapEvents(){return this._mapEvents}get provider(){return this._provider}get providerType(){return this._providerType}get uniqueId(){return this._uniqueId}get widgetId(){return this._widgetId}_mapZoomChangeHandler(){this.config.respectUserZoom&&(this._zoomChanged=!0)}finishBuild(){this._isReady=!0,this.mapEvents.trigger(e.Event.OSMap.MapEventType.Initialized,this)}addDrawingTools(e){return this._drawingTools=e,e}addFileLayer(e){return this._fileLayers.set(e.uniqueId,e),this._fileLayersSet.add(e),e}addHeatmapLayer(e){return this._heatmapLayers.set(e.uniqueId,e),this._heatmapLayersSet.add(e),e}addMarker(e){return this._markers.set(e.uniqueId,e),this._markersSet.add(e),e}addShape(e){return this._shapes.set(e.uniqueId,e),this._shapesSet.add(e),e}build(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId).closest(this.mapTag).id}cancelScheduledResfresh(){0!==this._mapRefreshRequest&&(clearTimeout(this._mapRefreshRequest),this._mapRefreshRequest=0)}changeProperty(r,t){if(this.config.hasOwnProperty(r)){const a=e.Enum.OS_Config_Map[r];a!==e.Enum.OS_Config_Map.offset&&a!==e.Enum.OS_Config_Map.localization||(t=JSON.parse(t)),this.config[r]=t,e.Enum.OS_Config_Map.respectUserZoom===e.Enum.OS_Config_Map[r]&&(this._zoomChanged=!1)}else this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.GEN_InvalidChangePropertyMap,`${r}`)}dispose(){this._isReady=!1,this._markers.forEach(((e,r)=>{this.removeMarker(r)})),this._shapes.forEach(((e,r)=>{this.removeShape(r)})),this.drawingTools&&this.removeDrawingTools(this.drawingTools.uniqueId)}equalsToID(e){return e===this._uniqueId||e===this._widgetId}getFileLayer(e){return this._fileLayers.has(e)?this._fileLayers.get(e):this.fileLayers.find((r=>r&&r.equalsToID(e)))}getHeatmapLayer(e){return this._heatmapLayers.has(e)?this._heatmapLayers.get(e):this.heatmapLayers.find((r=>r&&r.equalsToID(e)))}getMarker(e){return this._markers.has(e)?this._markers.get(e):this.markers.find((r=>r&&r.equalsToID(e)))}getShape(e){return this._shapes.has(e)?this._shapes.get(e):this.shapes.find((r=>r&&r.equalsToID(e)))}hasFileLayer(e){return this._fileLayers.has(e)}hasHeatmapLayer(e){return this._heatmapLayers.has(e)}hasMarker(e){return this._markers.has(e)}hasMarkerClusterer(){var e,r;return null===(r=null===(e=this._features)||void 0===e?void 0:e.markerClusterer)||void 0===r?void 0:r.isEnabled}hasShape(e){return this._shapes.has(e)}removeAllFileLayers(){this._mapType===e.Enum.MapType.StaticMap&&this.isReady?this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap):(this._fileLayers.forEach((e=>{e.dispose()})),this._fileLayers.clear(),this._fileLayersSet.clear(),this._isReady&&this.refresh())}removeAllMarkers(){this._mapType===e.Enum.MapType.StaticMap&&this.isReady?this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap):(this._markers.forEach((e=>{this.hasMarkerClusterer()&&this.features.markerClusterer.removeMarker(e),e.dispose()})),this._markers.clear(),this._markersSet.clear(),this._isReady&&this.refresh())}removeAllShapes(){this._mapType===e.Enum.MapType.StaticMap&&this.isReady?this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap):(this._shapes.forEach((e=>{e.dispose()})),this._shapes.clear(),this._shapesSet.clear(),this._isReady&&this.refresh())}removeDrawingTools(r){this._mapType===e.Enum.MapType.StaticMap&&this.isReady?this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap):this._drawingTools&&this._drawingTools.uniqueId===r&&(this._drawingTools.dispose(),this._drawingTools=void 0)}removeFileLayer(r){if(this._mapType===e.Enum.MapType.StaticMap&&this.isReady)this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap);else if(this._fileLayers.has(r)){const e=this._fileLayers.get(r);e.dispose(),this._fileLayers.delete(r),this._fileLayersSet.delete(e)}}removeHeatmapLayer(r){if(this._mapType===e.Enum.MapType.StaticMap&&this.isReady)this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap);else if(this._heatmapLayers.has(r)){const e=this._heatmapLayers.get(r);e.dispose(),this._heatmapLayers.delete(r),this._heatmapLayersSet.delete(e)}}removeMarker(r){if(this._mapType===e.Enum.MapType.StaticMap&&this.isReady)this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap);else if(this._markers.has(r)){const e=this._markers.get(r);this.hasMarkerClusterer()&&this.features.markerClusterer.removeMarker(e),e.dispose(),this._markers.delete(r),this._markersSet.delete(e),this._isReady&&this.refresh()}}removeShape(r){if(this._mapType===e.Enum.MapType.StaticMap&&this.isReady)this.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this,e.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap);else if(this._shapes.has(r)){const e=this._shapes.get(r);e.dispose(),this._shapes.delete(r),this._shapesSet.delete(e),this._isReady&&this.refresh()}}scheduleRefresh(){this.cancelScheduledResfresh(),this._mapRefreshRequest=setTimeout((()=>{this.refresh()}),0)}updateHeight(){}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(r){let t;!function(r){r.MakeMap=function(r,t,a,s){switch(r){case e.Enum.ProviderType.Google:return Provider.Maps.Google.OSMap.MapFactory.MakeMap(t,a,s);case e.Enum.ProviderType.Leaflet:return Provider.Maps.Leaflet.OSMap.MapFactory.MakeMap(t,a,s);default:throw new Error(`There is no factory for this Map provider (${r})`)}}}(t=r.MapFactory||(r.MapFactory={}))}(e.OSMap||(e.OSMap={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;((r=e.OSStructures||(e.OSStructures={})).API||(r.API={})).CircleProperties=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;((r=e.OSStructures||(e.OSStructures={})).API||(r.API={})).PendingTools=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r,t;r=e.OSStructures||(e.OSStructures={}),(t=r.Directions||(r.Directions={})).Options=class{},t.ExcludeCriteria=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r,t;r=e.OSStructures||(e.OSStructures={}),(t=r.OSMap||(r.OSMap={})).BoundsString=class{},t.Bounds=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r,t;r=e.OSStructures||(e.OSStructures={}),(t=r.OSMap||(r.OSMap={})).Coordinates=class{},t.OSCoordinates=class{constructor(e,r){this.Lat=e,this.Lng=r}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r;((r=e.OSStructures||(e.OSStructures={})).Directions||(r.Directions={})).DirectionLegs=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){var r,t;r=e.OSStructures||(e.OSStructures={}),(t=r.OSMap||(r.OSMap={})).Offset=class{},t.Localization=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.OSStructures||(e.OSStructures={})).ReturnMessage=class{}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.SearchPlaces||(e.SearchPlaces={})).AbstractSearchPlaces=class{constructor(r,t){this._uniqueId=r,this._config=t,this._built=!1,this._searchPlacesEvents=new e.Event.SearchPlaces.SearchPlacesEventsManager(this)}get config(){return this._config}get isReady(){return this._built}get provider(){return this._provider}get searchPlacesEvents(){return this._searchPlacesEvents}get uniqueId(){return this._uniqueId}get widgetId(){return void 0!==this._widgetId&&""!==this._widgetId||this._setWidgetId(),this._widgetId}_setWidgetId(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(e.Helper.Constants.searchPlacesTag).id:void 0}finishBuild(){this._built=!0,this.searchPlacesEvents.trigger(e.Event.SearchPlaces.SearchPlacesEventType.Initialized,this)}build(){this._built||this._setWidgetId()}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.searchPlacesEvents.trigger(e.Event.SearchPlaces.SearchPlacesEventType.OnError,this,e.Enum.ErrorCodes.GEN_InvalidChangePropertySearchPlaces,void 0,`${r}`)}dispose(){this._built=!1}equalsToID(e){return e===this._uniqueId||e===this.widgetId}getProviderConfig(){return this.config.getProviderConfig()}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){(e.Shape||(e.Shape={})).AbstractShape=class{constructor(r,t,a,s){this._map=r,this._uniqueId=t,this._config=s,this._built=!1,this._shapeEvents=new e.Event.Shape.ShapeEventsManager(this),this._type=a,this._addedEvents=[]}get config(){return this._config}get isReady(){return this._built}get map(){return this._map}get minPath(){return e.Enum.ShapeMinPath[this._type]}get provider(){return this._provider}get shapeEvents(){return this._shapeEvents}get type(){return this._type}get uniqueId(){return this._uniqueId}get widgetId(){return void 0!==this._widgetId&&""!==this._widgetId||this._setWidgetId(),this._widgetId}_setWidgetId(){this._widgetId=e.Helper.GetElementByUniqueId(this.uniqueId,!1)?e.Helper.GetElementByUniqueId(this.uniqueId).closest(this.shapeTag).id:void 0}finishBuild(){this._built=!0,this.shapeEvents.trigger(e.Event.Shape.ShapeEventType.Initialized)}triggerShapeChangedEvent(){const r=this.getShapeCoordinates();this.shapeEvents.trigger(e.Event.Shape.ShapeEventType.ProviderEvent,e.Helper.Constants.shapeChangedEvent,r)}build(){this._built||this._setWidgetId()}changeProperty(r,t){this.config.hasOwnProperty(r)?this.config[r]=t:this.map.mapEvents.trigger(e.Event.OSMap.MapEventType.OnError,this.map,e.Enum.ErrorCodes.GEN_InvalidChangePropertyShape,`${r}`)}dispose(){this._built=!1}equalsToID(e){return e===this._uniqueId||e===this.widgetId}getProviderConfig(){return this.config.getProviderConfig()}validateProviderEvent(e){return-1!==this.shapeProviderEvents.indexOf(e)}}}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){!function(r){let t;!function(r){r.MakeShape=function(r,t,a,s){switch(r.providerType){case e.Enum.ProviderType.Google:return Provider.Maps.Google.Shape.ShapeFactory.MakeShape(r,t,a,s);case e.Enum.ProviderType.Leaflet:return Provider.Maps.Leaflet.Shape.ShapeFactory.MakeShape(r,t,a,s);default:throw new Error(`There is no factory for the Shape using the provider ${r.providerType}`)}}}(t=r.ShapeFactory||(r.ShapeFactory={}))}(e.Shape||(e.Shape={}))}(e.Maps||(e.Maps={}))}(OSFramework||(OSFramework={})),function(e){!function(e){e.GetVersion=function(){return OSFramework.Maps.Constants.OSMapsVersion}}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){!function(e){!function(e){(e.Auxiliary||(e.Auxiliary={})).GetHashCode=function(e){return OSFramework.Maps.Helper.GenerateHashCode(e)}}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){(e.Auxiliary||(e.Auxiliary={})).GetHashCode=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Auxiliary.GetHashCode()'`),OutSystems.Maps.MapAPI.Auxiliary.GetHashCode(e)}}(MapAPI||(MapAPI={})),function(e){!function(r){!function(r){var t;(t=r.Directions||(r.Directions={})).GetLegsFromDirection=function(r){const t=e.Maps.MapAPI.MapManager.GetMapById(r,!0);return JSON.stringify(t.features.directions.getLegsFromDirection())},t.GetTotalDistanceFromDirection=function(e){return r.MapManager.GetMapById(e,!0).features.directions.getTotalDistanceFromDirection()},t.GetTotalDurationFromDirection=function(e){return r.MapManager.GetMapById(e,!0).features.directions.getTotalDurationFromDirection()},t.LoadPlugin=function(e,t,a){const s=r.MapManager.GetMapById(e,!0).features.directions.setPlugin(t,a);return JSON.stringify(s)},t.SetDirections=async function(e,t){const a=r.MapManager.GetMapById(e,!0),s=JSON.parse(t);return a.features.directions.setRoute(s).then((e=>JSON.stringify(e)))},t.RemoveDirections=function(e){const t=r.MapManager.GetMapById(e,!0);return JSON.stringify(t.features.directions.removeRoute())}}(r.MapAPI||(r.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.Directions||(e.Directions={})).GetLegsFromDirection=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Directions.GetLegsFromDirection()'`),OutSystems.Maps.MapAPI.Directions.GetLegsFromDirection(e)},r.GetTotalDistanceFromDirection=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Directions.GetTotalDistanceFromDirection()'`),OutSystems.Maps.MapAPI.Directions.GetTotalDistanceFromDirection(e)},r.GetTotalDurationFromDirection=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Directions.GetTotalDurationFromDirection()'`),OutSystems.Maps.MapAPI.Directions.GetTotalDurationFromDirection(e)},r.LoadPlugin=function(e,r,t){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Directions.LoadPlugin()'`),OutSystems.Maps.MapAPI.Directions.LoadPlugin(e,r,t)},r.SetDirections=function(e,r){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Directions.SetDirections()'`),OutSystems.Maps.MapAPI.Directions.SetDirections(e,r)},r.RemoveDirections=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Directions.RemoveDirections()'`),OutSystems.Maps.MapAPI.Directions.RemoveDirections(e)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){var r;(function(e){const t=new Map;e.CheckPendingEvents=function(e){for(const r of t.keys())e.equalsToID(r)&&(t.get(r).forEach((r=>{e.drawingToolsEvents.addHandler(r.event,r.cb,r.uniqueId)})),e.refreshProviderEvents(),t.delete(r))},e.SubscribeByToolUniqueId=function(e,a,s){const o=r.GetDrawingToolsByToolUniqueId(e),n=r.GetDrawingToolsById(o,!1);void 0===n?t.has(o)?t.get(o).push({event:a,cb:s,uniqueId:e}):t.set(o,[{event:a,cb:s,uniqueId:e}]):n.drawingToolsEvents.addHandler(a,s,e)},e.UnsubscribeByToolId=function(e,a,s){const o=r.GetDrawingToolsByToolUniqueId(e),n=r.GetDrawingToolsById(o,!1);if(void 0!==n)n.drawingToolsEvents.removeHandler(a,s),n.refreshProviderEvents();else if(t.has(o)){const e=t.get(o).findIndex((e=>e.event===a&&e.cb===s));-1!==e&&t.get(o).splice(e,1)}}})((r=e.DrawingToolsManager||(e.DrawingToolsManager={})).Events||(r.Events={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r,t;r=e.DrawingToolsManager||(e.DrawingToolsManager={}),(t=r.Events||(r.Events={})).CheckPendingEvents=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.Events.CheckPendingEvents()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.Events.CheckPendingEvents(e)},t.SubscribeByToolUniqueId=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.Events.SubscribeByToolUniqueId()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.Events.SubscribeByToolUniqueId(e,r,t)},t.UnsubscribeByToolId=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.Events.UnsubscribeByToolId()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.Events.UnsubscribeByToolId(e,r,t)}}(MapAPI||(MapAPI={})),function(e){!function(r){!function(r){!function(t){const a=new Map;let s;const o=new Map;function n(e,r,a,s){if(!e.hasTool(r)&&!e.toolAlreadyExists(a)){const o=OSFramework.Maps.DrawingTools.DrawingToolsFactory.MakeTool(e.map,e,r,a,JSON.parse(s));return e.addTool(o),t.Events.CheckPendingEvents(e),o}OSFramework.Maps.Helper.ThrowError(e.map,OSFramework.Maps.Enum.ErrorCodes.GEN_ToolTypeAlreadyExists,a)}function i(e){for(const r of o.keys())e.equalsToID(r)&&(o.get(r).forEach((r=>{n(e,r.toolId,r.type,r.configs)})),e.refreshProviderEvents(),o.delete(r))}function p(e,r=!0){const t=s&&s.equalsToID(e)?s:void 0;if(void 0===t&&r)throw new Error(`DrawingTools id:${e} not found`);return t}function l(e){const r=OSFramework.Maps.Helper.GetElementByUniqueId(e);return OSFramework.Maps.Helper.GetClosestDrawingToolsId(r)}t.AddTool=function(e,r,t){const a=l(e),s=p(a,!1);if(void 0!==s)return n(s,e,r,t);o.has(a)?o.get(a).push({toolId:e,type:r,configs:t}):o.set(a,[{toolId:e,type:r,configs:t}])},t.ChangeProperty=function(e,r,t){const a=p(e).map;void 0!==a&&a.changeDrawingToolsProperty(e,r,t)},t.ChangeToolProperty=function(e,r,t){const a=p(l(e),!1);void 0!==a&&a.changeToolProperty(e,r,t)},t.CheckPendingTools=i,t.CreateDrawingTools=function(t,o){const n=function(t){let s;if(a.has(t))s=r.MapManager.GetMapById(a.get(t),!1);else{const r=OSFramework.Maps.Helper.GetElementByUniqueId(t,!1);if(void 0!==r){const t=OSFramework.Maps.Helper.GetClosestMapId(r);s=e.Maps.MapAPI.MapManager.GetMapById(t)}}return s}(t);if(!1!==OSFramework.Maps.Helper.ValidateFeatureProvider(n,OSFramework.Maps.Enum.Feature.DrawingTools)){if(!n.drawingTools){const e=OSFramework.Maps.DrawingTools.DrawingToolsFactory.MakeDrawingTools(n,t,JSON.parse(o));return s=e,a.set(t,n.uniqueId),n.addDrawingTools(e),i(e),e}console.error(`There is already a DrawingTools registered on the specified Map under id:${t}`)}},t.GetDrawingToolsById=p,t.GetDrawingToolsByToolUniqueId=l,t.RemoveDrawingTools=function(e){const r=p(e,!1);if(void 0!==r){const t=r.map;t&&t.removeDrawingTools(e),a.delete(e),s=void 0}},t.RemoveTool=function(e){const r=p(l(e),!1);r&&r.removeTool(e)}}(r.DrawingToolsManager||(r.DrawingToolsManager={}))}(r.MapAPI||(r.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.DrawingToolsManager||(e.DrawingToolsManager={})).AddTool=function(e,r,t){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.AddTool()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.AddTool(e,r,t)},r.ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.ChangeProperty()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.ChangeProperty(e,r,t)},r.ChangeToolProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.ChangeToolProperty()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.ChangeToolProperty(e,r,t)},r.CheckPendingTools=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.CheckPendingTools()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.CheckPendingTools(e)},r.CreateDrawingTools=function(e,r){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.CreateDrawingTools()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.CreateDrawingTools(e,r)},r.GetDrawingToolsById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.GetDrawingToolsById()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.GetDrawingToolsById(e,r)},r.GetDrawingToolsByToolUniqueId=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.GetDrawingToolsByToolUniqueId()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.GetDrawingToolsByToolUniqueId(e)},r.RemoveDrawingTools=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.RemoveDrawingTools()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.RemoveDrawingTools(e)},r.RemoveTool=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.DrawingToolsManager.RemoveTool()'`),OutSystems.Maps.MapAPI.DrawingToolsManager.RemoveTool(e)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){var r;(function(e){const t=new Map;e.CheckPendingEvents=function(e){for(const r of t.keys())e.equalsToID(r)&&(t.get(r).forEach((r=>{e.fileLayerEvents.addHandler(r.event,r.cb,r.uniqueId)})),e.refreshProviderEvents(),t.delete(r))},e.Subscribe=function(e,a,s){const o=r.GetFileLayerById(e,!1);void 0===o?t.has(e)?t.get(e).push({event:a,cb:s,uniqueId:e}):t.set(e,[{event:a,cb:s,uniqueId:e}]):(o.fileLayerEvents.addHandler(a,s,e),o.refreshProviderEvents())},e.Unsubscribe=function(e,a,s){const o=r.GetFileLayerById(e,!1);if(void 0!==o)o.fileLayerEvents.removeHandler(a,s),o.refreshProviderEvents();else if(t.has(e)){const r=t.get(e).findIndex((e=>e.event===a&&e.cb===s));-1!==r&&t.get(e).splice(r,1)}}})((r=e.FileLayerManager||(e.FileLayerManager={})).Events||(r.Events={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r,t;r=e.FileLayerManager||(e.FileLayerManager={}),(t=r.Events||(r.Events={})).CheckPendingEvents=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.Events.CheckPendingEvents()'`),OutSystems.Maps.MapAPI.FileLayerManager.Events.CheckPendingEvents(e)},t.Subscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.Events.Subscribe()'`),OutSystems.Maps.MapAPI.FileLayerManager.Events.Subscribe(e,r,t)},t.Unsubscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.Events.Unsubscribe()'`),OutSystems.Maps.MapAPI.FileLayerManager.Events.Unsubscribe(e,r,t)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){!function(r){const t=new Map,a=new Array;function s(e,r=!0){const t=a.find((r=>r&&r.equalsToID(e)));if(void 0===t&&r)throw new Error(`FileLayer id:${e} not found`);return t}r.ChangeProperty=function(e,r,t){const a=s(e).map;void 0!==a&&a.changeFileLayerProperty(e,r,t)},r.CreateFileLayer=function(r,s){const o=function(r){let a;if(t.has(r))a=e.MapManager.GetMapById(t.get(r),!1);else{const t=OSFramework.Maps.Helper.GetElementByUniqueId(r,!1);if(void 0!==t){const r=OSFramework.Maps.Helper.GetClosestMapId(t);a=e.MapManager.GetMapById(r)}}return a}(r);if(!1!==OSFramework.Maps.Helper.ValidateFeatureProvider(o,OSFramework.Maps.Enum.Feature.FileLayer)){if(!o.hasFileLayer(r)){const e=Provider.Maps.Google.FileLayer.FileLayerFactory.MakeFileLayer(o,r,JSON.parse(s));return a.push(e),t.set(r,o.uniqueId),o.addFileLayer(e),e}console.error(`There is already a FileLayer registered on the specified Map under id:${r}`)}},r.GetFileLayerById=s,r.RemoveFileLayer=function(e){const r=s(e).map;r&&r.removeFileLayer(e),t.delete(e),a.splice(a.findIndex((r=>r&&r.equalsToID(e))),1)}}(e.FileLayerManager||(e.FileLayerManager={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.FileLayerManager||(e.FileLayerManager={})).ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.ChangeProperty()'`),OutSystems.Maps.MapAPI.FileLayerManager.ChangeProperty(e,r,t)},r.CreateFileLayer=function(e,r){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.CreateFileLayer()'`),OutSystems.Maps.MapAPI.FileLayerManager.CreateFileLayer(e,r)},r.GetFileLayerById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.GetFileLayerById()'`),OutSystems.Maps.MapAPI.FileLayerManager.GetFileLayerById(e,r)},r.RemoveFileLayer=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.FileLayerManager.RemoveFileLayer()'`),OutSystems.Maps.MapAPI.FileLayerManager.RemoveFileLayer(e)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){!function(r){const t=new Map,a=new Array;function s(e,r=!0){const t=a.find((r=>r&&r.equalsToID(e)));if(void 0===t&&r)throw new Error(`Marker id:${e} not found`);return t}r.ChangeProperty=function(e,r,t){const a=s(e).map;void 0!==a&&a.changeHeatmapLayerProperty(e,r,t)},r.CreateHeatmapLayer=function(r,s){const o=function(r){let a;if(t.has(r))a=e.MapManager.GetMapById(t.get(r),!1);else{const t=OSFramework.Maps.Helper.GetElementByUniqueId(r,!1);if(void 0!==t){const r=OSFramework.Maps.Helper.GetClosestMapId(t);a=e.MapManager.GetMapById(r)}}return a}(r);if(!1!==OSFramework.Maps.Helper.ValidateFeatureProvider(o,OSFramework.Maps.Enum.Feature.HeatmapLayer)){if(!o.hasHeatmapLayer(r)){const e=Provider.Maps.Google.HeatmapLayer.HeatmapLayerFactory.MakeHeatmapLayer(o,r,JSON.parse(s));return a.push(e),t.set(r,o.uniqueId),o.addHeatmapLayer(e),e}console.error(`There is already a HeatmapLayer registered on the specified Map under id:${r}`)}},r.GetHeatmapLayerById=s,r.RemoveHeatmapLayer=function(e){const r=s(e).map;r&&r.removeHeatmapLayer(e),t.delete(e),a.splice(a.findIndex((r=>r&&r.equalsToID(e))),1)}}(e.HeatmapLayerManager||(e.HeatmapLayerManager={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.HeatmapLayerManager||(e.HeatmapLayerManager={})).ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.HeatmapLayerManager.ChangeProperty()'`),OutSystems.Maps.MapAPI.HeatmapLayerManager.ChangeProperty(e,r,t)},r.CreateHeatmapLayer=function(e,r){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.HeatmapLayerManager.CreateHeatmapLayer()'`),OutSystems.Maps.MapAPI.HeatmapLayerManager.CreateHeatmapLayer(e,r)},r.GetHeatmapLayerById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.HeatmapLayerManager.GetHeatmapLayerById()'`),OutSystems.Maps.MapAPI.HeatmapLayerManager.GetHeatmapLayerById(e,r)},r.RemoveHeatmapLayer=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.HeatmapLayerManager.RemoveHeatmapLayer()'`),OutSystems.Maps.MapAPI.HeatmapLayerManager.RemoveHeatmapLayer(e)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){var r;(r=e.ProviderLibrary||(e.ProviderLibrary={})).GetVersion=function(e){return OSFramework.Maps.ProviderVersion.Get(e)},r.SetVersion=function(e,r,t=!1){OSFramework.Maps.ProviderVersion.Change(e,r,t)}}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){!function(e){!function(e){var r;(function(e){const t=new Map,a=new Map;function s(e,t=!0){if(t&&!a.has(e)){const t=OSFramework.Maps.Helper.GetElementByUniqueId(e),s=OSFramework.Maps.Helper.GetClosestMapId(t);r.GetMapById(s)&&a.set(e,s)}return a.get(e)}e.CheckPendingEvents=function(e){for(const r of t.keys())e.equalsToID(r)&&(t.get(r).forEach((r=>{e.mapEvents.addHandler(r.event,r.cb,r.uniqueId)})),t.delete(r))},e.GetMapByEventUniqueId=s,e.Subscribe=function(e,a,s){const o=r.GetMapById(e,!1);void 0===o?t.has(e)?t.get(e).push({event:a,cb:s,uniqueId:e}):t.set(e,[{event:a,cb:s,uniqueId:e}]):o.mapEvents.addHandler(a,s)},e.SubscribeByUniqueId=function(e,a,o){const n=s(e),i=r.GetMapById(n,!1);void 0===i?t.has(n)?t.get(n).push({event:a,cb:o,uniqueId:e}):t.set(n,[{event:a,cb:o,uniqueId:e}]):(i.mapEvents.addHandler(a,o,e),i.refreshProviderEvents())},e.Unsubscribe=function(e,a,o){const n=s(e),i=r.GetMapById(n,!1);if(void 0!==i)i.mapEvents.removeHandler(a,o),i.refreshProviderEvents();else if(t.has(n)){const e=t.get(n).findIndex((e=>e.event===a&&e.cb===o));-1!==e&&t.get(n).splice(e,1)}}})((r=e.MapManager||(e.MapManager={})).Events||(r.Events={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r,t;r=e.MapManager||(e.MapManager={}),(t=r.Events||(r.Events={})).CheckPendingEvents=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.Events.CheckPendingEvents()'`),OutSystems.Maps.MapAPI.MapManager.Events.CheckPendingEvents(e)},t.GetMapByEventUniqueId=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.Events.GetMapByEventUniqueId()'`),OutSystems.Maps.MapAPI.MapManager.Events.GetMapByEventUniqueId(e,r)},t.Subscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.Events.Subscribe()'`),OutSystems.Maps.MapAPI.MapManager.Events.Subscribe(e,r,t)},t.SubscribeByUniqueId=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.Events.SubscribeByUniqueId()'`),OutSystems.Maps.MapAPI.MapManager.Events.SubscribeByUniqueId(e,r,t)},t.Unsubscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.Events.Unsubscribe()'`),OutSystems.Maps.MapAPI.MapManager.Events.Unsubscribe(e,r,t)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){!function(r){const t=new Map;let a;function s(e,r=!0){let a;if(t.has(e))a=t.get(e);else{const r=Array.from(t.values()).filter((r=>r.equalsToID(e)));r.length>0&&(a=r[r.length-1])}if(void 0===a&&r)throw new Error(`Map id:${e} not found`);return a}r.ChangeProperty=function(e,r,t){s(e).changeProperty(r,t)},r.CreateMap=function(e,s,o,n){const i=OSFramework.Maps.OSMap.MapFactory.MakeMap(s,o,e,JSON.parse(n));if(t.has(e))throw new Error(`There is already a Map registered under id:${e}`);return t.set(e,i),a=i,r.Events.CheckPendingEvents(i),i},r.GetActiveMap=function(){return a},r.GetAllMarkers=function(e){return s(e).markers},r.GetMapById=s,r.GetMapCenter=function(e){const t=r.GetMapById(e,!0).features.center.getMapCenter();return JSON.stringify(t)},r.GetMapsFromPage=function(){return t},r.InitializeMap=function(e){const t=s(e);t.build(),r.Events.CheckPendingEvents(t)},r.RemoveMap=function(r){const o=s(r);t.delete(o.uniqueId),a.uniqueId===o.uniqueId&&(a=Array.from(t.values()).pop()),o.dispose(),e.MarkerManager.RemoveAllMarkers(r,!1)},r.RemoveMarkers=function(e){s(e).removeAllMarkers()},r.RemoveFileLayers=function(e){s(e).removeAllFileLayers()},r.SetHeight=function(e,r){const t=s(e);let a=t.widgetId;void 0===a&&(a=OSFramework.Maps.Helper.GetElementByUniqueId(e).closest(t.mapTag).id);const o=OSFramework.Maps.Helper.GetElementByWidgetId(a);if(!o)throw new Error(`Map id:${e} not found`);if(""===r){let e=0,t=o.parentNode;do{e=t.offsetHeight,t=t.parentNode}while(e<=200&&t!==document.body);r=e+"px"}else!1===isNaN(Number(r))&&(r+="px");o.style.setProperty("--map-height",r),t.updateHeight()},r.SetClusterRenderer=function(e,r){const t=s(e);if(t.providerType!==OSFramework.Maps.Enum.ProviderType.Google)throw new Error(`Map id:${e} is not an instance of Google Map. This API is only available to for Google Maps.`);t.setClusterRenderer(r)}}(e.MapManager||(e.MapManager={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.MapManager||(e.MapManager={})).ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.ChangeProperty()'`),OutSystems.Maps.MapAPI.MapManager.ChangeProperty(e,r,t)},r.CreateMap=function(e,r,t,a){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.CreateMap()'`),OutSystems.Maps.MapAPI.MapManager.CreateMap(e,r,t,a)},r.GetActiveMap=function(){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.GetActiveMap()'`),OutSystems.Maps.MapAPI.MapManager.GetActiveMap()},r.GetAllMarkers=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.GetAllMarkers()'`),OutSystems.Maps.MapAPI.MapManager.GetAllMarkers(e)},r.GetMapById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.GetMapById()'`),OutSystems.Maps.MapAPI.MapManager.GetMapById(e,r)},r.GetMapsFromPage=function(){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.GetMapsFromPage()'`),OutSystems.Maps.MapAPI.MapManager.GetMapsFromPage()},r.InitializeMap=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.InitializeMap()'`),OutSystems.Maps.MapAPI.MapManager.InitializeMap(e)},r.RemoveMap=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.RemoveMap()'`),OutSystems.Maps.MapAPI.MapManager.RemoveMap(e)},r.RemoveMarkers=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.RemoveMarkers()'`),OutSystems.Maps.MapAPI.MapManager.RemoveMarkers(e)},r.RemoveFileLayers=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.RemoveFileLayers()'`),OutSystems.Maps.MapAPI.MapManager.RemoveFileLayers(e)},r.SetHeight=function(e,r){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MapManager.SetHeight()'`),OutSystems.Maps.MapAPI.MapManager.SetHeight(e,r)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){var r;(function(t){const a=new Map,s=new Map;function o(e,r=!0){if(r&&!s.has(e)){const r=OSFramework.Maps.Helper.GetElementByUniqueId(e),t=OSFramework.Maps.Helper.GetClosestMarkerId(r);s.set(e,t)}return s.get(e)}t.CheckPendingEvents=function(e){for(const r of a.keys())e.equalsToID(r)&&(a.get(r).forEach((r=>{e.markerEvents.addHandler(r.event,r.cb,r.uniqueId)})),a.delete(r))},t.GetMarkerIdByEventUniqueId=o,t.Subscribe=function(e,t,a){const s={isSuccess:!0,message:"Success",code:"200"};try{const s=r.GetMarkerById(e);s.markerEvents.addHandler(t,a,e),s.refreshProviderEvents()}catch(e){s.isSuccess=!1,s.message=e.message,s.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedSubscribeMarkerEvent}return JSON.stringify(s)},t.SubscribeByUniqueId=function(e,t,s){const n=o(e),i=r.GetMarkerById(n,!1);void 0===i?a.has(n)?a.get(n).push({event:t,cb:s,uniqueId:e}):a.set(n,[{event:t,cb:s,uniqueId:e}]):i.markerEvents.addHandler(t,s,e)},t.SubscribeAll=function(r,t,a){e.MapManager.GetMapById(r).markers.forEach((e=>{e.markerEvents.addHandler(t,a,r)}))},t.Unsubscribe=function(e,t,s){const n=o(e),i=r.GetMarkerById(n,!1);if(void 0!==i)i.markerEvents.removeHandler(t,s),i.refreshProviderEvents();else if(a.has(e)){const r=a.get(e).findIndex((e=>e.event===t&&e.cb===s));-1!==r&&a.get(e).splice(r,1)}},t.UnsubscribeByMarkerId=function(e,t,a){const s={isSuccess:!0,message:"Success",code:"200"};try{const s=r.GetMarkerById(e);void 0!==s&&(s.markerEvents.removeHandler(t,a),s.refreshProviderEvents())}catch(e){s.isSuccess=!1,s.message=e.message,s.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedUnsubscribeMarkerEvent}return JSON.stringify(s)}})((r=e.MarkerManager||(e.MarkerManager={})).Events||(r.Events={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r,t;r=e.MarkerManager||(e.MarkerManager={}),(t=r.Events||(r.Events={})).CheckPendingEvents=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.Events.CheckPendingEvents()'`),OutSystems.Maps.MapAPI.MarkerManager.Events.CheckPendingEvents(e)},t.GetMarkerIdByEventUniqueId=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.Events.GetMarkerIdByEventUniqueId()'`),OutSystems.Maps.MapAPI.MarkerManager.Events.GetMarkerIdByEventUniqueId(e,r)},t.Subscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.Events.Subscribe()'`),OutSystems.Maps.MapAPI.MarkerManager.Events.Subscribe(e,r,t)},t.SubscribeByUniqueId=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.Events.SubscribeByUniqueId()'`),OutSystems.Maps.MapAPI.MarkerManager.Events.SubscribeByUniqueId(e,r,t)},t.SubscribeAll=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.Events.SubscribeAll()'`),OutSystems.Maps.MapAPI.MarkerManager.Events.SubscribeAll(e,r,t)},t.Unsubscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.Events.Unsubscribe()'`),OutSystems.Maps.MapAPI.MarkerManager.Events.Unsubscribe(e,r,t)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){!function(r){const t=new Map,a=new Array;function s(r,t=!0){let s=a.find((e=>e&&e.equalsToID(r)));if(void 0===s&&([...e.MapManager.GetMapsFromPage().values()].find((e=>(e.drawingTools&&(s=e.drawingTools.createdElements.find((e=>e&&e.equalsToID(r)))),s))),void 0===s&&t))throw new Error(`Marker id:${r} not found`);return s}r.AddMarker=function(r,s){const o={isSuccess:!0,message:"Success",code:"200"};try{const n=e.MapManager.GetMapById(r,!0),i=OSFramework.Maps.Helper.GenerateUniqueId(),p=OSFramework.Maps.Marker.MarkerFactory.MakeMarker(n,i,OSFramework.Maps.Enum.MarkerType.Marker,JSON.parse(s));a.push(p),t.set(i,n.uniqueId),n.addMarker(p),o.message=i}catch(e){o.isSuccess=!1,o.message=e.message,o.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedCreateMarker}return JSON.stringify(o)},r.ChangeProperty=function(e,r,t){const a=s(e).map;void 0!==a&&a.changeMarkerProperty(e,r,t)},r.ClosePopup=function(e){const r=s(e);r.hasPopup&&r.closePopup()},r.RefreshPopup=function(e){const r=s(e);r.hasPopup&&r.refreshPopupContent()},r.RemoveMarkerFromCluster=function(r,t){const a={isSuccess:!0,message:"Success",code:"200"};try{const s=e.MapManager.GetMapById(r,!0);if(s.providerType===OSFramework.Maps.Enum.ProviderType.Google)if(s.hasMarkerClusterer()){const e=s.markers.find((e=>e.config.location===t));void 0!==e?(s.features.markerClusterer.removeMarker(e),e.provider.setMap(s.provider)):(a.isSuccess=!1,a.message=`There are not a marker with position:'${t}' to be removed.`,a.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveMarkerFromCluster)}else a.isSuccess=!1,a.message=`Map with Id:'${r}' does not contain Marker Clustering.`,a.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveMarkerFromCluster;else a.isSuccess=!1,a.message=`Marker Clustering not available for '${s.providerType}' provider type.`,a.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveMarkerFromCluster}catch(e){a.isSuccess=!1,a.message=e.message,a.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveMarkerFromCluster}return JSON.stringify(a)},r.CreateMarker=function(r,s,o){const n=e.MapManager.GetMapById(r,!0);if(n.providerType===OSFramework.Maps.Enum.ProviderType.Google){if(n.hasMarker(s))throw new Error(`There is already a Marker registered on the specified Map under id:${s}`);{const e=Provider.Maps.Google.Marker.MarkerFactory.MakeMarker(n,s,OSFramework.Maps.Enum.MarkerType.Marker,JSON.parse(o));return a.push(e),t.set(s,n.uniqueId),n.addMarker(e),e}}throw new Error(`The provider type '${n.providerType}' does not support this operation.`)},r.CreateMarkerByUniqueID=function(s,o,n){const i=function(r){let a;if(t.has(r))a=e.MapManager.GetMapById(t.get(r),!1);else{const t=OSFramework.Maps.Helper.GetElementByUniqueId(r,!1);if(void 0!==t){const r=OSFramework.Maps.Helper.GetClosestMapId(t);a=e.MapManager.GetMapById(r)}}return a}(s);if(i.hasMarker(s))throw new Error(`There is already a Marker registered on the specified Map under id:${s}`);{const e=OSFramework.Maps.Marker.MarkerFactory.MakeMarker(i,s,o,JSON.parse(n));return a.push(e),t.set(s,i.uniqueId),i.addMarker(e),r.Events.CheckPendingEvents(e),e}},r.GetMarkerById=s,r.OpenPopup=function(e){const r=s(e);r.hasPopup&&r.openPopup()},r.RemoveMarker=function(e){const r={isSuccess:!0,message:"Success",code:"200"};try{const r=s(e).map;r&&r.removeMarker(e),t.delete(e),a.splice(a.findIndex((r=>r&&r.equalsToID(e))),1)}catch(e){r.isSuccess=!1,r.message=e.message,r.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveMarker}return JSON.stringify(r)},r.RemoveAllMarkers=function(r,s=!0){const o={isSuccess:!0,message:"Success",code:"200"};try{s&&e.MapManager.RemoveMarkers(r),t.forEach(((e,s)=>{r===e&&(t.delete(s),a.splice(a.findIndex((e=>e&&e.equalsToID(s))),1))}))}catch(e){o.isSuccess=!1,o.message=e.message,o.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveMarkers}return JSON.stringify(o)}}(e.MarkerManager||(e.MarkerManager={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.MarkerManager||(e.MarkerManager={})).ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.ChangeProperty()'`),OutSystems.Maps.MapAPI.MarkerManager.ChangeProperty(e,r,t)},r.ClosePopup=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.ClosePopup()'`),OutSystems.Maps.MapAPI.MarkerManager.ClosePopup(e)},r.RefreshPopup=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.RefreshPopup()'`),OutSystems.Maps.MapAPI.MarkerManager.RefreshPopup(e)},r.CreateMarker=function(e,r,t){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.CreateMarker()'`),OutSystems.Maps.MapAPI.MarkerManager.CreateMarker(e,r,t)},r.CreateMarkerByUniqueID=function(e,r,t){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.CreateMarkerByUniqueID()'`),OutSystems.Maps.MapAPI.MarkerManager.CreateMarkerByUniqueID(e,r,t)},r.GetMarkerById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.GetMarkerById()'`),OutSystems.Maps.MapAPI.MarkerManager.GetMarkerById(e,r)},r.OpenPopup=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.OpenPopup()'`),OutSystems.Maps.MapAPI.MarkerManager.OpenPopup(e)},r.RemoveMarker=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.MarkerManager.RemoveMarker()'`),OutSystems.Maps.MapAPI.MarkerManager.RemoveMarker(e)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){var r;(function(e){const t=new Map,a=new Map;function s(e,r=!0){if(r&&!a.has(e)){const r=OSFramework.Maps.Helper.GetElementByUniqueId(e),t=OSFramework.Maps.Helper.GetClosestShapeId(r);a.set(e,t)}return a.get(e)}e.CheckPendingEvents=function(e){for(const r of t.keys())e.equalsToID(r)&&(t.get(r).forEach((r=>{e.shapeEvents.addHandler(r.event,r.cb,r.uniqueId)})),t.delete(r))},e.GetShapeIdByEventUniqueId=s,e.Subscribe=function(e,t,a){r.GetShapeById(e).shapeEvents.addHandler(t,a,e)},e.SubscribeByEventUniqueId=function(e,a,o){const n=s(e),i=r.GetShapeById(n,!1);void 0===i?t.has(n)?t.get(n).push({event:a,cb:o,uniqueId:e}):t.set(n,[{event:a,cb:o,uniqueId:e}]):(i.shapeEvents.addHandler(a,o,e),i.refreshProviderEvents())},e.Unsubscribe=function(e,a,o){const n=s(e),i=r.GetShapeById(n);if(void 0!==i)i.shapeEvents.removeHandler(a,o),i.refreshProviderEvents();else if(t.has(e)){const r=t.get(e).findIndex((e=>e.event===a&&e.cb===o));-1!==r&&t.get(e).splice(r,1)}}})((r=e.ShapeManager||(e.ShapeManager={})).Events||(r.Events={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r,t;r=e.ShapeManager||(e.ShapeManager={}),(t=r.Events||(r.Events={})).CheckPendingEvents=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.Auxiliary.OutSystems.Maps.MapAPI.ShapeManager.Events.CheckPendingEvents()'`),OutSystems.Maps.MapAPI.ShapeManager.Events.CheckPendingEvents(e)},t.GetShapeIdByEventUniqueId=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.Events.GetShapeIdByEventUniqueId()'`),OutSystems.Maps.MapAPI.ShapeManager.Events.GetShapeIdByEventUniqueId(e,r)},t.Subscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.Events.Subscribe()'`),OutSystems.Maps.MapAPI.ShapeManager.Events.Subscribe(e,r,t)},t.SubscribeByEventUniqueId=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.Events.SubscribeByEventUniqueId()'`),OutSystems.Maps.MapAPI.ShapeManager.Events.SubscribeByEventUniqueId(e,r,t)},t.Unsubscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.Events.Unsubscribe()'`),OutSystems.Maps.MapAPI.ShapeManager.Events.Unsubscribe(e,r,t)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){!function(r){const t=new Map,a=new Array;function s(r,t=!0){let s=a.find((e=>e&&e.equalsToID(r)));if(void 0===s&&([...e.MapManager.GetMapsFromPage().values()].find((e=>s=e.drawingTools&&e.drawingTools.createdElements.find((e=>e.equalsToID(r))))),void 0===s&&t))throw new Error(`Shape id:${r} not found`);return s}r.ChangeProperty=function(e,r,t){const a=s(e).map;void 0!==a&&a.changeShapeProperty(e,r,t)},r.CreateShape=function(s,o,n){const i=function(r){let a;if(t.has(r))a=e.MapManager.GetMapById(t.get(r),!1);else{const t=OSFramework.Maps.Helper.GetElementByUniqueId(r,!1);if(void 0!==t){const r=OSFramework.Maps.Helper.GetClosestMapId(t);a=e.MapManager.GetMapById(r)}}return a}(s);if(i.hasShape(s))throw new Error(`There is already a Shape registered on the specified Map under id:${s}`);{const e=OSFramework.Maps.Shape.ShapeFactory.MakeShape(i,s,o,JSON.parse(n));return a.push(e),t.set(s,i.uniqueId),i.addShape(e),r.Events.CheckPendingEvents(e),e}},r.GetCircle=function(e){const r=s(e),t=new OSFramework.Maps.OSStructures.API.CircleProperties;return r.type===OSFramework.Maps.Enum.ShapeType.Circle?(t.Center={Lat:r.providerCenter.lat,Lng:r.providerCenter.lng},t.Radius=r.providerRadius):OSFramework.Maps.Helper.ThrowError(r.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingCircleShape),JSON.stringify(t||"")},r.GetShapeById=s,r.GetShapePath=function(e){const r=s(e),t=r.providerPath;let a=[];return void 0!==t?a=t.map((e=>({Lat:e.lat,Lng:e.lng}))):OSFramework.Maps.Helper.ThrowError(r.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapePath),JSON.stringify(a)},r.RemoveShape=function(e){const r=s(e).map;r&&r.removeShape(e),t.delete(e),a.splice(a.findIndex((r=>r&&r.equalsToID(e))),1)},r.ContainsLocation=function(r,t,a,s){const o=e.MapManager.GetMapById(r,!0).features.shape.containsLocation(r,t,a,s);return JSON.stringify(o)}}(e.ShapeManager||(e.ShapeManager={}))}(e.MapAPI||(e.MapAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.ShapeManager||(e.ShapeManager={})).ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.ChangeProperty()'`),OutSystems.Maps.MapAPI.ShapeManager.ChangeProperty(e,r,t)},r.CreateShape=function(e,r,t){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.CreateShape()'`),OutSystems.Maps.MapAPI.ShapeManager.CreateShape(e,r,t)},r.GetCircle=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.GetCircle()'`),OutSystems.Maps.MapAPI.ShapeManager.GetCircle(e)},r.GetShapeById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.GetShapeById()'`),OutSystems.Maps.MapAPI.ShapeManager.GetShapeById(e,r)},r.GetShapePath=function(e){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.GetShapePath()'`),OutSystems.Maps.MapAPI.ShapeManager.GetShapePath(e)},r.RemoveShape=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.MapAPI.ShapeManager.RemoveShape()'`),OutSystems.Maps.MapAPI.ShapeManager.RemoveShape(e)}}(MapAPI||(MapAPI={})),function(e){!function(e){!function(e){var r;(function(e){const t=new Map,a=new Map;function s(e,t=!0){if(t&&!a.has(e)){const t=OSFramework.Maps.Helper.GetElementByUniqueId(e),s=OSFramework.Maps.Helper.GetClosestSearchPlacesId(t);r.GetSearchPlacesById(s)&&a.set(e,s)}return a.get(e)}e.CheckPendingEvents=function(e){for(const r of t.keys())e.equalsToID(r)&&(t.get(r).forEach((r=>{e.searchPlacesEvents.addHandler(r.event,r.cb,r.uniqueId)})),t.delete(r))},e.GetSearchPlacesByEventUniqueId=s,e.Subscribe=function(e,a,s){const o=r.GetSearchPlacesById(e,!1);void 0===o?t.has(e)?t.get(e).push({event:a,cb:s,uniqueId:e}):t.set(e,[{event:a,cb:s,uniqueId:e}]):o.searchPlacesEvents.addHandler(a,s,e)},e.Unsubscribe=function(e,a,o){const n=s(e),i=r.GetSearchPlacesById(n,!1);if(void 0!==i)i.searchPlacesEvents.removeHandler(a,o);else if(t.has(n)){const e=t.get(n).findIndex((e=>e.event===a&&e.cb===o));-1!==e&&t.get(n).splice(e,1)}}})((r=e.SearchPlacesManager||(e.SearchPlacesManager={})).Events||(r.Events={}))}(e.PlacesAPI||(e.PlacesAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r,t;r=e.SearchPlacesManager||(e.SearchPlacesManager={}),(t=r.Events||(r.Events={})).CheckPendingEvents=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.CheckPendingEvents()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.CheckPendingEvents(e)},t.GetSearchPlacesByEventUniqueId=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.GetSearchPlacesByEventUniqueId()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.GetSearchPlacesByEventUniqueId(e,r)},t.Subscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.Subscribe()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.Subscribe(e,r,t)},t.Unsubscribe=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.Unsubscribe()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.Events.Unsubscribe(e,r,t)}}(PlacesAPI||(PlacesAPI={})),function(e){!function(e){!function(e){!function(e){const r=new Map;let t;function a(e,t=!0){let a;if(r.has(e))a=r.get(e);else for(const t of r.values())if(t.equalsToID(e)){a=t;break}if(void 0===a&&t)throw new Error(`SearchPlaces id:${e} not found`);return a}e.ChangeProperty=function(e,r,t){a(e).changeProperty(r,t)},e.CreateSearchPlaces=function(a,s){const o=Provider.Maps.Google.SearchPlaces.SearchPlacesFactory.MakeSearchPlaces(a,JSON.parse(s));if(r.has(a))throw new Error(`There is already a SearchPlaces registered under id:${a}`);return r.set(a,o),t=o,e.Events.CheckPendingEvents(o),o},e.GetActiveSearchPlaces=function(){return t},e.GetSearchPlacesById=a,e.GetSearchPlacessFromPage=function(){return r},e.InitializeSearchPlaces=function(r){const t=a(r);t.build(),e.Events.CheckPendingEvents(t)},e.RemoveSearchPlaces=function(e){const s=a(e);r.delete(s.uniqueId),t.uniqueId===s.uniqueId&&(t=Array.from(r.values()).pop()),s.dispose()}}(e.SearchPlacesManager||(e.SearchPlacesManager={}))}(e.PlacesAPI||(e.PlacesAPI={}))}(e.Maps||(e.Maps={}))}(OutSystems||(OutSystems={})),function(e){var r;(r=e.SearchPlacesManager||(e.SearchPlacesManager={})).ChangeProperty=function(e,r,t){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.ChangeProperty()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.ChangeProperty(e,r,t)},r.CreateSearchPlaces=function(e,r){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage}  'OutSystems.Maps.PlacesAPI.SearchPlacesManager.CreateSearchPlaces()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.CreateSearchPlaces(e,r)},r.GetActiveSearchPlaces=function(){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.GetActiveSearchPlaces()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.GetActiveSearchPlaces()},r.GetSearchPlacesById=function(e,r=!0){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.GetSearchPlacesById()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.GetSearchPlacesById(e,r)},r.GetSearchPlacessFromPage=function(){return OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.GetSearchPlacessFromPage()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.GetSearchPlacessFromPage()},r.InitializeSearchPlaces=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.InitializeSearchPlaces()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.InitializeSearchPlaces(e)},r.RemoveSearchPlaces=function(e){OSFramework.Maps.Helper.LogWarningMessage(`${OSFramework.Maps.Helper.warningMessage} 'OutSystems.Maps.PlacesAPI.SearchPlacesManager.RemoveSearchPlaces()'`),OutSystems.Maps.PlacesAPI.SearchPlacesManager.RemoveSearchPlaces(e)}}(PlacesAPI||(PlacesAPI={})),function(e){!function(e){(e.Google||(e.Google={})).ClustererStyle=[{width:30,height:30,className:"custom-clustericon-1"},{width:40,height:40,className:"custom-clustericon-2"},{width:50,height:50,className:"custom-clustericon-3"}]}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(r=e.Google||(e.Google={})).Style={Standard:{id:0,label:"Standard",style:"",urlStyle:""},Silver:{id:1,label:"Silver",style:"[{'elementType':'geometry','stylers':[{'color':'#f5f5f5'}]},{'elementType':'labels.icon','stylers':[{'visibility':'off'}]},{'elementType':'labels.text.fill','stylers':[{'color':'#616161'}]},{'elementType':'labels.text.stroke','stylers':[{'color':'#f5f5f5'}]},{'featureType':'administrative.land_parcel','elementType':'labels.text.fill','stylers':[{'color':'#bdbdbd'}]},{'featureType':'poi','elementType':'geometry','stylers':[{'color':'#eeeeee'}]},{'featureType':'poi','elementType':'labels.text.fill','stylers':[{'color':'#757575'}]},{'featureType':'poi.park','elementType':'geometry','stylers':[{'color':'#e5e5e5'}]},{'featureType':'poi.park','elementType':'labels.text.fill','stylers':[{'color':'#9e9e9e'}]},{'featureType':'road','elementType':'geometry','stylers':[{'color':'#ffffff'}]},{'featureType':'road.arterial','elementType':'labels.text.fill','stylers':[{'color':'#757575'}]},{'featureType':'road.highway','elementType':'geometry','stylers':[{'color':'#dadada'}]},{'featureType':'road.highway','elementType':'labels.text.fill','stylers':[{'color':'#616161'}]},{'featureType':'road.local','elementType':'labels.text.fill','stylers':[{'color':'#9e9e9e'}]},{'featureType':'transit.line','elementType':'geometry','stylers':[{'color':'#e5e5e5'}]},{'featureType':'transit.station','elementType':'geometry','stylers':[{'color':'#eeeeee'}]},{'featureType':'water','elementType':'geometry','stylers':[{'color':'#c9c9c9'}]},{'featureType':'water','elementType':'labels.text.fill','stylers':[{'color':'#9e9e9e'}]}]",urlStyle:"&style=element:geometry%7Ccolor:0xf5f5f5&style=element:labels.icon%7Cvisibility:off&style=element:labels.text.fill%7Ccolor:0x616161&style=element:labels.text.stroke%7Ccolor:0xf5f5f5&style=feature:administrative.land_parcel%7Celement:labels.text.fill%7Ccolor:0xbdbdbd&style=feature:poi%7Celement:geometry%7Ccolor:0xeeeeee&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:poi.park%7Celement:geometry%7Ccolor:0xe5e5e5&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&style=feature:road%7Celement:geometry%7Ccolor:0xffffff&style=feature:road.arterial%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:road.highway%7Celement:geometry%7Ccolor:0xdadada&style=feature:road.highway%7Celement:labels.text.fill%7Ccolor:0x616161&style=feature:road.local%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&style=feature:transit.line%7Celement:geometry%7Ccolor:0xe5e5e5&style=feature:transit.station%7Celement:geometry%7Ccolor:0xeeeeee&style=feature:water%7Celement:geometry%7Ccolor:0xc9c9c9&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x9e9e9e"},Retro:{id:2,label:"Retro",style:"[{'elementType':'geometry','stylers':[{'color':'#ebe3cd'}]},{'elementType':'labels.text.fill','stylers':[{'color':'#523735'}]},{'elementType':'labels.text.stroke','stylers':[{'color':'#f5f1e6'}]},{'featureType':'administrative','elementType':'geometry.stroke','stylers':[{'color':'#c9b2a6'}]},{'featureType':'administrative.land_parcel','elementType':'geometry.stroke','stylers':[{'color':'#dcd2be'}]},{'featureType':'administrative.land_parcel','elementType':'labels.text.fill','stylers':[{'color':'#ae9e90'}]},{'featureType':'landscape.natural','elementType':'geometry','stylers':[{'color':'#dfd2ae'}]},{'featureType':'poi','elementType':'geometry','stylers':[{'color':'#dfd2ae'}]},{'featureType':'poi','elementType':'labels.text.fill','stylers':[{'color':'#93817c'}]},{'featureType':'poi.park','elementType':'geometry.fill','stylers':[{'color':'#a5b076'}]},{'featureType':'poi.park','elementType':'labels.text.fill','stylers':[{'color':'#447530'}]},{'featureType':'road','elementType':'geometry','stylers':[{'color':'#f5f1e6'}]},{'featureType':'road.arterial','elementType':'geometry','stylers':[{'color':'#fdfcf8'}]},{'featureType':'road.highway','elementType':'geometry','stylers':[{'color':'#f8c967'}]},{'featureType':'road.highway','elementType':'geometry.stroke','stylers':[{'color':'#e9bc62'}]},{'featureType':'road.highway.controlled_access','elementType':'geometry','stylers':[{'color':'#e98d58'}]},{'featureType':'road.highway.controlled_access','elementType':'geometry.stroke','stylers':[{'color':'#db8555'}]},{'featureType':'road.local','elementType':'labels.text.fill','stylers':[{'color':'#806b63'}]},{'featureType':'transit.line','elementType':'geometry','stylers':[{'color':'#dfd2ae'}]},{'featureType':'transit.line','elementType':'labels.text.fill','stylers':[{'color':'#8f7d77'}]},{'featureType':'transit.line','elementType':'labels.text.stroke','stylers':[{'color':'#ebe3cd'}]},{'featureType':'transit.station','elementType':'geometry','stylers':[{'color':'#dfd2ae'}]},{'featureType':'water','elementType':'geometry.fill','stylers':[{'color':'#b9d3c2'}]},{'featureType':'water','elementType':'labels.text.fill','stylers':[{'color':'#92998d'}]}]",urlStyle:"&style=element:geometry%7Ccolor:0xebe3cd&style=element:labels.text.fill%7Ccolor:0x523735&style=element:labels.text.stroke%7Ccolor:0xf5f1e6&style=feature:administrative%7Celement:geometry.stroke%7Ccolor:0xc9b2a6&style=feature:administrative.land_parcel%7Celement:geometry.stroke%7Ccolor:0xdcd2be&style=feature:administrative.land_parcel%7Celement:labels.text.fill%7Ccolor:0xae9e90&style=feature:landscape.natural%7Celement:geometry%7Ccolor:0xdfd2ae&style=feature:poi%7Celement:geometry%7Ccolor:0xdfd2ae&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0x93817c&style=feature:poi.park%7Celement:geometry.fill%7Ccolor:0xa5b076&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x447530&style=feature:road%7Celement:geometry%7Ccolor:0xf5f1e6&style=feature:road.arterial%7Celement:geometry%7Ccolor:0xfdfcf8&style=feature:road.highway%7Celement:geometry%7Ccolor:0xf8c967&style=feature:road.highway%7Celement:geometry.stroke%7Ccolor:0xe9bc62&style=feature:road.highway.controlled_access%7Celement:geometry%7Ccolor:0xe98d58&style=feature:road.highway.controlled_access%7Celement:geometry.stroke%7Ccolor:0xdb8555&style=feature:road.local%7Celement:labels.text.fill%7Ccolor:0x806b63&style=feature:transit.line%7Celement:geometry%7Ccolor:0xdfd2ae&style=feature:transit.line%7Celement:labels.text.fill%7Ccolor:0x8f7d77&style=feature:transit.line%7Celement:labels.text.stroke%7Ccolor:0xebe3cd&style=feature:transit.station%7Celement:geometry%7Ccolor:0xdfd2ae&style=feature:water%7Celement:geometry.fill%7Ccolor:0xb9d3c2&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x92998d"},Dark:{id:3,label:"Dark",style:"[{'elementType':'geometry','stylers':[{'color':'#212121'}]},{'elementType':'labels.icon','stylers':[{'visibility':'off'}]},{'elementType':'labels.text.fill','stylers':[{'color':'#757575'}]},{'elementType':'labels.text.stroke','stylers':[{'color':'#212121'}]},{'featureType':'administrative','elementType':'geometry','stylers':[{'color':'#757575'}]},{'featureType':'administrative.country','elementType':'labels.text.fill','stylers':[{'color':'#9e9e9e'}]},{'featureType':'administrative.land_parcel','stylers':[{'visibility':'off'}]},{'featureType':'administrative.locality','elementType':'labels.text.fill','stylers':[{'color':'#bdbdbd'}]},{'featureType':'poi','elementType':'labels.text.fill','stylers':[{'color':'#757575'}]},{'featureType':'poi.park','elementType':'geometry','stylers':[{'color':'#181818'}]},{'featureType':'poi.park','elementType':'labels.text.fill','stylers':[{'color':'#616161'}]},{'featureType':'poi.park','elementType':'labels.text.stroke','stylers':[{'color':'#1b1b1b'}]},{'featureType':'road','elementType':'geometry.fill','stylers':[{'color':'#2c2c2c'}]},{'featureType':'road','elementType':'labels.text.fill','stylers':[{'color':'#8a8a8a'}]},{'featureType':'road.arterial','elementType':'geometry','stylers':[{'color':'#373737'}]},{'featureType':'road.highway','elementType':'geometry','stylers':[{'color':'#3c3c3c'}]},{'featureType':'road.highway.controlled_access','elementType':'geometry','stylers':[{'color':'#4e4e4e'}]},{'featureType':'road.local','elementType':'labels.text.fill','stylers':[{'color':'#616161'}]},{'featureType':'transit','elementType':'labels.text.fill','stylers':[{'color':'#757575'}]},{'featureType':'water','elementType':'geometry','stylers':[{'color':'#000000'}]},{'featureType':'water','elementType':'labels.text.fill','stylers':[{'color':'#3d3d3d'}]}]",urlStyle:"&style=element:geometry%7Ccolor:0x212121&style=element:labels.icon%7Cvisibility:off&style=element:labels.text.fill%7Ccolor:0x757575&style=element:labels.text.stroke%7Ccolor:0x212121&style=feature:administrative%7Celement:geometry%7Ccolor:0x757575&style=feature:administrative.country%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&style=feature:administrative.land_parcel%7Cvisibility:off&style=feature:administrative.locality%7Celement:labels.text.fill%7Ccolor:0xbdbdbd&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:poi.park%7Celement:geometry%7Ccolor:0x181818&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x616161&style=feature:poi.park%7Celement:labels.text.stroke%7Ccolor:0x1b1b1b&style=feature:road%7Celement:geometry.fill%7Ccolor:0x2c2c2c&style=feature:road%7Celement:labels.text.fill%7Ccolor:0x8a8a8a&style=feature:road.arterial%7Celement:geometry%7Ccolor:0x373737&style=feature:road.highway%7Celement:geometry%7Ccolor:0x3c3c3c&style=feature:road.highway.controlled_access%7Celement:geometry%7Ccolor:0x4e4e4e&style=feature:road.local%7Celement:labels.text.fill%7Ccolor:0x616161&style=feature:transit%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:water%7Celement:geometry%7Ccolor:0x000000&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x3d3d3d"},Night:{id:4,label:"Night",style:"[{'elementType':'geometry','stylers':[{'color':'#242f3e'}]},{'elementType':'labels.text.fill','stylers':[{'color':'#746855'}]},{'elementType':'labels.text.stroke','stylers':[{'color':'#242f3e'}]},{'featureType':'administrative.locality','elementType':'labels.text.fill','stylers':[{'color':'#d59563'}]},{'featureType':'poi','elementType':'labels.text.fill','stylers':[{'color':'#d59563'}]},{'featureType':'poi.park','elementType':'geometry','stylers':[{'color':'#263c3f'}]},{'featureType':'poi.park','elementType':'labels.text.fill','stylers':[{'color':'#6b9a76'}]},{'featureType':'road','elementType':'geometry','stylers':[{'color':'#38414e'}]},{'featureType':'road','elementType':'geometry.stroke','stylers':[{'color':'#212a37'}]},{'featureType':'road','elementType':'labels.text.fill','stylers':[{'color':'#9ca5b3'}]},{'featureType':'road.highway','elementType':'geometry','stylers':[{'color':'#746855'}]},{'featureType':'road.highway','elementType':'geometry.stroke','stylers':[{'color':'#1f2835'}]},{'featureType':'road.highway','elementType':'labels.text.fill','stylers':[{'color':'#f3d19c'}]},{'featureType':'transit','elementType':'geometry','stylers':[{'color':'#2f3948'}]},{'featureType':'transit.station','elementType':'labels.text.fill','stylers':[{'color':'#d59563'}]},{'featureType':'water','elementType':'geometry','stylers':[{'color':'#17263c'}]},{'featureType':'water','elementType':'labels.text.fill','stylers':[{'color':'#515c6d'}]},{'featureType':'water','elementType':'labels.text.stroke','stylers':[{'color':'#17263c'}]}]",urlStyle:"&style=element:geometry%7Ccolor:0x242f3e&style=element:labels.text.fill%7Ccolor:0x746855&style=element:labels.text.stroke%7Ccolor:0x242f3e&style=feature:administrative.locality%7Celement:labels.text.fill%7Ccolor:0xd59563&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0xd59563&style=feature:poi.park%7Celement:geometry%7Ccolor:0x263c3f&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x6b9a76&style=feature:road%7Celement:geometry%7Ccolor:0x38414e&style=feature:road%7Celement:geometry.stroke%7Ccolor:0x212a37&style=feature:road%7Celement:labels.text.fill%7Ccolor:0x9ca5b3&style=feature:road.highway%7Celement:geometry%7Ccolor:0x746855&style=feature:road.highway%7Celement:geometry.stroke%7Ccolor:0x1f2835&style=feature:road.highway%7Celement:labels.text.fill%7Ccolor:0xf3d19c&style=feature:transit%7Celement:geometry%7Ccolor:0x2f3948&style=feature:transit.station%7Celement:labels.text.fill%7Ccolor:0xd59563&style=feature:water%7Celement:geometry%7Ccolor:0x17263c&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x515c6d&style=feature:water%7Celement:labels.text.stroke%7Ccolor:0x17263c"},Aubergine:{id:5,label:"Aubergine",style:"[{'elementType':'geometry','stylers':[{'color':'#1d2c4d'}]},{'elementType':'labels.text.fill','stylers':[{'color':'#8ec3b9'}]},{'elementType':'labels.text.stroke','stylers':[{'color':'#1a3646'}]},{'featureType':'administrative.country','elementType':'geometry.stroke','stylers':[{'color':'#4b6878'}]},{'featureType':'administrative.land_parcel','elementType':'labels.text.fill','stylers':[{'color':'#64779e'}]},{'featureType':'administrative.province','elementType':'geometry.stroke','stylers':[{'color':'#4b6878'}]},{'featureType':'landscape.man_made','elementType':'geometry.stroke','stylers':[{'color':'#334e87'}]},{'featureType':'landscape.natural','elementType':'geometry','stylers':[{'color':'#023e58'}]},{'featureType':'poi','elementType':'geometry','stylers':[{'color':'#283d6a'}]},{'featureType':'poi','elementType':'labels.text.fill','stylers':[{'color':'#6f9ba5'}]},{'featureType':'poi','elementType':'labels.text.stroke','stylers':[{'color':'#1d2c4d'}]},{'featureType':'poi.park','elementType':'geometry.fill','stylers':[{'color':'#023e58'}]},{'featureType':'poi.park','elementType':'labels.text.fill','stylers':[{'color':'#3C7680'}]},{'featureType':'road','elementType':'geometry','stylers':[{'color':'#304a7d'}]},{'featureType':'road','elementType':'labels.text.fill','stylers':[{'color':'#98a5be'}]},{'featureType':'road','elementType':'labels.text.stroke','stylers':[{'color':'#1d2c4d'}]},{'featureType':'road.highway','elementType':'geometry','stylers':[{'color':'#2c6675'}]},{'featureType':'road.highway','elementType':'geometry.stroke','stylers':[{'color':'#255763'}]},{'featureType':'road.highway','elementType':'labels.text.fill','stylers':[{'color':'#b0d5ce'}]},{'featureType':'road.highway','elementType':'labels.text.stroke','stylers':[{'color':'#023e58'}]},{'featureType':'transit','elementType':'labels.text.fill','stylers':[{'color':'#98a5be'}]},{'featureType':'transit','elementType':'labels.text.stroke','stylers':[{'color':'#1d2c4d'}]},{'featureType':'transit.line','elementType':'geometry.fill','stylers':[{'color':'#283d6a'}]},{'featureType':'transit.station','elementType':'geometry','stylers':[{'color':'#3a4762'}]},{'featureType':'water','elementType':'geometry','stylers':[{'color':'#0e1626'}]},{'featureType':'water','elementType':'labels.text.fill','stylers':[{'color':'#4e6d70'}]}]",urlStyle:"&style=element:geometry%7Ccolor:0x1d2c4d&style=element:labels.text.fill%7Ccolor:0x8ec3b9&style=element:labels.text.stroke%7Ccolor:0x1a3646&style=feature:administrative.country%7Celement:geometry.stroke%7Ccolor:0x4b6878&style=feature:administrative.land_parcel%7Celement:labels.text.fill%7Ccolor:0x64779e&style=feature:administrative.province%7Celement:geometry.stroke%7Ccolor:0x4b6878&style=feature:landscape.man_made%7Celement:geometry.stroke%7Ccolor:0x334e87&style=feature:landscape.natural%7Celement:geometry%7Ccolor:0x023e58&style=feature:poi%7Celement:geometry%7Ccolor:0x283d6a&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0x6f9ba5&style=feature:poi%7Celement:labels.text.stroke%7Ccolor:0x1d2c4d&style=feature:poi.park%7Celement:geometry.fill%7Ccolor:0x023e58&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x3C7680&style=feature:road%7Celement:geometry%7Ccolor:0x304a7d&style=feature:road%7Celement:labels.text.fill%7Ccolor:0x98a5be&style=feature:road%7Celement:labels.text.stroke%7Ccolor:0x1d2c4d&style=feature:road.highway%7Celement:geometry%7Ccolor:0x2c6675&style=feature:road.highway%7Celement:geometry.stroke%7Ccolor:0x255763&style=feature:road.highway%7Celement:labels.text.fill%7Ccolor:0xb0d5ce&style=feature:road.highway%7Celement:labels.text.stroke%7Ccolor:0x023e58&style=feature:transit%7Celement:labels.text.fill%7Ccolor:0x98a5be&style=feature:transit%7Celement:labels.text.stroke%7Ccolor:0x1d2c4d&style=feature:transit.line%7Celement:geometry.fill%7Ccolor:0x283d6a&style=feature:transit.station%7Celement:geometry%7Ccolor:0x3a4762&style=feature:water%7Celement:geometry%7Ccolor:0x0e1626&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x4e6d70"}},r.GetStyleByStyleId=function(e){const t=r.Style[OSFramework.Maps.Enum.OSMap.Style[e-1]].style.replace(/'/g,'"');return""!==t?JSON.parse(t):""}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={clickable:!0,draggable:this.allowDrag};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.DrawConfig=r}((t=r.Configuration||(r.Configuration={})).DrawingTools||(t.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends e.DrawConfig{getProviderConfig(){const e=super.getProviderConfig();let r=Object.assign(Object.assign({},e),{editable:this.allowEdit,strokeColor:this.strokeColor,strokeOpacity:this.strokeOpacity,strokeWeight:this.strokeWeight});return Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),r}}e.DrawBasicShapeConfig=r}((t=r.Configuration||(r.Configuration={})).DrawingTools||(t.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends e.DrawBasicShapeConfig{getProviderConfig(){const e=super.getProviderConfig();let r=Object.assign(Object.assign({},e),{fillColor:this.fillColor,fillOpacity:this.fillOpacity});return Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),r}}e.DrawFilledShapeConfig=r}((t=r.Configuration||(r.Configuration={})).DrawingTools||(t.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends e.DrawConfig{getProviderConfig(){const e=super.getProviderConfig();return e.icon=this.iconUrl,e.iconUrl=this.iconUrl,Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.DrawMarkerConfig=r}((t=r.Configuration||(r.Configuration={})).DrawingTools||(t.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){return{position:this.position}}}e.DrawingToolsConfig=r}((t=r.Configuration||(r.Configuration={})).DrawingTools||(t.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={clickable:!0,url:this.layerUrl,preserveViewport:this.preserveViewport,suppressInfoWindows:this.suppressPopups};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.FileLayerConfig=r}((t=r.Configuration||(r.Configuration={})).FileLayer||(t.FileLayer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={points:this.points,dissipate:this.dissipateOnZoom,gradient:this.gradient,maxIntensity:this.maxIntensity,opacity:this.opacity,radius:this.radius};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.HeatmapLayerConfig=r}((t=r.Configuration||(r.Configuration={})).HeatmapLayer||(t.HeatmapLayer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){const e={draggable:this.allowDrag,icon:this.iconUrl,label:this.label,location:this.location,title:this.title};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.DeprecatedGoogleMarkerConfig=r}((t=r.Configuration||(r.Configuration={})).Marker||(t.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){const e={gmpDraggable:this.allowDrag,title:this.title};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.GoogleMarkerConfig=r}((t=r.Configuration||(r.Configuration={})).Marker||(t.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){return{}}}e.MarkerClustererConfig=r}((t=r.Configuration||(r.Configuration={})).MarkerClusterer||(t.MarkerClusterer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e=this.mapStyleId,r=this.style;!1===this.useAdvancedMarkers?e=void 0:this.style-1===OSFramework.Maps.Enum.OSMap.Style.Standard&&(r=void 0);const t={center:this.center,mapId:e,mapTypeId:this.type,styles:r,zoom:this.zoom};return Object.keys(t).forEach((e=>{void 0===t[e]&&delete t[e]})),t}}e.GoogleMapConfig=r}((t=r.Configuration||(r.Configuration={})).OSMap||(t.OSMap={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){const e={center:this.center,zoom:this.zoom,mapTypeId:this.type};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.GoogleStaticMapConfig=r}((t=r.Configuration||(r.Configuration={})).OSMap||(t.OSMap={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class t extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={bounds:this.searchArea,strictBounds:!!this.searchArea,componentRestrictions:this.countries?{country:this.countries}:void 0,types:this.searchType?[r.SearchPlaces.SearchTypes[this.searchType]]:void 0};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.SearchPlacesConfig=t}((t=r.Configuration||(r.Configuration={})).SearchPlaces||(t.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={clickable:!0,draggable:this.allowDrag,editable:this.allowEdit,strokeColor:this.strokeColor,strokeOpacity:this.strokeOpacity,strokeWeight:this.strokeWeight};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.BasicShapeConfig=r}((t=r.Configuration||(r.Configuration={})).Shape||(t.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends e.BasicShapeConfig{getProviderConfig(){const e=super.getProviderConfig();return e.fillColor=this.fillColor,e.fillOpacity=this.fillOpacity,e}}e.FilledShapeConfig=r}((t=r.Configuration||(r.Configuration={})).Shape||(t.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends e.FilledShapeConfig{getProviderConfig(){const e=super.getProviderConfig();return e.radius=this.radius,delete e.locations,e}}e.CircleShapeConfig=r}((t=r.Configuration||(r.Configuration={})).Shape||(t.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){class r extends e.FilledShapeConfig{getProviderConfig(){const e=super.getProviderConfig();return delete e.locations,e}}e.RectangleShapeConfig=r}((t=r.Configuration||(r.Configuration={})).Shape||(t.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){e.googleMapsLocalStorageVersionKey="gmVersion",e.googleMapsAuthFailure="gm_authFailure",e.googleMapsScript="google-maps-script",e.gradientHeatmapColors=["rgba(102, 255, 0, 0)","rgba(102, 255, 0, 1)","rgba(147, 255, 0, 1)","rgba(193, 255, 0, 1)","rgba(238, 255, 0, 1)","rgba(244, 227, 0, 1)","rgba(249, 198, 0, 1)","rgba(255, 170, 0, 1)","rgba(255, 113, 0, 1)","rgba(255, 57, 0, 1)","rgba(255, 0, 0, 1)"],e.googleMapsApiURL="https://maps.googleapis.com/maps/api",e.googleMapsApiMap=`${e.googleMapsApiURL}/js`,e.googleMapsApiStaticMap=`${e.googleMapsApiURL}/staticmap`,e.GoogleMapsLibraries="drawing,visualization,places,marker",e.googleMapsVersion="3.58"})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){(e.DrawingTools||(e.DrawingTools={})).Events=["circlecomplete","markercomplete","polylinecomplete","polygoncomplete","rectanglecomplete"]})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){!function(e){let r;!function(e){e.changed="animation_changed",e.click="click",e.clickable_changed="clickable_changed",e.contextmenu="contextmenu",e.cursor_changed="cursor_changed",e.dblclick="dblclick",e.drag="drag",e.dragend="dragend",e.draggable_changed="draggable_changed",e.dragstart="dragstart",e.flat_changed="flat_changed",e.icon_changed="icon_changed",e.mousedown="mousedown",e.mouseout="mouseout",e.mouseover="mouseover",e.mouseup="mouseup",e.position_changed="position_changed",e.rightclick="rightclick",e.shape_changed="shape_changed",e.title_changed="title_changed",e.visible_changed="visible_changed",e.zindex_changed="zindex_changed"}(r=e.DeprecatedProviderEventNames||(e.DeprecatedProviderEventNames={}))}(e.Marker||(e.Marker={}))})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){!function(e){let r,t;!function(e){e.click="click",e.drag="drag",e.dragend="dragend",e.dragstart="dragstart"}(r=e.ProviderEventNames||(e.ProviderEventNames={})),function(e){e.auxclick="auxclick",e.contextmenu="auxclick",e.dblclick="dblclick",e.mousedown="mousedown",e.mouseout="mouseout",e.mouseover="mouseover",e.mouseup="mouseup",e.rightclick="auxclick"}(t=e.ProviderEventNamesHtml||(e.ProviderEventNamesHtml={}))}(e.Marker||(e.Marker={}))})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){!function(e){let r;!function(e){e.bounds_changed="bounds_changed",e.center_changed="center_changed",e.click="click",e.contextmenu="contextmenu",e.dblclick="dblclick",e.drag="drag",e.dragend="dragend",e.dragstart="dragstart",e.heading_changed="heading_changed",e.idle="idle",e.maptypeid_changed="maptypeid_changed",e.mousemove="mousemove",e.mouseout="mouseout",e.mouseover="mouseover",e.projection_changed="projection_changed",e.resize="resize",e.rightclick="rightclick",e.tilesloaded="tilesloaded",e.tilt_changed="tilt_changed",e.zoom_changed="zoom_changed"}(r=e.ProviderEventNames||(e.ProviderEventNames={}))}(e.OSMap||(e.OSMap={}))})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){!function(e){let r;!function(e){e.OnPlaceSelect="place_changed"}(r=e.Events||(e.Events={}))}(e.SearchPlaces||(e.SearchPlaces={}))})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){var r;(r=e.Shape||(e.Shape={})).Events=["click","contextmenu","dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup","position_changed","rightclick","insert_at","remove_at","set_at","radius_changed","center_changed","shape_changed"],r.ProviderPolyshapeEvents=["insert_at","remove_at","set_at"],r.ProviderCircleEvents=["radius_changed","center_changed"],r.ProviderRectangleEvents=["bounds_changed"],r.ProviderSpecialEvents=["shape_changed",...r.ProviderPolyshapeEvents,...r.ProviderCircleEvents,...r.ProviderRectangleEvents]})((r=e.Google||(e.Google={})).Constants||(r.Constants={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class r extends OSFramework.Maps.DrawingTools.AbstractTool{_addCompletedEventHandler(e){const r=OSFramework.Maps.Helper.GenerateUniqueId();this.newElm=this.createElement(r,e,this.config),this.drawingTools.createdElements.push(this.newElm);const t=this.getCoordinates(),a=this.getLocation();this.triggerOnDrawingChangeEvent(r,!0,t,a),e.setMap(null)}triggerOnDrawingChangeEvent(e,r,t,a){this.drawingTools.drawingToolsEvents.trigger(OSFramework.Maps.Event.DrawingTools.DrawingToolsEventType.ProviderEvent,this.completedToolEventName,{uniqueId:e,isNewElement:r,coordinates:t,location:a})}addCompletedEvent(){this.drawingTools.provider.addListener(this.completedToolEventName,this._addCompletedEventHandler.bind(this))}build(){super.build(),this.options=this.getProviderConfig(),this.finishBuild()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];super.changeProperty(e,r),this.drawingTools.isReady&&t===OSFramework.Maps.Enum.OS_Config_Shape.allowDrag&&(this.options={draggable:r})}dispose(){super.dispose()}}e.AbstractProviderTool=r})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractProviderTool{constructor(e,r,t,a,s){super(e,r,t,a,s)}_setOnChangeEvent(e){e.shapeEvents.addHandler(OSFramework.Maps.Helper.Constants.shapeChangedEvent,((r,t,a,s)=>{const o={uniqueId:e.uniqueId,isNewElement:!1,location:JSON.stringify(s.location),coordinates:JSON.stringify(s.coordinates)};this.drawingTools.drawingToolsEvents.trigger(OSFramework.Maps.Event.DrawingTools.DrawingToolsEventType.ProviderEvent,this.completedToolEventName,o)}))}createShapeElement(e,t,a){const s=r.Shape.ShapeFactory.MakeShape(this.map,e,t,a);return this._setOnChangeEvent(s),this.map.addShape(s),s}build(){super.build()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.drawingTools.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.allowEdit:return void(this.options={editable:r});case OSFramework.Maps.Enum.OS_Config_Shape.strokeOpacity:return void(this.options={strokeOpacity:r});case OSFramework.Maps.Enum.OS_Config_Shape.strokeColor:return void(this.options={strokeColor:r});case OSFramework.Maps.Enum.OS_Config_Shape.strokeWeight:return void(this.options={strokeWeight:r});case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return void(this.options={fillOpacity:r});case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:return void(this.options={fillColor:r})}}}e.AbstractDrawShape=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class r extends e.AbstractDrawShape{constructor(e,r,t,a,s){super(e,r,t,a,s)}createConfigsElement(e,r){return this._locations=e.getPath().getArray().map((e=>`${e.lat()},${e.lng()}`)),Object.assign(Object.assign({},r),{locations:JSON.stringify(this._locations)})}getCoordinates(){const e=JSON.parse(this.newElm.config.locations),r=[];for(const t of e)r.push(t.toString().split(","));const t=r.map((e=>({Lat:e[0],Lng:e[1]})));return JSON.stringify(t)}getLocation(){return JSON.stringify(this._locations)}}e.AbstractDrawPolyshape=r})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractDrawShape{constructor(e,t,a,s,o){super(e,t,a,s,new r.Configuration.DrawingTools.DrawFilledShapeConfig(o))}_createConfigsElement(e,r){const t=e.getCenter(),a=`${t.lat()},${t.lng()}`,s=e.getRadius();return Object.assign(Object.assign({},r),{center:a,radius:s})}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingCircleCompleted}get options(){return this.drawingTools.provider.get("circleOptions")}set options(e){const r=Object.assign(Object.assign({},this.options),e);this.drawingTools.provider.setOptions({circleOptions:r})}createElement(e,r,t){const a=this._createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Circle,a)}getCoordinates(){let e=[];e=this.newElm.config.center.split(",");const r={Lat:e[0],Lng:e[1]};return JSON.stringify(r)}getLocation(){const e={location:this.newElm.config.center,radius:this.newElm.config.radius};return JSON.stringify(e)}}e.DrawCircle=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractProviderTool{constructor(e,t,a,s,o){super(e,t,a,s,new r.Configuration.DrawingTools.DrawMarkerConfig(o)),this._latLng={lat:void 0,lng:void 0}}_setOnChangeEvent(e){e.markerEvents.addHandler("dragend",(()=>{const t=r.Helper.Conversions.GetCoordinateValue(e.getPosition().lat),a=r.Helper.Conversions.GetCoordinateValue(e.getPosition().lng);this.triggerOnDrawingChangeEvent(e.uniqueId,!1,JSON.stringify({Lat:t,Lng:a}),`${t}, ${a}`)}))}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingMarkerCompleted}get options(){return this.drawingTools.provider.get("markerOptions")}set options(e){const r=Object.assign(Object.assign({},this.options),e);this.drawingTools.provider.setOptions({markerOptions:r})}createElement(e,t,a){let s;s=r.Helper.TypeChecker.IsAdvancedMarker(t)?t.position:t.getPosition();const o=r.Helper.Conversions.GetCoordinateValue(s.lat),n=r.Helper.Conversions.GetCoordinateValue(s.lng),i=`${o},${n}`;this._latLng.lat=o,this._latLng.lng=n;const p=Object.assign(Object.assign({},a),{location:i}),l=r.Marker.MarkerFactory.MakeMarker(this.map,e,OSFramework.Maps.Enum.MarkerType.Marker,p);return this._setOnChangeEvent(l),this.map.addMarker(l),l}getCoordinates(){let e=[];e=this.newElm.config.location.split(",");const r={Lat:e[0],Lng:e[1]};return JSON.stringify(r)}getLocation(){return this.newElm.config.location}build(){super.build()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Marker[e];super.changeProperty(e,r),this.drawingTools.isReady&&t===OSFramework.Maps.Enum.OS_Config_Marker.iconUrl&&(this.options={icon:r})}}e.DrawMarker=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractDrawPolyshape{constructor(e,t,a,s,o){super(e,t,a,s,new r.Configuration.DrawingTools.DrawFilledShapeConfig(o))}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingPolygonCompleted}get options(){return this.drawingTools.provider.get("polygonOptions")}set options(e){const r=Object.assign(Object.assign({},this.options),e);this.drawingTools.provider.setOptions({polygonOptions:r})}createElement(e,r,t){const a=super.createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Polygon,a)}}e.DrawPolygon=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractDrawPolyshape{constructor(e,t,a,s,o){super(e,t,a,s,new r.Configuration.DrawingTools.DrawBasicShapeConfig(o))}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingPolylineCompleted}get options(){return this.drawingTools.provider.get("polylineOptions")}set options(e){const r=Object.assign(Object.assign({},this.options),e);this.drawingTools.provider.setOptions({polylineOptions:r})}createElement(e,r,t){const a=super.createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Polyline,a)}}e.DrawPolyline=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractDrawShape{constructor(e,t,a,s,o){super(e,t,a,s,new r.Configuration.DrawingTools.DrawFilledShapeConfig(o))}_createConfigsElement(e,r){const t=e.getBounds(),a={north:t.getNorthEast().lat().toString(),south:t.getSouthWest().lat().toString(),west:t.getSouthWest().lng().toString(),east:t.getNorthEast().lng().toString()};return Object.assign(Object.assign({},r),{bounds:JSON.stringify(a)})}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingRectangleCompleted}get options(){return this.drawingTools.provider.get("rectangleOptions")}set options(e){const r=Object.assign(Object.assign({},this.options),e);this.drawingTools.provider.setOptions({rectangleOptions:r})}createElement(e,r,t){const a=this._createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Rectangle,a)}getCoordinates(){const e=JSON.parse(this.newElm.config.bounds);return JSON.stringify(e)}getLocation(){return this.newElm.config.bounds}}e.DrawRectangle=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.DrawingTools.AbstractDrawingTools{constructor(e,t,a){super(e,t,new r.Configuration.DrawingTools.DrawingToolsConfig(a))}_refreshDrawingModes(){const e=this.provider.get("drawingControlOptions");this.provider.setOptions({drawingMode:null,drawingControlOptions:Object.assign(Object.assign({},e),{drawingModes:this.tools.map((e=>e.type))})})}_refreshDrawingTools(){this._setDrawingToolsEvents(),this._refreshDrawingModes()}_setDrawingToolsEvents(){google.maps.event.clearInstanceListeners(this.provider),this.tools.forEach((e=>e.addCompletedEvent()))}get controlOptions(){return this._provider.get("drawingControlOptions")}set controlOptions(e){const r=Object.assign(Object.assign({},this.controlOptions),e);this._provider.setOptions({drawingControlOptions:r})}get providerEvents(){return r.Constants.DrawingTools.Events}addTool(e){return super.addTool(e),this.isReady&&(e.build(),this._refreshDrawingTools()),e}build(){super.build();const e=this.getProviderConfig();this._provider=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!0,drawingControlOptions:{position:parseInt(google.maps.ControlPosition[e.position]),drawingModes:this.tools.map((e=>OSFramework.Maps.Enum.DrawingToolsTypes[e.type]))},polylineOptions:{},markerOptions:{}}),this._provider.setMap(this.map.provider),this.tools.forEach((e=>e.build())),this._refreshDrawingTools(),this.finishBuild()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_DrawingTools[e];super.changeProperty(e,r),this.isReady&&t===OSFramework.Maps.Enum.OS_Config_DrawingTools.position&&(this.controlOptions={position:parseInt(google.maps.ControlPosition[r])})}dispose(){this.isReady&&this.provider.set("map",null),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setDrawingToolsEvents()}removeTool(e){super.removeTool(e),this._refreshDrawingTools()}}e.DrawingTools=t})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeDrawingTools=function(r,t,a){return new e.DrawingTools(r,t,a)},r.MakeTool=function(r,t,a,s,o){switch(s){case OSFramework.Maps.Enum.DrawingToolsTypes.Marker:return new e.DrawMarker(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Polyline:return new e.DrawPolyline(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Polygon:return new e.DrawPolygon(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Circle:return new e.DrawCircle(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Rectangle:return new e.DrawRectangle(r,t,a,s,o);default:throw new Error(`There is no factory for this type of DrawingTool (${s})`)}}}(r=e.DrawingToolsFactory||(e.DrawingToolsFactory={}))})((r=e.Google||(e.Google={})).DrawingTools||(r.DrawingTools={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).Center=class{constructor(e,r){this._map=e,this._initialCenter=r}build(){}getCenter(){return this._initialCenter}getCurrentCenter(){return this._currentCenter}getMapCenter(){const e={isSuccess:!0,message:OSFramework.Maps.Enum.Success.message,code:OSFramework.Maps.Enum.Success.code};try{const r={message:OSFramework.Maps.Enum.Success.message,lat:this._map.provider.getCenter().lat(),lng:this._map.provider.getCenter().lng()};e.message=JSON.stringify(r)}catch(r){e.isSuccess=!1,e.message=r.message,e.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingCenterCoordinates}return e}refreshCenter(e){const r=new google.maps.LatLng(e.lat,e.lng);this._map.provider.setCenter(r),this._currentCenter=r.toJSON()}setCurrentCenter(e){this._currentCenter=e}updateCenter(e){r.Helper.Conversions.ConvertToCoordinates(e).then((e=>{this._map.config.center=e,this._initialCenter=e,this._map.refresh(!0)})).catch((e=>{this._map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this._map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMap,`${e}`)}))}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).Directions=class{constructor(e){this._map=e,this._isEnabled=!1}_waypointsCleanup(e){return e.reduce(((e,r)=>(e.push({location:r,stopover:!0}),e)),[])}get isEnabled(){return this._isEnabled}build(){this._directionsRenderer=new google.maps.DirectionsRenderer({preserveViewport:!0}),this._directionsService=new google.maps.DirectionsService,this._directionsRenderer.setMap(this._map.provider),this.setState(this._isEnabled)}dispose(){this.setState(!1),this._directionsService=void 0,this._directionsRenderer=void 0}getLegsFromDirection(){return!1===this._isEnabled?[]:this._directionsRenderer.getDirections().routes[0].legs.reduce(((e,r)=>(e.push({origin:r.start_location.toJSON(),destination:r.end_location.toJSON(),distance:r.distance.value,duration:r.duration.value}),e)),[])}getTotalDistanceFromDirection(){return new Promise((e=>{!1===this._isEnabled&&e(0),e(this._directionsRenderer.getDirections().routes[0].legs.reduce(((e,r)=>e+r.distance.value),0))}))}getTotalDurationFromDirection(){return new Promise((e=>{!1===this._isEnabled&&e(0),e(this._directionsRenderer.getDirections().routes[0].legs.reduce(((e,r)=>e+r.duration.value),0))}))}removeRoute(){return this.setState(!1),null===this._directionsRenderer.getMap()?{isSuccess:!0}:{code:OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveDirections}}setPlugin(e,r){OSFramework.Maps.Helper.ThrowError(this._map,OSFramework.Maps.Enum.ErrorCodes.GEN_NoPluginDirectionsNeeded)}setRoute(e){const r=this._waypointsCleanup(e.waypoints);return this._directionsService.route({origin:{query:e.originRoute},destination:{query:e.destinationRoute},waypoints:r,optimizeWaypoints:e.optimizeWaypoints,travelMode:e.travelMode,avoidTolls:e.exclude.avoidTolls,avoidHighways:e.exclude.avoidHighways,avoidFerries:e.exclude.avoidFerries},((e,r)=>{"OK"===r&&this._directionsRenderer.setDirections(e)})).then((()=>(this.setState(!0),{isSuccess:!0}))).catch((e=>(this.setState(!1),{code:OSFramework.Maps.Enum.ErrorCodes.LIB_FailedSetDirections,message:`${e}`})))}setState(e){this._directionsRenderer.setMap(!0===e?this._map.provider:null),this._isEnabled=e}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class r{constructor(e){this._map=e,this._featureList=[],this._features=new OSFramework.Maps.Feature.ExposedFeatures}_instanceOfIDisposable(e){return"dispose"in e}_makeItem(e,...r){const t=new e(this._map,...r);return this._featureList.push(t),t}get features(){return this._features}build(){this._featureList.forEach((e=>e.build()))}dispose(){this._featureList.forEach((e=>{this._instanceOfIDisposable(e)&&e.dispose(),e=void 0}))}}e.AbstractFactoryBuilder=r,e.FeatureBuilder=class extends r{_makeCenter(r){return this._features.center=this._makeItem(e.Center,r),this}_makeDirections(){return this._features.directions=this._makeItem(e.Directions),this}_makeInfoWindow(){return this._features.infoWindow=this._makeItem(e.InfoWindow),this}_makeMarkerClusterer(r){return this._features.markerClusterer=this._makeItem(e.GoogleMarkerClusterer,r),this}_makeOffset(r){return this._features.offset=this._makeItem(e.Offset,r),this}_makeShape(){return this._features.shape=this._makeItem(e.Shape),this}_makeTrafficLayer(r){return this._features.trafficLayer=this._makeItem(e.TrafficLayer,r),this}_makeZoom(r){return this._features.zoom=this._makeItem(e.Zoom,r),this}build(){const e=this._map.config;this._makeShape(),this._makeTrafficLayer(e.showTraffic)._makeZoom(e.zoom)._makeCenter(e.center)._makeDirections()._makeOffset(e.offset)._makeMarkerClusterer(e.markerClusterer)._makeInfoWindow(),super.build()}}})((r=e.Google||(e.Google={})).Feature||(r.Feature={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).GoogleMarkerClusterer=class{constructor(e,t){this._map=e,this._config=new r.Configuration.MarkerClusterer.MarkerClustererConfig(t)}get markerClusterer(){return this._markerClusterer}get isEnabled(){return this._config.markerClustererActive&&void 0!==this._markerClusterer}_makeAlgorithm(){this._algorithm=new window.markerClusterer.SuperClusterAlgorithm({maxZoom:this._config.markerClustererMaxZoom,minPoints:this._config.markerClustererMinClusterSize})}_makeConfigs(){const e=this._config.getProviderConfig();return this._config.markerClustererActive&&(e.algorithm=this._algorithm,e.algorithmOptions=void 0,e.map=this._map.provider,e.markers=this._map.markersReady,e.onClusterClick=this._zoomClickHandler.bind(this),e.renderer=this._makeRenderer()),e}_makeRenderer(){return void 0===this._renderer&&(this._renderer=new window.markerClusterer.DefaultRenderer),this._renderer}_rebuildClusters(){this._markerClusterer.clearMarkers(),this._markerClusterer=void 0,this._markerClusterer=new window.markerClusterer.MarkerClusterer(this._makeConfigs())}_setState(){this._config.markerClustererActive?this._rebuildClusters():(this._markerClusterer.clearMarkers(),this._map.markers.forEach((e=>{const t=e.provider;r.Helper.TypeChecker.IsAdvancedMarker(t)?t.map=this._map.provider:t.setMap(this._map.provider)})))}_zoomClickHandler(e,r,t){this._config.markerClustererZoomOnClick&&t.fitBounds(r.bounds)}addMarker(e){this.isEnabled&&e.isReady&&this._markerClusterer.addMarker(e.provider,!1)}build(){this._makeRenderer(),this._makeAlgorithm(),this._markerClusterer=new window.markerClusterer.MarkerClusterer(this._makeConfigs()),this._repaintOnTilesLoaded=google.maps.event.addListenerOnce(this._map.provider,"tilesloaded",this.repaint.bind(this))}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_MarkerClusterer[e];if(this._config.hasOwnProperty(e)?this._config[e]=r:this._map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this._map,OSFramework.Maps.Enum.ErrorCodes.GEN_InvalidChangePropertyMarkerClusterer,`${e}`),void 0!==this.markerClusterer){switch(t){case OSFramework.Maps.Enum.OS_Config_MarkerClusterer.markerClustererActive:this._setState();break;case OSFramework.Maps.Enum.OS_Config_MarkerClusterer.markerClustererMinClusterSize:case OSFramework.Maps.Enum.OS_Config_MarkerClusterer.markerClustererMaxZoom:this._makeAlgorithm(),this._rebuildClusters();break;case OSFramework.Maps.Enum.OS_Config_MarkerClusterer.markerClustererZoomOnClick:return}this.repaint()}}dispose(){this._markerClusterer=void 0,google.maps.event.removeListener(this._repaintOnTilesLoaded)}removeMarker(e){var r;this.isEnabled&&e.isReady&&(null===(r=this._markerClusterer)||void 0===r||r.removeMarker(e.provider,!1))}repaint(){this._markerClusterer.render()}setClusterRenderer(e){this._renderer=e,this.isEnabled&&this._rebuildClusters()}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).InfoWindow=class{constructor(e){this._map=e}build(){this._infoWindow=new google.maps.InfoWindow({content:""}),this._popupIsOpened=!1,this._infoWindow.addListener("closeclick",this.closePopup.bind(this))}closePopup(){this._popupIsOpened&&(this._infoWindow.close(),this._popupIsOpened=!1)}openPopup(e){!0===this._popupIsOpened&&this.closePopup(),this._infoWindow.open(this._map.provider,e.provider),this._popupIsOpened=!0}setPopupContent(e){this._infoWindow.setContent(e)}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).Offset=class{constructor(e,r){this._map=e,this._offset=r||{offsetX:0,offsetY:0}}get getOffset(){return this._offset}build(){}setOffset(e){this._offset={offsetX:e.offsetX||0,offsetY:e.offsetY||0},this._map.provider.panTo(this._map.features.center.getCurrentCenter()),this._map.provider.panBy(this._offset.offsetX,this._offset.offsetY)}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).Shape=class{_checkCircleContainsMarker(){const e=this._shape.provider.getRadius(),r=this._shape.provider.getCenter(),t=google.maps.geometry.spherical.computeDistanceBetween(this._markerCoordinates,r);this._isInsideShape=t<=e,this._updateReturnMessage()}_checkContainsMarker(){this._isInsideShape=google.maps.geometry.poly.containsLocation(this._markerCoordinates,this._map.getShape(this._shape.widgetId).provider),this._updateReturnMessage()}_checkRectangleContainsMarker(){this._isInsideShape=this._map.getShape(this._shape.widgetId).provider.getBounds().contains(this._markerCoordinates),this._updateReturnMessage()}_updateReturnMessage(){this._returnObjSuccess=!0,this._returnObjCode=OSFramework.Maps.Enum.Success.code,this._returnObjMessage=this._isInsideShape.toString()}build(){}containsLocation(e,r,t,a){if(this._map=OutSystems.Maps.MapAPI.MapManager.GetMapById(e),this._returnObjSuccess=!1,this._returnObjCode=OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidMapId,this._map)if(this._isInsideShape=!1,this._markerCoordinates=JSON.parse(t),this._markerCoordinates=new google.maps.LatLng(this._markerCoordinates.Lat,this._markerCoordinates.Lng),r)switch(this._shape=OutSystems.Maps.MapAPI.ShapeManager.GetShapeById(r),this._shape.type){case OSFramework.Maps.Enum.ShapeType.Polyline:this._returnObjCode=OSFramework.Maps.Enum.Unsupported.code,this._returnObjMessage=OSFramework.Maps.Enum.Unsupported.message;break;case OSFramework.Maps.Enum.ShapeType.Rectangle:this._checkRectangleContainsMarker();break;case OSFramework.Maps.Enum.ShapeType.Circle:this._checkCircleContainsMarker();break;default:this._checkContainsMarker()}else{const e=JSON.parse(a.toLowerCase());if(e.length>=3){const r=new google.maps.Polygon({paths:e});r.setMap(null),this._isInsideShape=google.maps.geometry.poly.containsLocation(this._markerCoordinates,r),this._updateReturnMessage()}}return{isSuccess:this._returnObjSuccess,code:this._returnObjCode,message:this._returnObjMessage}}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).TrafficLayer=class{constructor(e,r){this._map=e,this._enabled=r}get isEnabled(){return this._enabled}build(){this._trafficLayer=new google.maps.TrafficLayer,this.setState(this._enabled)}dispose(){this._trafficLayer=void 0}setState(e){this._trafficLayer.setMap(!0===e?this._map.provider:null),this._enabled=e}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;((r=e.Google||(e.Google={})).Feature||(r.Feature={})).Zoom=class{constructor(e,r){this._map=e,this._level=r}_setAutofit(e){this._autofitEnabled=e}_setBounds(e){const t=new google.maps.LatLngBounds;this._map.markers.forEach((function(e){void 0!==e.provider&&(r.Helper.TypeChecker.IsAdvancedMarker(e.provider)?t.extend(e.provider.position.toJSON()):t.extend(e.provider.getPosition().toJSON()))})),e&&this._map.shapes.forEach((function(e){void 0!==e.provider&&t.union(e.providerBounds)})),this._map.provider.fitBounds(t),this._map.provider.panToBounds(t),this._map.features.center.setCurrentCenter(this._map.provider.getCenter())}build(){this._setAutofit(this._level===OSFramework.Maps.Enum.OSMap.Zoom.Auto)}get isAutofit(){return this._autofitEnabled}get level(){return this._level}refreshZoom(){this._map.features.zoom.isAutofit?this._map.markers.length>1||this._map.shapes.length>0&&!0===this._map.config.autoZoomOnShapes?this._setBounds(this._map.config.autoZoomOnShapes):this._map.provider.setZoom(OSFramework.Maps.Helper.Constants.zoomAutofit):this._map.provider.setZoom(this._map.features.zoom.level)}setLevel(e){this._level=e,this._setAutofit(e===OSFramework.Maps.Enum.OSMap.Zoom.Auto),this._map.refresh()}}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeFileLayer=function(r,t,a){return new e.FileLayer(r,t,a)}}(r=e.FileLayerFactory||(e.FileLayerFactory={}))})((r=e.Google||(e.Google={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.FileLayer.AbstractFileLayer{constructor(e,t,a){super(e,t,new r.Configuration.FileLayer.FileLayerConfig(a))}_setFileLayerEvents(){google.maps.event.clearInstanceListeners(this.provider),this.fileLayerEvents.hasHandlers(OSFramework.Maps.Event.FileLayer.FileLayersEventType.OnClick)&&this.provider.get("clickable")&&this.provider.addListener("click",(e=>{const r={coordinates:JSON.stringify({Lat:e.latLng.lat(),Lng:e.latLng.lng()}),featureData:JSON.stringify(e.featureData)};this.fileLayerEvents.trigger(OSFramework.Maps.Event.FileLayer.FileLayersEventType.OnClick,void 0,r)}))}build(){super.build(),this._provider=new google.maps.KmlLayer(Object.assign(Object.assign({},this.getProviderConfig()),{map:this.map.provider})),this._setFileLayerEvents(),this.finishBuild()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_FileLayer[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_FileLayer.layerUrl:return this.provider.setOptions({url:r});case OSFramework.Maps.Enum.OS_Config_FileLayer.preserveViewport:return this.provider.setOptions({preserveViewport:r});case OSFramework.Maps.Enum.OS_Config_FileLayer.suppressPopups:return this.provider.setOptions({suppressInfoWindows:r})}}dispose(){this.isReady&&this.provider.set("map",null),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setFileLayerEvents()}}e.FileLayer=t})((r=e.Google||(e.Google={})).FileLayer||(r.FileLayer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeHeatmapLayer=function(r,t,a){return new e.HeatmapLayer(r,t,a)}}(r=e.HeatmapLayerFactory||(e.HeatmapLayerFactory={}))})((r=e.Google||(e.Google={})).HeatmapLayer||(r.HeatmapLayer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.HeatmapLayer.AbstractHeatmapLayer{constructor(e,t,a){super(e,t,new r.Configuration.HeatmapLayer.HeatmapLayerConfig(a))}_gradientColors(e){return 0===e.length?r.Constants.gradientHeatmapColors:e}_pointsToData(e){return e.map((e=>void 0===e.Weight?new google.maps.LatLng(e.Lat,e.Lng):{location:new google.maps.LatLng(e.Lat,e.Lng),weight:e.Weight}))}build(){super.build();const e=this.getProviderConfig();this._provider=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},e),{data:this._pointsToData(e.points),gradient:this._gradientColors(e.gradient),map:this.map.provider})),this.finishBuild()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_HeatmapLayer[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_HeatmapLayer.points:return this.provider.setData(this._pointsToData(JSON.parse(r)));case OSFramework.Maps.Enum.OS_Config_HeatmapLayer.dissipateOnZoom:return this.provider.setOptions({dissipating:r});case OSFramework.Maps.Enum.OS_Config_HeatmapLayer.gradient:return this.provider.setOptions({gradient:this._gradientColors(JSON.parse(r))});case OSFramework.Maps.Enum.OS_Config_HeatmapLayer.maxIntensity:return this.provider.setOptions({maxIntensity:r});case OSFramework.Maps.Enum.OS_Config_HeatmapLayer.opacity:return this.provider.setOptions({opacity:r});case OSFramework.Maps.Enum.OS_Config_HeatmapLayer.radius:return this.provider.setOptions({radius:r})}}dispose(){this.isReady&&this.provider.set("map",null),this._provider=void 0,super.dispose()}}e.HeatmapLayer=t})((r=e.Google||(e.Google={})).HeatmapLayer||(r.HeatmapLayer={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),function(e){const r=function(e){const r=new google.maps.Geocoder;return new Promise(((t,a)=>{r.geocode({address:e},((r,s)=>{if(s===google.maps.GeocoderStatus.OK){const e=r[0].geometry.location;t({lat:e.lat(),lng:e.lng()})}else s===google.maps.GeocoderStatus.ZERO_RESULTS?(console.warn(`No results have been found for address "${e}".`),a("No results have been found.")):s===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?a("Google Maps API call limit exceeded. Please wait a few moments and try again"):a(s)}))}))};e.ConvertToCoordinates=function(e){if(void 0===e||0===e.trim().length)return console.warn("Invalid location. Using the default location -> 55 Thomson Pl 2nd floor, Boston, MA 02210, United States"),new Promise((e=>{e(OSFramework.Maps.Helper.Constants.defaultMapCenter)}));if(/^-{0,1}\d*\.{0,1}\d*,( )?-{0,1}\d*\.{0,1}\d*$/.test(e)){let t,a;return e.indexOf(",")>-1?(t=parseFloat(e.split(",")[0].replace(" ","")),a=parseFloat(e.split(",")[1].replace(" ","")),new Promise((e=>{e({lat:t,lng:a})}))):r(e)}return r(e)},e.GetCoordinateValue=function(e){return"function"==typeof e?e():e}}((t=r.Helper||(r.Helper={})).Conversions||(t.Conversions={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r,t;r=e.Google||(e.Google={}),((t=r.Helper||(r.Helper={})).TypeChecker||(t.TypeChecker={})).IsAdvancedMarker=function(e){return e instanceof google.maps.marker.AdvancedMarkerElement}}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.Marker.AbstractMarker{constructor(e,t,a,s){super(e,t,a,new r.Configuration.Marker.DeprecatedGoogleMarkerConfig(s)),this._addedEvents=[]}_setIcon(e){if(""===e)this.provider.setIcon(null);else try{let r,t;const a=Number(this.config.iconHeight),s=Number(this.config.iconWidth);OSFramework.Maps.Helper.IsValidNumber(a)&&OSFramework.Maps.Helper.IsValidNumber(s)&&a>0&&s>0&&(r=new google.maps.Point(s/2,a),t=new google.maps.Size(s,a));const o={url:e,scaledSize:t,anchor:r,origin:new google.maps.Point(0,0)};this.provider.setIcon(o)}catch(e){console.error(e)}}_setIconSize(){this._setIcon(this.config.iconUrl)}_buildMarkerPosition(){const e={};if(void 0!==this.config.location)return new Promise(((t,a)=>{r.Helper.Conversions.ConvertToCoordinates(this.config.location).then((r=>{e.position={lat:r.lat,lng:r.lng},t(e)})).catch((e=>a(e)))}));this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMarker,"Location of the Marker can't be empty.")}_setMarkerEvents(){this._addedEvents.forEach(((e,r)=>{google.maps.event.clearListeners(this.provider,e),this._addedEvents.splice(r,1)})),this.markerEvents.hasHandlers(OSFramework.Maps.Event.Marker.MarkerEventType.OnClick)&&(this._addedEvents.push("click"),this._provider.addListener("click",(e=>{const r=new OSFramework.Maps.OSStructures.OSMap.OSCoordinates(e.latLng.lat(),e.latLng.lng());this.markerEvents.trigger(OSFramework.Maps.Event.Marker.MarkerEventType.OnClick,OSFramework.Maps.Event.Marker.MarkerEventType.OnClick,JSON.stringify(r))}))),this.markerEvents.handlers.forEach(((e,t)=>{e instanceof OSFramework.Maps.Event.Marker.MarkerProviderEvent&&(this._addedEvents.push(t),this._provider.addListener(r.Constants.Marker.DeprecatedProviderEventNames[t],(e=>{this.markerEvents.trigger(OSFramework.Maps.Event.Marker.MarkerEventType.ProviderEvent,t,void 0!==e?JSON.stringify({Lat:e.latLng.lat(),Lng:e.latLng.lng()}):void 0)})))}))}get hasEvents(){return void 0!==this.markerEvents}get markerTag(){return OSFramework.Maps.Helper.Constants.markerTag}build(){super.build();const e=this._buildMarkerPosition();void 0!==e&&(this.map.cancelScheduledResfresh(),e.then((e=>{this._destroyed||(this._provider=new google.maps.Marker(Object.assign(Object.assign(Object.assign({},this.getProviderConfig()),e),{map:this.map.provider})),this._setIconSize(),this._setMarkerEvents(),this.finishBuild(),this.map.scheduleRefresh())})).catch((e=>{this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMarker,`${e}`)})))}changeProperty(e,t){const a=OSFramework.Maps.Enum.OS_Config_Marker[e];if(super.changeProperty(e,t),this.isReady)switch(a){case OSFramework.Maps.Enum.OS_Config_Marker.location:return void r.Helper.Conversions.ConvertToCoordinates(t).then((e=>{this._provider.setPosition({lat:e.lat,lng:e.lng}),this.map.refresh()})).catch((e=>{this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMarker,`${e}`)}));case OSFramework.Maps.Enum.OS_Config_Marker.allowDrag:return this._provider.setDraggable(t);case OSFramework.Maps.Enum.OS_Config_Marker.iconHeight:case OSFramework.Maps.Enum.OS_Config_Marker.iconWidth:return void this._setIconSize();case OSFramework.Maps.Enum.OS_Config_Marker.iconUrl:return void this._setIcon(t);case OSFramework.Maps.Enum.OS_Config_Marker.label:return this._provider.setLabel(t);case OSFramework.Maps.Enum.OS_Config_Marker.title:return this._provider.setTitle(t)}}dispose(){this.isReady&&this._provider.setMap(null),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setMarkerEvents()}validateProviderEvent(e){return void 0!==r.Constants.Marker.DeprecatedProviderEventNames[e]}}e.DeprecatedMarker=t})((r=e.Google||(e.Google={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class r extends e.DeprecatedMarker{_setMarkerEvents(){super._setMarkerEvents(),this._provider.addListener("click",(()=>{this.refreshPopupContent(),this.openPopup()}))}get hasPopup(){return!0}get markerTag(){return OSFramework.Maps.Helper.Constants.markerPopupTag}closePopup(){this.map.features.infoWindow.closePopup()}openPopup(){this.refreshPopupContent(),this.map.features.infoWindow.openPopup(this)}refreshPopupContent(){this._contentString=OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(OSFramework.Maps.Helper.Constants.markerPopup).innerHTML,this.map.features.infoWindow.setPopupContent(this._contentString)}}e.DeprecatedMarkerPopup=r})((r=e.Google||(e.Google={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeMarker=function(r,t,a,s){const o=r.useAdvancedMarkers;let n;switch(a){case OSFramework.Maps.Enum.MarkerType.Marker:n=o?e.Marker:e.DeprecatedMarker;break;case OSFramework.Maps.Enum.MarkerType.MarkerPopup:n=o?e.MarkerPopup:e.DeprecatedMarkerPopup;break;default:throw new Error(`There is no factory for this type of Marker (${a})`)}return new n(r,t,a,s)}}(r=e.MarkerFactory||(e.MarkerFactory={}))})((r=e.Google||(e.Google={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.Marker.AbstractMarker{constructor(e,t,a,s){super(e,t,a,new r.Configuration.Marker.GoogleMarkerConfig(s)),this._addedEvents=[]}_setIcon(){if(""!==this.config.label||""!==this.config.iconUrl)try{const e=this.config.iconHeight,r=this.config.iconWidth,t=document.createElement("div");if(t.className="os-marker-icon",""!==this.config.iconUrl){const a=document.createElement("img");if(a.src=this.config.iconUrl,e>0&&r>0&&(a.height=e,a.width=r),t.append(a),""!==this.config.label){const e=document.createElement("div");e.className="os-marker-icon-label",e.textContent=this.config.label,t.appendChild(e)}this._provider.content=t}else{t.textContent=this.config.label;const e=new google.maps.marker.PinElement({glyph:t});this._provider.content=e.element}}catch(e){console.error(e)}else this._provider.content=void 0}_triggerEvent(e,t,a,s){const o=new OSFramework.Maps.OSStructures.OSMap.OSCoordinates(r.Helper.Conversions.GetCoordinateValue(a),r.Helper.Conversions.GetCoordinateValue(s));this.markerEvents.trigger(e,t,JSON.stringify(o))}_buildMarkerPosition(){const e={};if(void 0!==this.config.location)return new Promise(((t,a)=>{r.Helper.Conversions.ConvertToCoordinates(this.config.location).then((r=>{e.position={lat:r.lat,lng:r.lng},t(e)})).catch((e=>a(e)))}));this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMarker,"Location of the Marker can't be empty.")}_setMarkerEvents(){this._addedEvents.forEach(((e,r)=>{google.maps.event.clearListeners(this.provider,e),this._addedEvents.splice(r,1)})),this.markerEvents.hasHandlers(OSFramework.Maps.Event.Marker.MarkerEventType.OnClick)&&(this._addedEvents.push("click"),this._provider.addListener("click",(e=>{this._triggerEvent(OSFramework.Maps.Event.Marker.MarkerEventType.OnClick,OSFramework.Maps.Event.Marker.MarkerEventType.OnClick,e.latLng.lat,e.latLng.lng)}))),this.markerEvents.handlers.forEach(((e,t)=>{if(e instanceof OSFramework.Maps.Event.Marker.MarkerProviderEvent){const e=r.Constants.Marker.ProviderEventNames[t];if(void 0!==e)this._addedEvents.push(t),this._provider.addListener(e,(e=>{this._triggerEvent(OSFramework.Maps.Event.Marker.MarkerEventType.ProviderEvent,t,e.latLng.lat,e.latLng.lng)}));else{const e=r.Constants.Marker.ProviderEventNamesHtml[t];void 0!==e?(this._addedEvents.push(t),this._provider.element.addEventListener(e,(()=>{this._triggerEvent(OSFramework.Maps.Event.Marker.MarkerEventType.ProviderEvent,t,this._provider.position.lat,this.provider.position.lng)}))):console.error(`Event ${t} is not a valid event for the Marker.`)}}}))}get hasEvents(){return void 0!==this.markerEvents}get markerTag(){return OSFramework.Maps.Helper.Constants.markerTag}build(){super.build();const e=this._buildMarkerPosition();void 0!==e&&(this.map.cancelScheduledResfresh(),e.then((e=>{this._destroyed||(this._provider=new google.maps.marker.AdvancedMarkerElement(Object.assign(Object.assign({},this.getProviderConfig()),{position:e.position,map:this.map.provider})),this._setIcon(),this._setMarkerEvents(),this.finishBuild(),this.map.scheduleRefresh())})).catch((e=>{this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMarker,`${e}`)})))}changeProperty(e,t){const a=OSFramework.Maps.Enum.OS_Config_Marker[e];if(super.changeProperty(e,t),this.isReady)switch(a){case OSFramework.Maps.Enum.OS_Config_Marker.location:return void r.Helper.Conversions.ConvertToCoordinates(t).then((e=>{this._provider.position={lat:e.lat,lng:e.lng},this.map.refresh()})).catch((e=>{this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingMarker,`${e}`)}));case OSFramework.Maps.Enum.OS_Config_Marker.allowDrag:this._provider.gmpDraggable=t;break;case OSFramework.Maps.Enum.OS_Config_Marker.iconHeight:case OSFramework.Maps.Enum.OS_Config_Marker.iconWidth:case OSFramework.Maps.Enum.OS_Config_Marker.iconUrl:case OSFramework.Maps.Enum.OS_Config_Marker.label:this._setIcon();break;case OSFramework.Maps.Enum.OS_Config_Marker.title:this._provider.title=t}}dispose(){this.isReady&&(this._provider.map=void 0),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setMarkerEvents()}validateProviderEvent(e){return void 0!==r.Constants.Marker.ProviderEventNames[e]||void 0!==r.Constants.Marker.ProviderEventNamesHtml[e]}}e.Marker=t})((r=e.Google||(e.Google={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class r extends e.Marker{_setMarkerEvents(){super._setMarkerEvents(),this._provider.addListener("click",(()=>{this.refreshPopupContent(),this.openPopup()}))}get hasPopup(){return!0}get markerTag(){return OSFramework.Maps.Helper.Constants.markerPopupTag}closePopup(){this.map.features.infoWindow.closePopup()}openPopup(){this.refreshPopupContent(),this.map.features.infoWindow.openPopup(this)}refreshPopupContent(){this._contentString=OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(OSFramework.Maps.Helper.Constants.markerPopup).innerHTML,this.map.features.infoWindow.setPopupContent(this._contentString)}}e.MarkerPopup=r})((r=e.Google||(e.Google={})).Marker||(r.Marker={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeMap=function(r,t,a){switch(r){case OSFramework.Maps.Enum.MapType.Map:return new e.Map(t,a);case OSFramework.Maps.Enum.MapType.StaticMap:return new e.StaticMap(t,a);default:throw new Error(`There is no factory for this type of Map (${r})`)}}}(r=e.MapFactory||(e.MapFactory={}))})((r=e.Google||(e.Google={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.OSMap.AbstractMap{constructor(e,t){super(e,OSFramework.Maps.Enum.ProviderType.Google,new r.Configuration.OSMap.GoogleMapConfig(t),OSFramework.Maps.Enum.MapType.Map),this._addedEvents=[],this._scriptCallback=this._createGoogleMap.bind(this),this._gZoomChangeListener=void 0}_addMapZoomHandler(){setTimeout((()=>{this&&this._provider&&void 0===this._gZoomChangeListener&&(this._gZoomChangeListener=google.maps.event.addListener(this._provider,r.Constants.OSMap.ProviderEventNames.zoom_changed,this._mapZoomChangeCallback))}),100)}_buildDrawingTools(){this.drawingTools&&this.drawingTools.build()}_buildFileLayers(){this.fileLayers.forEach((e=>e.build()))}_buildHeatmapLayers(){this.heatmapLayers.forEach((e=>e.build()))}_buildMarkers(){this.markers.forEach((e=>e.build()))}_buildShapes(){this.shapes.forEach((e=>e.build()))}_createGoogleMap(){const e=document.getElementById(r.Constants.googleMapsScript),t=/key=(.*)&libraries/.exec(e.src)[1];if(this.config.apiKey!==t)return OSFramework.Maps.Helper.ThrowError(this,OSFramework.Maps.Enum.ErrorCodes.CFG_APIKeyDiffersFromPlacesToMaps);if("object"!=typeof google||"object"!=typeof google.maps)throw Error("The google.maps lib has not been loaded.");{const e=this.config.center;this._provider=new google.maps.Map(OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(OSFramework.Maps.Helper.Constants.runtimeMapUniqueIdCss),this._getProviderConfig()),window[r.Constants.googleMapsAuthFailure]=()=>this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.LIB_InvalidApiKeyMap),this.buildFeatures(),this._buildMarkers(),this._buildShapes(),this._buildDrawingTools(),this._buildFileLayers(),this._buildHeatmapLayers(),this.finishBuild(),this.features.center.updateCenter(e),this._provider.setOptions(Object.assign({styles:r.GetStyleByStyleId(this.config.style)},this._advancedFormatObj)),this._setMapEvents(this._advancedFormatObj.mapEvents),this._addMapZoomHandler()}}_getProviderConfig(){return this.config.center=OSFramework.Maps.Helper.Constants.defaultMapCenter,this.config.useAdvancedMarkers&&(this.config.mapStyleId||(this.config.mapStyleId=this.uniqueId)),this._advancedFormatObj=OSFramework.Maps.Helper.JsonFormatter(this.config.advancedFormat),this.config.getProviderConfig()}_removeMapZoomHandler(){this._gZoomChangeListener&&(google.maps.event.removeListener(this._gZoomChangeListener),this._gZoomChangeListener=void 0)}_setMapEvents(e){r.SharedComponents.RemoveEventsFromProvider(this),this.mapEvents.hasHandlers(OSFramework.Maps.Event.OSMap.MapEventType.OnEventTriggered)&&void 0!==e&&e.forEach((e=>{this._addedEvents.push(e),this._provider.addListener(e,(()=>{this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnEventTriggered,this,e)}))})),this.mapEvents.handlers.forEach(((e,t)=>{e instanceof OSFramework.Maps.Event.OSMap.MapProviderEvent&&(this._addedEvents.push(t),this._provider.addListener(r.Constants.OSMap.ProviderEventNames[t],(e=>{this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.ProviderEvent,this,t,void 0!==e?JSON.stringify(new OSFramework.Maps.OSStructures.OSMap.OSCoordinates(e.latLng.lat(),e.latLng.lng())):void 0)})))}))}get addedEvents(){return this._addedEvents}get mapTag(){return OSFramework.Maps.Helper.Constants.mapTag}get useAdvancedMarkers(){return this.config.useAdvancedMarkers}addDrawingTools(e){return super.addDrawingTools(e),this.isReady&&e.build(),e}addFileLayer(e){return super.addFileLayer(e),this.isReady&&e.build(),e}addHeatmapLayer(e){return super.addHeatmapLayer(e),this.isReady&&e.build(),e}addMarker(e){return super.addMarker(e),this.isReady&&e.build(),e}addShape(e){return super.addShape(e),this.isReady&&e.build(),e}build(){super.build(),r.SharedComponents.InitializeScripts(this.config.apiKey,this.config.localization,this._scriptCallback)}buildFeatures(){this._fBuilder=new r.Feature.FeatureBuilder(this),this._features=this._fBuilder.features,this._fBuilder.build()}changeDrawingToolsProperty(e,r,t){const a=this.drawingTools;void 0===a||a.uniqueId!==e?console.error(`changeDrawingToolsProperty - drawingToold id:${e} not found.`):a.changeProperty(r,t)}changeFileLayerProperty(e,r,t){const a=this.getFileLayer(e);a?a.changeProperty(r,t):console.error(`changeFileLayerProperty - fileLayer id:${e} not found.`)}changeHeatmapLayerProperty(e,r,t){const a=this.getHeatmapLayer(e);a?a.changeProperty(r,t):console.error(`changeHeatmapLayerProperty - heatmapLayer id:${e} not found.`)}changeMarkerProperty(e,r,t){const a=this.getMarker(e);a?a.changeProperty(r,t):console.error(`changeMarkerProperty - marker id:${e} not found.`)}changeProperty(e,t){const a=OSFramework.Maps.Enum.OS_Config_Map[e];if(OSFramework.Maps.Enum.OS_Config_Map.useAdvancedMarkers!==a&&super.changeProperty(e,t),this.isReady)switch(a){case OSFramework.Maps.Enum.OS_Config_Map.apiKey:""!==this.config.apiKey&&this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_APIKeyAlreadySetMap);break;case OSFramework.Maps.Enum.OS_Config_Map.center:this.features.center.updateCenter(t);break;case OSFramework.Maps.Enum.OS_Config_Map.offset:this.features.offset.setOffset(JSON.parse(t));break;case OSFramework.Maps.Enum.OS_Config_Map.localization:this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_LocalizationAlreadySetMap);break;case OSFramework.Maps.Enum.OS_Config_Map.zoom:this.features.zoom.setLevel(t);break;case OSFramework.Maps.Enum.OS_Config_Map.type:this._provider.setMapTypeId(t);break;case OSFramework.Maps.Enum.OS_Config_Map.style:this._provider.setOptions({styles:r.GetStyleByStyleId(t)});break;case OSFramework.Maps.Enum.OS_Config_Map.advancedFormat:t=OSFramework.Maps.Helper.JsonFormatter(t),this._setMapEvents(t.mapEvents),this._provider.setOptions(t);break;case OSFramework.Maps.Enum.OS_Config_Map.showTraffic:this.features.trafficLayer.setState(t);break;case OSFramework.Maps.Enum.OS_Config_Map.markerClustererActive:case OSFramework.Maps.Enum.OS_Config_Map.markerClustererMaxZoom:case OSFramework.Maps.Enum.OS_Config_Map.markerClustererMinClusterSize:case OSFramework.Maps.Enum.OS_Config_Map.markerClustererZoomOnClick:this.features.markerClusterer.changeProperty(e,t);break;case OSFramework.Maps.Enum.OS_Config_Map.useAdvancedMarkers:this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.GEN_InvalidChangePropertyUseAdvancedMarkers)}}changeShapeProperty(e,r,t){const a=this.getShape(e);a?a.changeProperty(r,t):console.error(`changeShapeProperty - shape id:${e} not found.`)}dispose(){super.dispose(),this._fBuilder&&this._fBuilder.dispose(),this._provider=void 0}refresh(e){this._removeMapZoomHandler();let r=this.features.center.getCenter();const t=r.lat===OSFramework.Maps.Helper.Constants.defaultMapCenter.lat&&r.lng===OSFramework.Maps.Helper.Constants.defaultMapCenter.lng;if(this.markers.length>0){const a=this.markers[0].provider;this.markers.length>1?this.allowRefreshZoom?void 0!==a&&(t||this.features.zoom.isAutofit)&&(r=a.position.toJSON()):r=e?this.config.center:this.provider.getCenter().toJSON():void 0!==a&&(r=a.position.toJSON())}this.features.center.refreshCenter(r),this.allowRefreshZoom&&this.features.zoom.refreshZoom(),this.features.offset.setOffset(this.features.offset.getOffset),this.hasMarkerClusterer()&&this.features.markerClusterer.repaint(),this._addMapZoomHandler()}refreshProviderEvents(){this.isReady&&this._setMapEvents()}setClusterRenderer(e){this.isReady&&this.features.markerClusterer.setClusterRenderer(e)}validateProviderEvent(e){return void 0!==r.Constants.OSMap.ProviderEventNames[e]}}e.Map=t})((r=e.Google||(e.Google={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.OSMap.AbstractMap{constructor(e,t){super(e,OSFramework.Maps.Enum.ProviderType.Google,new r.Configuration.OSMap.GoogleStaticMapConfig(t),OSFramework.Maps.Enum.MapType.StaticMap)}_getCenter(e){let r=void 0===e?this.config.center:e;return this.markers.length>=1&&(r=this.markers[0].config.location),r}_getMarkers(){return this.markers.reduce(((e,r)=>(""!==r.config.iconUrl?e+="&markers=icon:"+encodeURIComponent(r.config.iconUrl)+"%7C"+encodeURIComponent(r.config.location.replace(/[^.,\-a-zA-Z0-9 ]/g,"")):e+="&markers="+encodeURIComponent(r.config.location.replace(/[^.,\-a-zA-Z0-9 ]/g,"")),e)),"")}_getSize(){const e=OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId),r=e.offsetWidth,t=e.offsetHeight;return{width:Math.round(r/2),height:Math.round(t/2)}}_getZoom(e){return void 0===e&&(e=this.config.zoom),e===OSFramework.Maps.Enum.OSMap.Zoom.Auto?this.markers.length>0?-1:OSFramework.Maps.Enum.OSMap.Zoom.Zoom8:e}_renderImage(){const e=OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(OSFramework.Maps.Helper.Constants.staticMapCss);e.src=`${r.Constants.googleMapsApiStaticMap}?key=`+this.config.apiKey+"&center="+this._center+this._markerString+"&maptype="+this._type+(this._zoom>-1?"&zoom="+this._zoom:"")+"&scale=2&size="+this._size.width+"x"+this._size.height+(""!==this.config.localization.language?`&language=${this.config.localization.language}`:"")+(""!==this.config.localization.region?`&region=${this.config.localization.region}`:""),e.onerror=()=>{this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.LIB_InvalidApiKeyStaticMap),e.alt="Image could not be loaded due to invalid APIKey."}}get addedEvents(){throw new Error("StaticMap provider has no events")}get mapTag(){return OSFramework.Maps.Helper.Constants.staticMapTag}get useAdvancedMarkers(){return this.config.useAdvancedMarkers}addMarker(e){if(!this.isReady)return super.addMarker(e),e;this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}build(){super.build(),this._center=this._getCenter(),this._zoom=this._getZoom(),this._markerString=this._getMarkers(),this._size=this._getSize(),this._type=this.config.type,this._renderImage(),this.finishBuild()}changeDrawingToolsProperty(e,r,t){this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}changeFileLayerProperty(e,r,t){this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}changeHeatmapLayerProperty(e,r,t){this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}changeMarkerProperty(e,r,t){this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}changeProperty(e,r){if(this.isReady)this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap);else switch(OSFramework.Maps.Enum.OS_Config_StaticMap[e]){case OSFramework.Maps.Enum.OS_Config_StaticMap.apiKey:return""!==this.config.apiKey&&this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_APIKeyAlreadySetStaticMap),super.changeProperty(e,r);case OSFramework.Maps.Enum.OS_Config_StaticMap.center:return void(this._center=this._getCenter(r));case OSFramework.Maps.Enum.OS_Config_StaticMap.zoom:return void(this._zoom=this._getZoom(r));case OSFramework.Maps.Enum.OS_Config_StaticMap.type:return void(this._type=r);default:return void this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}}changeShapeProperty(e,r,t){this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_CantChangeParamsStaticMap)}dispose(){super.dispose()}refresh(){throw new Error("Refresh method can't be used on a StaticMap")}refreshProviderEvents(){throw new Error("Refresh Provider Events method can't be used on a StaticMap because Static Maps don't have events.")}validateProviderEvent(e){throw new Error("StaticMap provider has no supported events")}}e.StaticMap=t})((r=e.Google||(e.Google={})).OSMap||(r.OSMap={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeSearchPlaces=function(r,t){return new e.SearchPlaces(r,t)}}(r=e.SearchPlacesFactory||(e.SearchPlacesFactory={}))})((r=e.Google||(e.Google={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(r){var t;(function(r){class a extends OSFramework.Maps.SearchPlaces.AbstractSearchPlaces{constructor(e,r){super(e,new t.Configuration.SearchPlaces.SearchPlacesConfig(r)),this._addedEvents=[],this._scriptCallback=this._createGooglePlaces.bind(this)}_buildSearchArea(e){const r=JSON.parse(e);if(!OSFramework.Maps.Helper.HasAllEmptyBounds(r))return this._convertStringToBounds(r)}_convertStringToBounds(e){return t.SharedComponents.ConvertStringToBounds(e,this.config.apiKey,(()=>{this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidSearchPlacesSearchArea)}))}_createGooglePlaces(){const e=document.getElementById(t.Constants.googleMapsScript),r=/key=(.*)&libraries/.exec(e.src)[1];if(this.config.apiKey!==r)return this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_APIKeyDiffersFromPlacesToMaps);if("object"!=typeof google||"object"!=typeof google.maps)throw Error("The google.maps lib has not been loaded.");{const e=this.getProviderConfig();if(!1===OSFramework.Maps.Helper.HasAllEmptyBounds(e.bounds)){const r=this._convertStringToBounds(e.bounds);this._validCountriesMaxLength(this.config.countries)&&void 0!==r&&r.then((r=>{e.bounds=r,this._createProvider(e)})).catch((e=>{this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingSearchAreaLocations,void 0,`${e}`)}))}else delete e.bounds,this._createProvider(e)}}_createProvider(e){const r=OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(`${OSFramework.Maps.Helper.Constants.runtimeSearchPlacesUniqueIdCss} input`);!1!==this._validInput(r)&&(this._provider=new google.maps.places.Autocomplete(r,e),window[t.Constants.googleMapsAuthFailure]=()=>{this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.LIB_InvalidApiKeySearchPlaces)},this.finishBuild(),this._setSearchPlacesEvents())}_setSearchPlacesEvents(){t.SharedComponents.RemoveEventsFromProvider(this),this.searchPlacesEvents.hasHandlers(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnPlaceSelect)&&(this._addedEvents.push(t.Constants.SearchPlaces.Events.OnPlaceSelect),this._provider.addListener(t.Constants.SearchPlaces.Events.OnPlaceSelect,(()=>{const e=this._provider.getPlace(),r={name:e.name,coordinates:JSON.stringify({Lat:e.geometry.location.lat(),Lng:e.geometry.location.lng()}),address:e.formatted_address};e.geometry&&this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnPlaceSelect,this,t.Constants.SearchPlaces.Events.OnPlaceSelect,r)})))}_validCountriesMaxLength(e){return!(e.length>5&&(this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_MaximumCountriesNumber),1))}_validInput(e){return void 0!==e||(this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidInputSearchPlaces),!1)}get addedEvents(){return this._addedEvents}build(){super.build(),t.SharedComponents.InitializeScripts(this.config.apiKey,this.config.localization,this._scriptCallback)}changeProperty(r,t){if(super.changeProperty(r,t),this.isReady)switch(OSFramework.Maps.Enum.OS_Config_SearchPlaces[r]){case OSFramework.Maps.Enum.OS_Config_SearchPlaces.apiKey:return void(""!==this.config.apiKey&&this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_APIKeyAlreadySetSearchPlaces));case OSFramework.Maps.Enum.OS_Config_SearchPlaces.localization:return void this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_LocalizationAlreadySetMap);case OSFramework.Maps.Enum.OS_Config_SearchPlaces.searchArea:const r=this._buildSearchArea(t);return void(void 0!==r?r.then((e=>{this.provider.setBounds(e),this.provider.set("strictBounds",!0)})).catch((e=>{this.searchPlacesEvents.trigger(OSFramework.Maps.Event.SearchPlaces.SearchPlacesEventType.OnError,this,OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidSearchPlacesSearchArea,void 0,`${e}`)})):(this.provider.set("bounds",null),this.provider.set("strictBounds",!1)));case OSFramework.Maps.Enum.OS_Config_SearchPlaces.countries:const a=JSON.parse(t);return this._validCountriesMaxLength(a)&&this.provider.setComponentRestrictions({country:a});case OSFramework.Maps.Enum.OS_Config_SearchPlaces.searchType:return this.provider.setTypes([e.Maps.Google.SearchPlaces.SearchTypes[t]])}}dispose(){this._provider=void 0,super.dispose()}}r.SearchPlaces=a})((t=r.Google||(r.Google={})).SearchPlaces||(t.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(e){e.Addresses="address",e.Cities="(cities)",e.Establishments="establishment",e.Geocodes="geocode",e.Regions="(regions)"}(r=e.SearchTypes||(e.SearchTypes={}))})((r=e.Google||(e.Google={})).SearchPlaces||(r.SearchPlaces={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends OSFramework.Maps.Shape.AbstractShape{_resetShapeEvents(){this._addedEvents.forEach(((e,r)=>{google.maps.event.clearListeners(this.provider,e),this._addedEvents.splice(r,1)}))}_buildProvider(e){void 0!==e&&e.then((e=>{this._provider=this._createProvider(e),this._setShapeEvents(),this.finishBuild(),this.map.refresh()})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)}))}_setShapeEvents(){this._resetShapeEvents(),this.shapeEvents.hasHandlers(OSFramework.Maps.Event.Shape.ShapeEventType.OnClick)&&this.provider.get("clickable")&&this.provider.addListener("click",(()=>{this.shapeEvents.trigger(OSFramework.Maps.Event.Shape.ShapeEventType.OnClick)})),this.shapeEvents.handlers.forEach(((e,t)=>{e instanceof OSFramework.Maps.Event.Shape.ShapeProviderEvent&&(t===OSFramework.Maps.Helper.Constants.shapeChangedEvent?(this._addedEvents.push(t),this.providerEventsList.forEach((e=>this.providerObjectListener.addListener(e,(()=>{this._shapeChangedEventTimeout&&clearTimeout(this._shapeChangedEventTimeout),this._shapeChangedEventTimeout=setTimeout(this.triggerShapeChangedEvent.bind(this),500)}))))):-1!==r.Constants.Shape.ProviderSpecialEvents.indexOf(t)?(this._addedEvents.push(t),this.providerObjectListener.addListener(t,(()=>{this.shapeEvents.trigger(OSFramework.Maps.Event.Shape.ShapeEventType.ProviderEvent,t)}))):(this._addedEvents.push(t),this.provider.addListener(t,(()=>{this.shapeEvents.trigger(OSFramework.Maps.Event.Shape.ShapeEventType.ProviderEvent,t)}))))}))}get hasEvents(){return void 0!==this.shapeEvents}get provider(){return this._provider}get shapeProviderEvents(){return r.Constants.Shape.Events}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.allowDrag:return this.provider.set("draggable",r);case OSFramework.Maps.Enum.OS_Config_Shape.allowEdit:return this.provider.set("editable",r);case OSFramework.Maps.Enum.OS_Config_Shape.strokeOpacity:return this.provider.set("strokeOpacity",r);case OSFramework.Maps.Enum.OS_Config_Shape.strokeColor:return this.provider.set("strokeColor",r);case OSFramework.Maps.Enum.OS_Config_Shape.strokeWeight:return this.provider.set("strokeWeight",r)}}dispose(){this.isReady&&this.provider.set("map",null),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setShapeEvents()}}e.AbstractProviderShape=t})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractProviderShape{_buildPath(e){if(this._validateLocations(e)){const t=JSON.parse(e);return new Promise(((e,a)=>{const s=new Map;t.every(((o,n)=>OSFramework.Maps.Helper.IsEmptyString(o)?(OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode),!1):(r.Helper.Conversions.ConvertToCoordinates(o).then((r=>{s.set(n,{lat:r.lat,lng:r.lng}),s.size===t.length&&e(Array.from(s.keys()).sort(((e,r)=>e-r)).map((e=>s.get(e))))})).catch((e=>a(e))),!0)))}))}}_validateLocations(e){return!(OSFramework.Maps.Helper.IsEmptyString(e)||JSON.parse(e).length<this.minPath)||(OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode),!1)}_setProviderPath(e){this._provider.setPath(e)}get providerBounds(){const e=new google.maps.LatLngBounds;return this.providerPath.forEach((function(r){e.extend(new google.maps.LatLng(r.lat,r.lng))})),e}get providerEventsList(){return r.Constants.Shape.ProviderPolyshapeEvents}get providerObjectListener(){return this.provider.getPath()}get providerPath(){const e=this.provider.getPath();return void 0===e?(OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapePath),[]):e.getArray().map((e=>e.toJSON()))}build(){super.build();const e=this._buildPath(this.config.locations);this._buildProvider(e)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.locations:const t=this._buildPath(r);return void(void 0!==t&&t.then((e=>{this._setProviderPath(e)})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)})));case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return this.provider.set(e,r)}}}e.AbstractPolyshape=t})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractProviderShape{constructor(e,t,a,s){super(e,t,a,new r.Configuration.Shape.CircleShapeConfig(s))}_buildCenter(e){if(!OSFramework.Maps.Helper.IsEmptyString(e))return new Promise(((t,a)=>{r.Helper.Conversions.ConvertToCoordinates(e).then((e=>{const r={lat:e.lat,lng:e.lng};t(r)})).catch((e=>a(e)))}));OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode)}_changeCenter(e){const r=this._buildCenter(e);void 0!==r&&r.then((e=>{this.provider.setCenter(e)})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)}))}_createProvider(e){return new google.maps.Circle(Object.assign({map:this.map.provider,center:e},this.getProviderConfig()))}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidCircleShapeCenter}getShapeCoordinates(){return{coordinates:{Lat:this.providerCenter.lat,Lng:this.providerCenter.lng},location:{location:`${this.providerCenter.lat.toString()},${this.providerCenter.lng.toString()}`,radius:this.providerRadius}}}get providerBounds(){return this.provider.getBounds()}get providerCenter(){const e=this.provider.get("center");return void 0===e&&OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapeCenter),e.toJSON()}get providerEventsList(){return r.Constants.Shape.ProviderCircleEvents}get providerObjectListener(){return this.provider}get providerRadius(){const e=this.provider.get("radius");return void 0===e&&OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapeRadius),e}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapeCircleTag}build(){super.build();const e=this._buildCenter(this.config.center);super._buildProvider(e)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.center:return void this._changeCenter(r);case OSFramework.Maps.Enum.OS_Config_Shape.radius:return this.provider.setRadius(r);case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return this.provider.set(e,r)}}}e.Circle=t})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let r;!function(r){r.MakeShape=function(r,t,a,s){switch(a){case OSFramework.Maps.Enum.ShapeType.Polygon:return new e.Polygon(r,t,a,s);case OSFramework.Maps.Enum.ShapeType.Polyline:return new e.Polyline(r,t,a,s);case OSFramework.Maps.Enum.ShapeType.Circle:return new e.Circle(r,t,a,s);case OSFramework.Maps.Enum.ShapeType.Rectangle:return new e.Rectangle(r,t,a,s);default:throw new Error(`There is no factory for this type of Shape (${a})`)}}}(r=e.ShapeFactory||(e.ShapeFactory={}))})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractPolyshape{constructor(e,t,a,s){super(e,t,a,new r.Configuration.Shape.FilledShapeConfig(s))}_createProvider(e){return new google.maps.Polygon(Object.assign({map:this.map.provider,paths:e},this.getProviderConfig()))}getShapeCoordinates(){return{location:this.providerObjectPath.getArray().map((e=>`${e.lat()},${e.lng()}`)),coordinates:this.providerObjectPath.getArray().map((e=>({Lat:e.lat(),Lng:e.lng()})))}}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidPolygonShapeLocations}get providerObjectPath(){return this.provider.getPath()}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapePolygonTag}}e.Polygon=t})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractPolyshape{constructor(e,t,a,s){super(e,t,a,new r.Configuration.Shape.BasicShapeConfig(s))}_createProvider(e){return new google.maps.Polyline(Object.assign({map:this.map.provider,path:e},this.getProviderConfig()))}getShapeCoordinates(){return{location:this.providerObjectPath.getArray().map((e=>`${e.lat()},${e.lng()}`)),coordinates:this.providerObjectPath.getArray().map((e=>({Lat:e.lat(),Lng:e.lng()})))}}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidPolylineShapeLocations}get providerObjectPath(){return this.provider.getPath()}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapePolylineTag}}e.Polyline=t})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){class t extends e.AbstractProviderShape{constructor(e,t,a,s){super(e,t,a,new r.Configuration.Shape.RectangleShapeConfig(s))}_buildBounds(e){const r=JSON.parse(e);if(!OSFramework.Maps.Helper.HasAnyEmptyBound(r))return this._convertStringToBounds(r);OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode)}_convertStringToBounds(e){const t=["north","south","east","west"];return new Promise(((a,s)=>{let o=0;const n=new OSFramework.Maps.OSStructures.OSMap.Bounds;t.forEach((t=>{/^-{0,1}\d*\.{0,1}\d*$/.test(e[t])?(o++,n[t]=parseFloat(e[t]),4===o&&a(n)):r.Helper.Conversions.ConvertToCoordinates(e[t]).then((e=>{switch(o++,t){case"north":case"south":n[t]=e.lat;break;default:n[t]=e.lng}4===o&&a(n)})).catch((e=>s(e)))}))}))}_createProvider(e){return new google.maps.Rectangle(Object.assign({map:this.map.provider,bounds:e},this.getProviderConfig()))}getShapeCoordinates(){const e={north:this.bounds.north,south:this.bounds.south,west:this.bounds.west,east:this.bounds.east};return{location:e,coordinates:e}}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidRectangleShapeBounds}get bounds(){const e=this.providerBounds,r=new OSFramework.Maps.OSStructures.OSMap.Bounds;return r.east=e.getNorthEast().lng(),r.north=e.getNorthEast().lat(),r.west=e.getSouthWest().lng(),r.south=e.getSouthWest().lat(),r}get providerBounds(){return this.provider.getBounds()}get providerEventsList(){return r.Constants.Shape.ProviderRectangleEvents}get providerObjectListener(){return this.provider}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapeRectangleTag}build(){super.build();const e=this._buildBounds(this.config.bounds);super._buildProvider(e)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return this.provider.set(e,r);case OSFramework.Maps.Enum.OS_Config_Shape.bounds:const t=this._buildBounds(r);return void(void 0!==t&&t.then((e=>{this.provider.setBounds(e)})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)})))}}}e.Rectangle=t})((r=e.Google||(e.Google={})).Shape||(r.Shape={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){var r;(function(e){let t;e.InitializeScripts=function(e,a,s){"object"==typeof google&&"object"==typeof google.maps?s():(void 0===t&&(t=new Promise((s=>{window.GMCB=()=>{window.GMCB=void 0,s(0),t=void 0};const o=document.createElement("script");o.src=`${r.Constants.googleMapsApiMap}?key=${e}&libraries=${r.Constants.GoogleMapsLibraries}&v=${r.Version.Get()}&loading=async&callback=GMCB`+(""!==a.language?`&language=${a.language}`:"")+(""!==a.region?`&region=${a.region}`:""),o.async=!0,o.defer=!0,o.id=r.Constants.googleMapsScript,document.head.appendChild(o)}))),t.then(s))},e.RemoveEventsFromProvider=function(e){e.addedEvents.forEach(((r,t)=>{google.maps.event.clearListeners(e.provider,r),e.addedEvents.splice(t,1)}))},e.ConvertStringToBounds=function(e,t,a){if(OSFramework.Maps.Helper.HasAnyEmptyBound(e))return void a();const s=["north","south","east","west"];return new Promise(((t,a)=>{let o=0;const n=new OSFramework.Maps.OSStructures.OSMap.Bounds;s.forEach((s=>{/^-{0,1}\d*\.{0,1}\d*$/.test(e[s])?(o++,n[s]=parseFloat(e[s]),4===o&&t(n)):r.Helper.Conversions.ConvertToCoordinates(e[s]).then((e=>{switch(o++,s){case"north":case"south":n[s]=e.lat;break;default:n[s]=e.lng}4===o&&t(n)})).catch((e=>a(e)))}))}))}})((r=e.Google||(e.Google={})).SharedComponents||(r.SharedComponents={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(r){var t;(function(r){function a(){let e;if(window.google&&window.google.maps&&window.google.maps.version){const r=window.google.maps.version,t=r.lastIndexOf(".");e=r.substring(0,t)}return e}r.Change=function(e){const r=OSFramework.Maps.Helper.LocalStorage.GetItem(t.Constants.googleMapsLocalStorageVersionKey)||t.Constants.googleMapsVersion,s=a(),o=r!==e&&e!==s;return OSFramework.Maps.Helper.LocalStorage.SetItem(t.Constants.googleMapsLocalStorageVersionKey,e),o},r.Get=function(){let r=OSFramework.Maps.Helper.LocalStorage.GetItem(t.Constants.googleMapsLocalStorageVersionKey)||e.Maps.Google.Constants.googleMapsVersion;const s=a();return void 0!==s&&r!==s&&(OSFramework.Maps.Helper.LogWarningMessage(`Current version of Google Maps loaded is '${s}', but on the next page refresh the version will tentatively be '${r}'.`),r=s),r}})((t=r.Google||(r.Google={})).Version||(t.Version={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={repeatMode:!1};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.DrawConfig=r})((r=e.Configuration||(e.Configuration={})).DrawingTools||(r.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends e.DrawConfig{getProviderConfig(){const e=super.getProviderConfig();let r=Object.assign(Object.assign({},e),{shapeOptions:{color:this.strokeColor,opacity:this.strokeOpacity,weight:this.strokeWeight}});return Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),r}}e.DrawBasicShapeConfig=r})((r=e.Configuration||(e.Configuration={})).DrawingTools||(r.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends e.DrawBasicShapeConfig{getProviderConfig(){let e=super.getProviderConfig();return e.shapeOptions.fillColor=this.fillColor,e.shapeOptions.fillOpacity=this.fillOpacity,Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.DrawFilledShapeConfig=r})((r=e.Configuration||(e.Configuration={})).DrawingTools||(r.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends e.DrawConfig{}e.DrawMarkerConfig=r})((r=e.Configuration||(e.Configuration={})).DrawingTools||(r.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){return{position:this.position}}}e.DrawingToolsConfig=r})((r=e.Configuration||(e.Configuration={})).DrawingTools||(r.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){const e={draggable:this.allowDrag,title:this.title};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.LeafletMarkerConfig=r})((r=e.Configuration||(e.Configuration={})).Marker||(r.Marker={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){let e={center:this.center,zoom:this.zoom,editable:!0};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.LeafletMapConfig=r})((r=e.Configuration||(e.Configuration={})).OSMap||(r.OSMap={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends OSFramework.Maps.Configuration.AbstractConfiguration{getProviderConfig(){const e={draggable:!0,editable:!1,opacity:this.strokeOpacity,color:this.strokeColor,weight:this.strokeWeight};return Object.keys(e).forEach((r=>{void 0===e[r]&&delete e[r]})),e}}e.BasicShapeConfig=r})((r=e.Configuration||(e.Configuration={})).Shape||(r.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends e.BasicShapeConfig{getProviderConfig(){const e=super.getProviderConfig();return e.fillColor=this.fillColor,e.fillOpacity=this.fillOpacity,e}}e.FilledShapeConfig=r})((r=e.Configuration||(e.Configuration={})).Shape||(r.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends e.FilledShapeConfig{getProviderConfig(){const e=super.getProviderConfig();return e.radius=this.radius,delete e.locations,e}}e.CircleShapeConfig=r})((r=e.Configuration||(e.Configuration={})).Shape||(r.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(function(e){class r extends e.FilledShapeConfig{getProviderConfig(){const e=super.getProviderConfig();return delete e.locations,e}}e.RectangleShapeConfig=r})((r=e.Configuration||(e.Configuration={})).Shape||(r.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){e.leafletVersion="1.9.4",e.drawingLeafletCompleted="draw:created",e.openStreetMapTileLayer={url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){!function(e){let r;!function(e){e.routesfound="routesfound"}(r=e.Events||(e.Events={}))}(e.Directions||(e.Directions={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),Provider_1=Provider||(Provider={}),Maps=Provider_1.Maps||(Provider_1.Maps={}),Leaflet=Maps.Leaflet||(Maps.Leaflet={}),Constants=Leaflet.Constants||(Leaflet.Constants={}),function(e){let r;!function(e){e.OSRM="osrmv1",e.MapBox="mapbox",e.GraphHopper="graphHopper"}(r=e.Provider||(e.Provider={}))}(Constants.Directions||(Constants.Directions={})),function(e){!function(e){!function(e){!function(e){var r;(function(e){let r;!function(e){e.DRIVING="car",e.BICYCLING="bike",e.WALKING="foot"}(r=e.TravelModes||(e.TravelModes={}))})((r=e.Directions||(e.Directions={})).OSRM||(r.OSRM={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){var r;(function(e){let r;!function(e){e.DRIVING="mapbox/driving",e.BICYCLING="mapbox/cycling",e.WALKING="mapbox/walking"}(r=e.TravelModes||(e.TravelModes={}))})((r=e.Directions||(e.Directions={})).MapBox||(r.MapBox={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){var r;(function(e){let r;!function(e){e.DRIVING="car",e.BICYCLING="bike",e.WALKING="foot"}(r=e.TravelModes||(e.TravelModes={}))})((r=e.Directions||(e.Directions={})).GraphHopper||(r.GraphHopper={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){var r;(function(e){let r;!function(e){e.DRIVING="car",e.BICYCLING="bicycle",e.WALKING="pedestrian",e.TRANSIT="bus"}(r=e.TravelModes||(e.TravelModes={}))})((r=e.Directions||(e.Directions={})).TomTom||(r.TomTom={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){(e.DrawingTools||(e.DrawingTools={})).Events=["circlecomplete","markercomplete","polylinecomplete","polygoncomplete","rectanglecomplete"]}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){!function(e){let r;!function(e){e.BOTTOM_LEFT="bottomleft",e.BOTTOM_RIGHT="bottomright",e.TOP_LEFT="topleft",e.TOP_RIGHT="topright"}(r=e.Positions||(e.Positions={}))}(e.DrawingTools||(e.DrawingTools={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){var r;(r=e.Marker||(e.Marker={})).defaultSize=[24,40],r.defaultAnchor=[12,40]}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){!function(e){let r;!function(e){e.click="click",e.contextmenu="contextmenu",e.rightclick="contextmenu",e.dblclick="dblclick",e.drag="drag",e.dragend="dragend",e.dragstart="dragstart",e.mousedown="mousedown",e.mouseout="mouseout",e.mouseover="mouseover",e.mouseup="mouseup"}(r=e.ProviderEventNames||(e.ProviderEventNames={}))}(e.Marker||(e.Marker={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){!function(e){let r;!function(e){e.click="click",e.contextmenu="contextmenu",e.rightclick="contextmenu",e.dblclick="dblclick",e.drag="drag",e.dragend="dragend",e.dragstart="dragstart",e.mousemove="mousemove",e.mouseout="mouseout",e.mouseover="mouseover",e.resize="resize",e.tilesloaded="load",e.load="load",e.zoom_changed="zoom",e.zoom_end="zoomend",e.zoom="zoom"}(r=e.ProviderEventNames||(e.ProviderEventNames={}))}(e.OSMap||(e.OSMap={}))}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){var r;(r=e.Shape||(e.Shape={})).Events=["click","contextmenu","dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup","rightclick","shape_changed","editable:editing"],r.ProviderPolyshapeEvents=["editable:editing","dragend"],r.ProviderCircleEvents=r.ProviderPolyshapeEvents,r.ProviderRectangleEvents=r.ProviderPolyshapeEvents,r.ProviderSpecialEvents=["shape_changed",...r.ProviderPolyshapeEvents,...r.ProviderCircleEvents,...r.ProviderRectangleEvents]}(e.Constants||(e.Constants={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){class r extends OSFramework.Maps.DrawingTools.AbstractTool{constructor(e,r,t,a,s){super(e,r,t,a,s),this.internalOptions={}}_addCompletedEventHandler(e){const r=OSFramework.Maps.Helper.GenerateUniqueId();this.newElm=this.createElement(r,e.layer,this.config),this.drawingTools.createdElements.push(this.newElm);const t=this.getLocation(),a=this.getCoordinates();this.triggerOnDrawingChangeEvent(r,!0,a,t)}triggerOnDrawingChangeEvent(e,r,t,a){this.drawingTools.drawingToolsEvents.trigger(OSFramework.Maps.Event.DrawingTools.DrawingToolsEventType.ProviderEvent,this.completedToolEventName,{uniqueId:e,isNewElement:r,coordinates:t,location:a})}addCompletedEvent(e){this._addCompletedEventHandler(e)}build(){super.build(),this.options=this.getProviderConfig(),this.finishBuild()}dispose(){super.dispose()}}e.AbstractProviderTool=r}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractProviderTool{constructor(e,r,t,a,s){super(e,r,t,a,s)}_setOnChangeEvent(e){e.shapeEvents.addHandler(OSFramework.Maps.Helper.Constants.shapeChangedEvent,((r,t,a,s)=>{const o={uniqueId:e.uniqueId,isNewElement:!1,location:JSON.stringify(s.location),coordinates:JSON.stringify(s.coordinates)};this.drawingTools.drawingToolsEvents.trigger(OSFramework.Maps.Event.DrawingTools.DrawingToolsEventType.ProviderEvent,this.completedToolEventName,o)}))}createShapeElement(r,t,a){const s=e.Shape.ShapeFactory.MakeShape(this.map,r,t,a);return this._setOnChangeEvent(s),this.map.addShape(s),s}getCoordinates(){const e=JSON.parse(this.newElm.config.locations),r=[];for(const t of e)r.push(t.toString().split(","));const t=r.map((e=>({Lat:e[0],Lng:e[1]})));return JSON.stringify(t)}getLocation(){return this.newElm.config.locations}build(){super.build(),this.options=this.getProviderConfig()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.drawingTools.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.strokeOpacity:return void(this.options={shapeOptions:{opacity:r}});case OSFramework.Maps.Enum.OS_Config_Shape.strokeColor:return void(this.options={shapeOptions:{color:r}});case OSFramework.Maps.Enum.OS_Config_Shape.strokeWeight:return void(this.options={shapeOptions:{weight:r}});case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return void(this.options={shapeOptions:{fillOpacity:r}});case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:return void(this.options={shapeOptions:{fillColor:r}})}}}r.AbstractDrawShape=t}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractDrawShape{constructor(r,t,a,s,o){super(r,t,a,s,new e.Configuration.DrawingTools.DrawFilledShapeConfig(o))}_createConfigsElement(e,r){const t=e.getLatLng(),a=`${t.lat},${t.lng}`,s=e.getRadius();return Object.assign(Object.assign({},r),{center:a,radius:s})}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingCircleCompleted}get options(){return this.internalOptions}set options(e){var r;const t=Object.assign(Object.assign({},this.options),e),a=Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.shapeOptions),e.shapeOptions);t.shapeOptions=a,this.drawingTools.provider.setDrawingOptions({circle:t}),this.internalOptions=t}createElement(e,r,t){const a=this._createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Circle,a)}getCoordinates(){let e=[];e=this.newElm.config.center.split(",");const r={Lat:e[0],Lng:e[1]};return JSON.stringify(r)}getLocation(){const e={location:this.newElm.config.center,radius:this.newElm.config.radius};return JSON.stringify(e)}}r.DrawCircle=t}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractProviderTool{constructor(r,t,a,s,o){super(r,t,a,s,new e.Configuration.DrawingTools.DrawMarkerConfig(o)),this._defaultIcon=new L.DivIcon({iconSize:e.Constants.Marker.defaultSize,className:"marker-leaflet-icon",iconAnchor:e.Constants.Marker.defaultAnchor})}_createIcon(e){let r=this._defaultIcon;if(""!==e){let t,a;r=new L.Icon({iconUrl:e,iconSize:t,iconAnchor:a})}return r}_setOnChangeEvent(e){const r=e.provider;e.markerEvents.addHandler("dragend",(()=>{this.triggerOnDrawingChangeEvent(e.uniqueId,!1,JSON.stringify({Lat:r.getLatLng().lat,Lng:r.getLatLng().lng}),`${r.getLatLng().lat}, ${r.getLatLng().lng}`)}))}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingMarkerCompleted}get options(){return this.internalOptions}set options(e){const r=Object.assign(Object.assign({},this.options),e);this.drawingTools.provider.setDrawingOptions({marker:r}),this.internalOptions=r}createElement(r,t,a){const s=`${t.getLatLng().lat},${t.getLatLng().lng}`,o=Object.assign(Object.assign({},a),{location:s}),n=e.Marker.MarkerFactory.MakeMarker(this.map,r,OSFramework.Maps.Enum.MarkerType.Marker,o);return this._setOnChangeEvent(n),this.map.addMarker(n),n}getCoordinates(){let e=[];e=this.newElm.config.location.split(",");const r={Lat:e[0],Lng:e[1]};return JSON.stringify(r)}getLocation(){return this.newElm.config.location}build(){super.build(),this.options=Object.assign(Object.assign({},this.getProviderConfig()),{icon:this._createIcon(this.config.iconUrl)})}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Marker[e];super.changeProperty(e,r),this.drawingTools.isReady&&t===OSFramework.Maps.Enum.OS_Config_Marker.iconUrl&&(this.options={icon:this._createIcon(r)})}}r.DrawMarker=t}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractDrawShape{constructor(r,t,a,s,o){super(r,t,a,s,new e.Configuration.DrawingTools.DrawFilledShapeConfig(o))}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingPolygonCompleted}get options(){return this.internalOptions}set options(e){var r;const t=Object.assign(Object.assign({},this.options),e),a=Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.shapeOptions),e.shapeOptions);t.shapeOptions=a,this.drawingTools.provider.setDrawingOptions({polygon:t}),this.internalOptions=t}_createConfigsElement(e,r){const t=e.getLatLngs()[0].map((e=>`${e.lat},${e.lng}`));return Object.assign(Object.assign({},r),{locations:JSON.stringify(t)})}createElement(e,r,t){const a=this._createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Polygon,a)}}r.DrawPolygon=t}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractDrawShape{constructor(r,t,a,s,o){super(r,t,a,s,new e.Configuration.DrawingTools.DrawBasicShapeConfig(o))}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingPolylineCompleted}get options(){return this.internalOptions}set options(e){var r;const t=Object.assign(Object.assign({},this.options),e),a=Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.shapeOptions),e.shapeOptions);t.shapeOptions=a,this.drawingTools.provider.setDrawingOptions({polyline:t}),this.internalOptions=t}_createConfigsElement(e,r){const t=e.getLatLngs().map((e=>`${e.lat},${e.lng}`));return Object.assign(Object.assign({},r),{locations:JSON.stringify(t)})}createElement(e,r,t){const a=this._createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Polyline,a)}}r.DrawPolyline=t}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractDrawShape{constructor(r,t,a,s,o){super(r,t,a,s,new e.Configuration.DrawingTools.DrawFilledShapeConfig(o))}_createConfigsElement(e,r){const t=e.getBounds(),a={north:t.getNorthEast().lat.toString(),south:t.getSouthWest().lat.toString(),west:t.getSouthWest().lng.toString(),east:t.getNorthEast().lng.toString()};return Object.assign(Object.assign({},r),{bounds:JSON.stringify(a)})}get completedToolEventName(){return OSFramework.Maps.Helper.Constants.drawingRectangleCompleted}get options(){return this.internalOptions}set options(e){var r;const t=Object.assign(Object.assign({},this.options),e),a=Object.assign(Object.assign({},null===(r=this.options)||void 0===r?void 0:r.shapeOptions),e.shapeOptions);t.shapeOptions=a,this.drawingTools.provider.setDrawingOptions({rectangle:t}),this.internalOptions=t}createElement(e,r,t){const a=this._createConfigsElement(r,t);return super.createShapeElement(e,OSFramework.Maps.Enum.ShapeType.Rectangle,a)}getCoordinates(){const e=JSON.parse(this.newElm.config.bounds);return JSON.stringify(e)}getLocation(){return this.newElm.config.bounds}}r.DrawRectangle=t}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t{constructor(){this.circlemarker=!1,this.circle=!1,this.marker=!1,this.polygon=!1,this.polyline=!1,this.rectangle=!1}}class a extends OSFramework.Maps.DrawingTools.AbstractDrawingTools{constructor(r,t,a){super(r,t,new e.Configuration.DrawingTools.DrawingToolsConfig(a)),this._toolsGroup=new L.FeatureGroup}_addCompletedEventHandler(e){const r=e.layerType;this.tools.filter((e=>e.type===r)).forEach((r=>r.addCompletedEvent(e)))}_getDrawingToolsPosition(r){return void 0===e.Constants.DrawingTools.Positions[r]&&OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidDrawingToolsPosition,`${r}`),e.Constants.DrawingTools.Positions[r]}_getTools(){const e=new t;return this.tools.forEach((r=>{switch(r.type){case OSFramework.Maps.Enum.DrawingToolsTypes.Circle:e.circle=r.options;break;case OSFramework.Maps.Enum.DrawingToolsTypes.Marker:e.marker=r.options;break;case OSFramework.Maps.Enum.DrawingToolsTypes.Polygon:e.polygon=r.options;break;case OSFramework.Maps.Enum.DrawingToolsTypes.Polyline:e.polyline=r.options;break;case OSFramework.Maps.Enum.DrawingToolsTypes.Rectangle:e.rectangle=r.options}})),e}_refreshDrawingModes(){const e=this.provider.options,r=Object.assign(Object.assign({},e),{draw:this._getTools()});this._provider.setDrawingOptions(r.draw)}_refreshDrawingTools(){this._setDrawingToolsEvents(),this._refreshDrawingModes(),this.map.provider.addControl(this._provider)}_setDrawingToolsEvents(){this.map.provider.off(e.Constants.drawingLeafletCompleted),this.map.provider.on(e.Constants.drawingLeafletCompleted,this._addCompletedEventHandler.bind(this))}get controlOptions(){return this._provider.get("drawingControlOptions")}set controlOptions(e){const r=Object.assign(Object.assign({},this.controlOptions),e);this._provider.setOptions({drawingControlOptions:r})}get providerEvents(){return e.Constants.DrawingTools.Events}addTool(e){return super.addTool(e),this.isReady&&(e.build(),this._refreshDrawingTools()),e}build(){super.build();const r=this.getProviderConfig();this.map.provider.addLayer(this._toolsGroup),this._provider=new L.Control.Draw({position:this._getDrawingToolsPosition(r.position)||e.Constants.DrawingTools.Positions.TOP_LEFT,edit:{featureGroup:this._toolsGroup,edit:!1,remove:!1},draw:this._getTools()}),this.tools.forEach((e=>e.build())),this._refreshDrawingTools(),this.finishBuild()}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_DrawingTools[e];if(super.changeProperty(e,r),this.isReady&&t===OSFramework.Maps.Enum.OS_Config_DrawingTools.position){const e=this._getDrawingToolsPosition(r);e&&this.provider.setPosition(e)}}dispose(){this.isReady&&this.map.provider.removeControl(this._provider),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setDrawingToolsEvents()}removeTool(e){super.removeTool(e),this._refreshDrawingTools()}}r.DrawingTools=a}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){let r;!function(r){r.MakeDrawingTools=function(r,t,a){return new e.DrawingTools(r,t,a)},r.MakeTool=function(r,t,a,s,o){switch(s){case OSFramework.Maps.Enum.DrawingToolsTypes.Marker:return new e.DrawMarker(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Polyline:return new e.DrawPolyline(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Polygon:return new e.DrawPolygon(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Circle:return new e.DrawCircle(r,t,a,s,o);case OSFramework.Maps.Enum.DrawingToolsTypes.Rectangle:return new e.DrawRectangle(r,t,a,s,o);default:throw new Error(`There is no factory for this type of Tool (${s}) using the Leaflet provider`)}}}(r=e.DrawingToolsFactory||(e.DrawingToolsFactory={}))}(e.DrawingTools||(e.DrawingTools={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){(e.Feature||(e.Feature={})).Center=class{constructor(e,r){this._map=e,this._initialCenter=r}build(){}getCenter(){return this._initialCenter}getCurrentCenter(){return this._currentCenter}getMapCenter(){const e={isSuccess:!0,message:OSFramework.Maps.Enum.Success.message,code:OSFramework.Maps.Enum.Success.code};try{const r={message:OSFramework.Maps.Enum.Success.message,lat:this._map.provider.getCenter().lat,lng:this._map.provider.getCenter().lng};e.message=JSON.stringify(r)}catch(r){e.isSuccess=!1,e.message=r.message,e.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingCenterCoordinates}return e}refreshCenter(e,r){let t=new L.LatLng(e.lat,e.lng);if(this._map.provider.setView(t),r)if(this._map.features.zoom.isAutofit)if(this._map.markers.length>1||this._map.shapes.length>0&&!0===this._map.config.autoZoomOnShapes){this._map.provider.setView(t),this._map.features.zoom.refreshZoom();const e=this._map.features.center.getCurrentCenter();t=new L.LatLng(e.lat,e.lng)}else this._map.provider.setView(t,OSFramework.Maps.Helper.Constants.zoomAutofit);else this._map.provider.setView(t,this._map.features.zoom.level);else this._map.provider.setView(t);this._currentCenter=t}setCurrentCenter(e){this._currentCenter=e}updateCenter(r){e.Helper.Conversions.ValidateCoordinates(r).then((e=>{this._map.config.center=e,this._initialCenter=e,this._map.refresh(!0)})).catch((()=>{this._map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this._map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingLeafletMap)}))}}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){(e.Feature||(e.Feature={})).Directions=class{constructor(e){this._map=e,this._isEnabled=!1,this._currentDistance=NaN,this._currentDuration=NaN,this._bindSetRoute=this._routesFoundHandler.bind(this,void 0,0),this._bindDistance=void 0,this._bindDuration=void 0,this._defaultIcon={iconSize:[24,40],className:"marker-leaflet-icon-wp",iconAnchor:[12,40]},this._defaultTooltip={permanent:!0,direction:"top",className:"marker-leaflet-transparent-tooltip-wp"}}get isEnabled(){return this._isEnabled}_buildCharFromNumber(e){let r="";return e>=0&&e<26?r=String.fromCharCode(65+e):e<702&&(r=String.fromCharCode(65+(e-26)/26)+String.fromCharCode(65+(e-26)%26)),r}_buildDirectionsRenderer(e,r){this._directionsRenderer=new L.Routing.Control({router:new L.Routing[e](r,{}),fitSelectedRoutes:!0,plan:L.Routing.plan([],{createMarker:function(e,r){return L.marker(r.latLng,{icon:new L.DivIcon(this._defaultIcon)}).bindTooltip(`${this._buildCharFromNumber(e)}`,this._defaultTooltip)}.bind(this),routeWhileDragging:!1,draggableWaypoints:!1,createGeocoderElement:void 0})})}_hasDirectionsRenderer(){return void 0!==this._directionsRenderer}_routesFoundHandler(r,t,a){let s;this._currentDistance=a.routes[0].summary.totalDistance,this._currentDuration=a.routes[0].summary.totalTime,void 0!==r?2===t?(r(this._currentDistance),s=this._bindDistance):1===t&&(r(this._currentDuration),s=this._bindDuration):0===t&&(s=this._bindSetRoute),this._directionsRenderer.off(e.Constants.Directions.Events.routesfound,s)}_setExcludes(e){if(!1===this._hasDirectionsRenderer())return!1;const r=[];return e.avoidTolls&&r.push("toll"),e.avoidHighways&&r.push("motorway"),e.avoidFerries&&r.push("ferry"),this._directionsRenderer.getRouter().options.exclude=r,!0}_setTravelMode(r){var t;return!1!==this._hasDirectionsRenderer()&&void 0!==(null===(t=e.Constants.Directions[this._providerName])||void 0===t?void 0:t.TravelModes[r])&&(this._directionsRenderer.getRouter().options.profile=e.Constants.Directions[this._providerName].TravelModes[r],!0)}_validateCoordinates(r){const t=[];return new Promise(((a,s)=>{r.forEach((o=>e.Helper.Conversions.ValidateCoordinates(o).then((e=>{t.push(new L.LatLng(e.lat,e.lng)),r.length===t.length&&a(t)})).catch((()=>{s({code:OSFramework.Maps.Enum.ErrorCodes.LIB_FailedSetDirections,message:"One or more set of coordinates is not valid"})}))))}))}build(){this.setState(this._isEnabled)}dispose(){this.setState(!1),this._directionsRenderer=void 0}getLegsFromDirection(){throw new Error("Method not implemented.")}getTotalDistanceFromDirection(){return!1===this._hasDirectionsRenderer()?(OSFramework.Maps.Helper.ThrowError(this._map,OSFramework.Maps.Enum.ErrorCodes.API_FailedNoPluginDirections),new Promise((e=>e(0)))):new Promise((r=>{isNaN(this._currentDistance)?(this._bindDistance=this._routesFoundHandler.bind(this,r,2),this._directionsRenderer.on(e.Constants.Directions.Events.routesfound,this._bindDistance)):r(this._currentDistance)}))}getTotalDurationFromDirection(){return!1===this._hasDirectionsRenderer()?(OSFramework.Maps.Helper.ThrowError(this._map,OSFramework.Maps.Enum.ErrorCodes.API_FailedNoPluginDirections),new Promise((e=>e(0)))):new Promise((r=>{isNaN(this._currentDuration)?(this._bindDuration=this._routesFoundHandler.bind(this,r,1),this._directionsRenderer.on(e.Constants.Directions.Events.routesfound,this._bindDuration)):r(this._currentDuration)}))}removeRoute(){this.setState(!1);const e=new OSFramework.Maps.OSStructures.ReturnMessage;return!1===this._hasDirectionsRenderer()?e.isSuccess=!0:e.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedRemoveDirections,e}setPlugin(r,t){this._directionsRenderer&&this.dispose(),this._buildDirectionsRenderer(e.Constants.Directions.Provider[r]||r,t),this._providerName=r;const a=new OSFramework.Maps.OSStructures.ReturnMessage;return this._hasDirectionsRenderer()?a.isSuccess=!0:a.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedLoadingPlugin,a}setRoute(r){let t=new OSFramework.Maps.OSStructures.ReturnMessage;if(this._currentDistance=NaN,this._currentDuration=NaN,!1===this._hasDirectionsRenderer())return t.code=OSFramework.Maps.Enum.ErrorCodes.API_FailedNoPluginDirections,new Promise((e=>e(t)));if(!1===this._setTravelMode(r.travelMode))return t.code=OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidTravelMode,new Promise((e=>e(t)));this._setExcludes(r.exclude),this._directionsRenderer.on(e.Constants.Directions.Events.routesfound,this._bindSetRoute),this._directionsRenderer.route({});const a=[r.originRoute,...r.waypoints,r.destinationRoute];return this._validateCoordinates(a).then((e=>(this.setState(!0),this._directionsRenderer.setWaypoints(e),this._directionsRenderer.getContainer().remove(),t.isSuccess=!0,t))).catch((e=>(t={code:e.code,message:e.message},t)))}setState(e){!0===e?this._directionsRenderer&&this._directionsRenderer.addTo(this._map.provider):this._directionsRenderer&&this._map.provider.removeControl(this._directionsRenderer),this._isEnabled=e}}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){class r{constructor(e){this._map=e,this._featureList=[],this._features=new OSFramework.Maps.Feature.ExposedFeatures}_instanceOfIDisposable(e){return"dispose"in e}_makeItem(e,...r){const t=new e(this._map,...r);return this._featureList.push(t),t}get features(){return this._features}build(){this._featureList.forEach((e=>e.build()))}dispose(){this._featureList.forEach((e=>{this._instanceOfIDisposable(e)&&e.dispose(),e=void 0}))}}e.AbstractFactoryBuilder=r,e.FeatureBuilder=class extends r{_makeCenter(r){return this._features.center=this._makeItem(e.Center,r),this}_makeDirections(){return this._features.directions=this._makeItem(e.Directions),this}_makeInfoWindow(){return this._features.infoWindow=this._makeItem(e.InfoWindow),this}_makeOffset(r){return this._features.offset=this._makeItem(e.Offset,r),this}_makeShape(){return this._features.shape=this._makeItem(e.Shape),this}_makeZoom(r){return this._features.zoom=this._makeItem(e.Zoom,r),this}build(){const e=this._map.config;this._makeShape(),this._makeZoom(e.zoom)._makeCenter(e.center)._makeDirections()._makeOffset(e.offset)._makeInfoWindow(),super.build()}}}(e.Feature||(e.Feature={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){(e.Feature||(e.Feature={})).InfoWindow=class{_getOptions(e){return{offset:[0,-(e.config.iconHeight>0?e.config.iconHeight:e.provider.getElement().offsetHeight)]}}build(){this._infoWindow=new L.Popup,this._popupIsOpened=!1}closePopup(e){this._popupIsOpened&&(e.provider.closePopup(),e.provider.unbindPopup(),this._popupIsOpened=!1)}openPopup(e){!0===this._popupIsOpened&&this.closePopup(e),e.provider.bindPopup(this._infoWindow.getContent(),this._getOptions(e)).openPopup(),this._popupIsOpened=!0}setPopupContent(e,r){this._infoWindow.setContent(e),this._infoWindow.update(),r.provider.setPopupContent(this._infoWindow.getContent())}}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){(e.Feature||(e.Feature={})).Offset=class{constructor(e,r){this._map=e,this._offset=r||{offsetX:0,offsetY:0}}get getOffset(){return this._offset}build(){}setOffset(e){this._offset={offsetX:e.offsetX||0,offsetY:e.offsetY||0};const r=this._map.provider.latLngToLayerPoint(this._map.features.center.getCurrentCenter()),t=new L.Point(r.x+this._offset.offsetX,r.y+this._offset.offsetY),a=this._map.provider.layerPointToLatLng(t);this._map.provider.setView(a)}}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){(e.Feature||(e.Feature={})).Shape=class{_checkCircleContainsMarker(){const e=this._shape.provider.getLatLng(),r=this._shape.provider.getRadius();this._markerCoordinates=new L.LatLng(this._markerCoordinates.lat,this._markerCoordinates.lng);const t=this._map.provider.distance(this._markerCoordinates,e);this._isInsideShape=t<r,this._updateReturnMessage()}_checkContainsMarker(){let e,r,t,a,s,o=this._polyPoints.length-1;for(const{index:n}of this._polyPoints.map(((e,r)=>({value:e,index:r}))))o>this._polyPoints.length-1&&(o=n-1),e=this._polyPoints[n].lat,r=this._polyPoints[n].lng,t=this._polyPoints[o].lat,a=this._polyPoints[o].lng,s=r>this._markerCoordinates.lng!=a>this._markerCoordinates.lng&&this._markerCoordinates.lat<(t-e)*(this._markerCoordinates.lng-r)/(a-r)+e,s&&(this._isInsideShape=!this._isInsideShape),o=++o;this._updateReturnMessage()}_updateReturnMessage(){this._returnObjSuccess=!0,this._returnObjCode=OSFramework.Maps.Enum.Success.code,this._returnObjMessage=this._isInsideShape.toString()}build(){}containsLocation(e,r,t,a){if(this._map=OutSystems.Maps.MapAPI.MapManager.GetMapById(e),this._returnObjSuccess=!1,this._returnObjCode=OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidMapId,this._map)if(this._isInsideShape=!1,this._markerCoordinates=JSON.parse(t.toLocaleLowerCase()),r)switch(this._shape=OutSystems.Maps.MapAPI.ShapeManager.GetShapeById(r),this._shape.type){case OSFramework.Maps.Enum.ShapeType.Polyline:this._returnObjCode=OSFramework.Maps.Enum.Unsupported.code,this._returnObjMessage=OSFramework.Maps.Enum.Unsupported.message;break;case OSFramework.Maps.Enum.ShapeType.Circle:this._checkCircleContainsMarker();break;default:this._polyPoints=this._shape.provider.getLatLngs()[0],this._checkContainsMarker()}else{const e=JSON.parse(a);this._polyPoints=[],e.length>=3&&(e.forEach((e=>{this._polyPoints.push(L.latLng(e.Lat,e.Lng))})),this._checkContainsMarker())}return{isSuccess:this._returnObjSuccess,code:this._returnObjCode,message:this._returnObjMessage}}}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){(e.Feature||(e.Feature={})).Zoom=class{constructor(e,r){this._map=e,this._level=r}_setAutofit(e){this._autofitEnabled=e}_setBounds(e){let r;this._map.markers.forEach((function(e){if(void 0===e.provider)return;const t=e.provider.getLatLng();r=r?r.extend(t):new L.LatLngBounds(t,t)})),e&&this._map.shapes.forEach((function(e){if(void 0===e.provider)return;const t=e.providerBounds;r=r?r.extend(t):t})),this._map.provider.fitBounds(r),this._map.provider.panInsideBounds(r),this._map.features.center.setCurrentCenter(r.getCenter())}build(){this._setAutofit(this._level===OSFramework.Maps.Enum.OSMap.Zoom.Auto)}get isAutofit(){return this._autofitEnabled}get level(){return this._level}refreshZoom(){this._map.features.zoom.isAutofit?this._map.markers.length>1||this._map.shapes.length>0&&!0===this._map.config.autoZoomOnShapes?this._setBounds(this._map.config.autoZoomOnShapes):this._map.provider.setView(this._map.features.center.getCurrentCenter(),OSFramework.Maps.Helper.Constants.zoomAutofit):this._map.provider.setZoom(this._map.features.zoom.level)}setLevel(e){this._level=e,this._setAutofit(e===OSFramework.Maps.Enum.OSMap.Zoom.Auto),this._map.refresh()}}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;((r=e.Helper||(e.Helper={})).Conversions||(r.Conversions={})).ValidateCoordinates=function(e){return new Promise(((r,t)=>{if(void 0!==e&&0!==e.trim().length||(console.warn("Invalid location. Using the default location -> { lat: 42.3517926, lng: -71.0467845 }"),r(OSFramework.Maps.Helper.Constants.defaultMapCenter)),/^-{0,1}\d*\.{0,1}\d*,( )?-{0,1}\d*\.{0,1}\d*$/.test(e)){const a=new OSFramework.Maps.OSStructures.OSMap.Coordinates;e.indexOf(",")>-1?(a.lat=parseFloat(e.split(",")[0].replace(" ","")),a.lng=parseFloat(e.split(",")[1].replace(" ","")),r(a)):t()}else t()}))}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){let r;!function(r){r.MakeMarker=function(r,t,a,s){switch(a){case OSFramework.Maps.Enum.MarkerType.Marker:return new e.Marker(r,t,a,s);case OSFramework.Maps.Enum.MarkerType.MarkerPopup:return new e.MarkerPopup(r,t,a,s);default:throw new Error(`There is no factory for this type of Marker (${a})`)}}}(r=e.MarkerFactory||(e.MarkerFactory={}))}(e.Marker||(e.Marker={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends OSFramework.Maps.Marker.AbstractMarker{constructor(r,t,a,s){super(r,t,a,new e.Configuration.Marker.LeafletMarkerConfig(s)),this._defaultIcon=new L.DivIcon({iconSize:e.Constants.Marker.defaultSize,className:"marker-leaflet-icon",iconAnchor:e.Constants.Marker.defaultAnchor}),this._defaultTooltip={permanent:!0,direction:"top",className:"marker-leaflet-transparent-tooltip"},this._addedEvents=[]}async _getMeta(e){return new Promise(((r,t)=>{const a=new Image;a.onload=()=>r({width:a.width,height:a.height}),a.onerror=e=>t(e),a.src=e}))}async _setIcon(e){let r;if(""===e)r=this._defaultIcon;else{let t,a;if(this.config.iconWidth>0&&this.config.iconHeight>0)t=[this.config.iconWidth,this.config.iconHeight],a=[this.config.iconWidth/2,this.config.iconHeight];else try{const{width:r,height:s}=await this._getMeta(e);this.config.iconWidth=r,this.config.iconHeight=s,t=[this.config.iconWidth,this.config.iconHeight],a=[this.config.iconWidth/2,this.config.iconHeight]}catch(e){console.error(e)}r=new L.Icon({iconUrl:e,iconSize:t,iconAnchor:a})}this.provider.setIcon(r)}_setIconSize(){this._setIcon(this.config.iconUrl)}_setLabelContent(e){""!==e?this.provider.getTooltip()?this.provider.setTooltipContent(e):this.provider.bindTooltip(e,this._defaultTooltip):this.provider.unbindTooltip()}_buildMarkerLocation(){let r;return void 0===this.config.location?void this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingLeafletMarker,"Location of the Marker can't be empty."):new Promise(((t,a)=>{e.Helper.Conversions.ValidateCoordinates(this.config.location).then((e=>{r=new L.LatLng(e.lat,e.lng),t(r)})).catch((e=>a(e)))}))}_setMarkerEvents(){this._addedEvents.forEach(((e,r)=>{this.provider.removeEventListener(e),this._addedEvents.splice(r,1)})),this.markerEvents.hasHandlers(OSFramework.Maps.Event.Marker.MarkerEventType.OnClick)&&(this._addedEvents.push("click"),this._provider.addEventListener("click",(e=>{const r=new OSFramework.Maps.OSStructures.OSMap.OSCoordinates(e.latlng.lat,e.latlng.lng);this.markerEvents.trigger(OSFramework.Maps.Event.Marker.MarkerEventType.OnClick,OSFramework.Maps.Event.Marker.MarkerEventType.OnClick,JSON.stringify(r))}))),this.markerEvents.handlers.forEach(((r,t)=>{r instanceof OSFramework.Maps.Event.Marker.MarkerProviderEvent&&(this._addedEvents.push(t),this._provider.addEventListener(e.Constants.Marker.ProviderEventNames[t],(e=>{this.markerEvents.trigger(OSFramework.Maps.Event.Marker.MarkerEventType.ProviderEvent,t,void 0!==e&&void 0!==e.target.getLatLng?JSON.stringify({Lat:e.target.getLatLng().lat,Lng:e.target.getLatLng().lng}):void 0)})))}))}get hasEvents(){return void 0!==this.markerEvents}get markerTag(){return OSFramework.Maps.Helper.Constants.markerTag}build(){super.build();const e=this._buildMarkerLocation(),r=this.getProviderConfig();void 0!==e&&(this.map.cancelScheduledResfresh(),e.then((e=>{this._destroyed||(this._provider=L.marker(e,r),this._setIcon(this.config.iconUrl),this._setLabelContent(this.config.label),this._provider.addTo(this.map.provider),this._setMarkerEvents(),this.finishBuild(),this.map.scheduleRefresh())})).catch((()=>{this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingLeafletMarker)})))}changeProperty(r,t){const a=OSFramework.Maps.Enum.OS_Config_Marker[r];if(super.changeProperty(r,t),this.isReady)switch(a){case OSFramework.Maps.Enum.OS_Config_Marker.location:return void e.Helper.Conversions.ValidateCoordinates(t).then((e=>{this._provider.setLatLng({lat:e.lat,lng:e.lng}),this.map.refresh()})).catch((()=>{this.map.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.OnError,this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingLeafletMarker)}));case OSFramework.Maps.Enum.OS_Config_Marker.allowDrag:return void(t?this._provider.dragging.enable():this._provider.dragging.disable());case OSFramework.Maps.Enum.OS_Config_Marker.iconHeight:return void this._setIconSize();case OSFramework.Maps.Enum.OS_Config_Marker.iconUrl:return void this._setIcon(t);case OSFramework.Maps.Enum.OS_Config_Marker.iconWidth:return void this._setIconSize();case OSFramework.Maps.Enum.OS_Config_Marker.label:return void this._setLabelContent(t);case OSFramework.Maps.Enum.OS_Config_Marker.title:return void(this._provider.getElement().title=t)}}dispose(){this.isReady&&this.map.provider.removeLayer(this.provider),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this._setMarkerEvents()}validateProviderEvent(r){return void 0!==e.Constants.Marker.ProviderEventNames[r]}}r.Marker=t}(e.Marker||(e.Marker={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){class r extends e.Marker{_setMarkerEvents(){super._setMarkerEvents(),this._provider.addEventListener("click",(()=>{this.openPopup()}))}get hasPopup(){return!0}get markerTag(){return OSFramework.Maps.Helper.Constants.markerPopupTag}closePopup(){this.map.features.infoWindow.closePopup(this)}openPopup(){this.refreshPopupContent(),this.map.features.infoWindow.openPopup(this)}refreshPopupContent(){this._contentString=OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(OSFramework.Maps.Helper.Constants.markerPopup).innerHTML,this.map.features.infoWindow.setPopupContent(this._contentString,this)}}e.MarkerPopup=r}(e.Marker||(e.Marker={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){let r;!function(r){r.MakeMap=function(r,t,a){switch(r){case OSFramework.Maps.Enum.MapType.Map:return new e.Map(t,a);case OSFramework.Maps.Enum.MapType.StaticMap:default:throw new Error(`There is no factory for this type of Map (${r})`)}}}(r=e.MapFactory||(e.MapFactory={}))}(e.OSMap||(e.OSMap={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends OSFramework.Maps.OSMap.AbstractMap{constructor(r,t){super(r,OSFramework.Maps.Enum.ProviderType.Leaflet,new e.Configuration.OSMap.LeafletMapConfig(t),OSFramework.Maps.Enum.MapType.Map),this._addedEvents=[],this._openStreetMapLayer=new L.TileLayer(e.Constants.openStreetMapTileLayer.url,{attribution:e.Constants.openStreetMapTileLayer.attribution})}_addMapZoomHandler(){this._provider.on(e.Constants.OSMap.ProviderEventNames.zoom_end,this._mapZoomChangeCallback)}_buildDrawingTools(){this.drawingTools&&this.drawingTools.build()}_buildMarkers(){this.markers.forEach((e=>e.build()))}_buildShapes(){this.shapes.forEach((e=>e.build()))}_getProviderConfig(){return this.config.center=OSFramework.Maps.Helper.Constants.defaultMapCenter,this.config.getProviderConfig()}_removeMapZoomHandler(){this._provider.off(e.Constants.OSMap.ProviderEventNames.zoom_end,this._mapZoomChangeCallback)}_setMapEvents(){this.mapEvents.handlers.forEach(((r,t)=>{r instanceof OSFramework.Maps.Event.OSMap.MapProviderEvent&&(this._addedEvents.push(t),this._provider.addEventListener(e.Constants.OSMap.ProviderEventNames[t],(e=>{this.mapEvents.trigger(OSFramework.Maps.Event.OSMap.MapEventType.ProviderEvent,this,t,e&&void 0!==e.latlng?JSON.stringify({Lat:e.latlng.lat,Lng:e.latlng.lng}):void 0)})))}))}get addedEvents(){return this._addedEvents}get mapTag(){return OSFramework.Maps.Helper.Constants.mapTag}addDrawingTools(e){return super.addDrawingTools(e),this.isReady&&e.build(),e}addFileLayer(e){return super.addFileLayer(e),this.isReady&&e.build(),e}addHeatmapLayer(e){return super.addHeatmapLayer(e),this.isReady&&e.build(),e}addMarker(e){return super.addMarker(e),this.isReady&&e.build(),e}addShape(e){return super.addShape(e),this.isReady&&e.build(),e}build(){super.build();const e=this.config.center;this._provider=new L.Map(OSFramework.Maps.Helper.GetElementByUniqueId(this.uniqueId).querySelector(OSFramework.Maps.Helper.Constants.runtimeMapUniqueIdCss),Object.assign(Object.assign({},this._getProviderConfig()),{layers:[this._openStreetMapLayer]})),this.buildFeatures(),this._buildMarkers(),this._buildShapes(),this._buildDrawingTools(),this.finishBuild(),this.features.center.updateCenter(e),this._setMapEvents(),this._addMapZoomHandler()}buildFeatures(){this._fBuilder=new e.Feature.FeatureBuilder(this),this._features=this._fBuilder.features,this._fBuilder.build()}changeDrawingToolsProperty(e,r,t){const a=this.drawingTools;void 0===a||a.uniqueId!==e?console.error(`changeDrawingToolsProperty - drawingToold id:${e} not found.`):a.changeProperty(r,t)}changeFileLayerProperty(e,r,t){const a=this.getFileLayer(e);a?a.changeProperty(r,t):console.error(`changeFileLayerProperty - fileLayer id:${e} not found.`)}changeHeatmapLayerProperty(e,r,t){const a=this.getHeatmapLayer(e);a?a.changeProperty(r,t):console.error(`changeHeatmapLayerProperty - heatmapLayer id:${e} not found.`)}changeMarkerProperty(e,r,t){const a=this.getMarker(e);a?a.changeProperty(r,t):console.error(`changeMarkerProperty - marker id:${e} not found.`)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Map[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Map.center:return this.features.center.updateCenter(r);case OSFramework.Maps.Enum.OS_Config_Map.offset:return this.features.offset.setOffset(JSON.parse(r));case OSFramework.Maps.Enum.OS_Config_Map.zoom:return this.features.zoom.setLevel(r)}}changeShapeProperty(e,r,t){const a=this.getShape(e);a?a.changeProperty(r,t):console.error(`changeShapeProperty - shape id:${e} not found.`)}dispose(){super.dispose(),this._fBuilder&&this._fBuilder.dispose(),this._provider=void 0}refresh(e){this._removeMapZoomHandler();let r=this.features.center.getCenter();if(this.markers.length>0){const t=this.markers[0].provider;this.markers.length>1?this.allowRefreshZoom?this.features.zoom.isAutofit&&(r=t.getLatLng()):r=e?this.config.center:this.provider.getCenter():void 0!==t&&(r=t.getLatLng())}this.features.center.refreshCenter(r,this.allowRefreshZoom),this.features.offset.setOffset(this.features.offset.getOffset),this.hasMarkerClusterer()&&this.features.markerClusterer.repaint(),this._addMapZoomHandler()}refreshProviderEvents(){this.isReady&&this._setMapEvents()}updateHeight(){this.isReady&&this._provider.invalidateSize()}validateProviderEvent(r){return void 0!==e.Constants.OSMap.ProviderEventNames[r]}}r.Map=t}(e.OSMap||(e.OSMap={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends OSFramework.Maps.Shape.AbstractShape{get hasEvents(){return void 0!==this.shapeEvents}get shapeProviderEvents(){return e.Constants.Shape.Events}_resetShapeEvents(){this._addedEvents.forEach(((e,r)=>{this._addedEvents.splice(r,1)}))}_setDragEditConfigs(e,r){const t=this.provider;r?t.enableEdit():t.disableEdit(),e?t.dragging.enable():t.dragging.disable()}buildProvider(e){void 0!==e&&e.then((e=>{this._provider=this.createProvider(e),this._provider.addTo(this.map.provider),this._setDragEditConfigs(this.config.allowDrag,this.config.allowEdit),this.setShapeEvents(),this.finishBuild(),this.map.refresh()})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)}))}setShapeEvents(){this._resetShapeEvents(),this.shapeEvents.hasHandlers(OSFramework.Maps.Event.Shape.ShapeEventType.OnClick)&&this.provider.addEventListener("click",(()=>{this.shapeEvents.trigger(OSFramework.Maps.Event.Shape.ShapeEventType.OnClick)})),this.shapeEvents.handlers.forEach(((r,t)=>{r instanceof OSFramework.Maps.Event.Shape.ShapeProviderEvent&&(t===OSFramework.Maps.Helper.Constants.shapeChangedEvent?(this._addedEvents.push(t),this.providerEventsList.forEach((e=>this.provider.addEventListener(e,(()=>{this._shapeChangedEventTimeout&&clearTimeout(this._shapeChangedEventTimeout),this._shapeChangedEventTimeout=setTimeout(this.triggerShapeChangedEvent.bind(this),500)}))))):-1===e.Constants.Shape.Events.indexOf(t)&&-1===e.Constants.Shape.ProviderSpecialEvents.indexOf(t)||(this._addedEvents.push(t),this.provider.addEventListener(t,(()=>{this.shapeEvents.trigger(OSFramework.Maps.Event.Shape.ShapeEventType.ProviderEvent,t)}))))}))}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.allowDrag:return void this._setDragEditConfigs(r,this.config.allowEdit);case OSFramework.Maps.Enum.OS_Config_Shape.allowEdit:return void this._setDragEditConfigs(this.config.allowDrag,r);case OSFramework.Maps.Enum.OS_Config_Shape.strokeOpacity:return void this.provider.setStyle({opacity:r});case OSFramework.Maps.Enum.OS_Config_Shape.strokeColor:return void this.provider.setStyle({color:r});case OSFramework.Maps.Enum.OS_Config_Shape.strokeWeight:return void this.provider.setStyle({weight:r})}}dispose(){this.isReady&&this._provider.remove(),this._provider=void 0,super.dispose()}refreshProviderEvents(){this.isReady&&this.setShapeEvents()}}r.AbstractProviderShape=t}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractProviderShape{get providerEventsList(){return e.Constants.Shape.ProviderPolyshapeEvents}get providerPath(){const e=this.providerObjectPath;return void 0===e?(OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapePath),[]):e}_buildPath(r){if(this._validateLocations(r)){const t=JSON.parse(r);return new Promise(((r,a)=>{const s=new Map;t.every(((o,n)=>OSFramework.Maps.Helper.IsEmptyString(o)?(OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode),!1):(e.Helper.Conversions.ValidateCoordinates(o).then((e=>{s.set(n,{lat:e.lat,lng:e.lng}),s.size===t.length&&r(Array.from(s.keys()).sort(((e,r)=>e-r)).map((e=>s.get(e))))})).catch((e=>a(e))),!0)))}))}}_setProviderPath(e){this._provider.setLatLngs(e)}_validateLocations(e){return!(OSFramework.Maps.Helper.IsEmptyString(e)||JSON.parse(e).length<this.minPath)||(OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode),!1)}build(){super.build();const e=this._buildPath(this.config.locations);this.buildProvider(e)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.locations:const e=this._buildPath(r);return void(void 0!==e&&e.then((e=>{this._setProviderPath(e)})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)})));case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:return void this.provider.setStyle({fillColor:r});case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return void this.provider.setStyle({fillOpacity:r})}}}r.AbstractPolyshape=t}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractProviderShape{constructor(r,t,a,s){super(r,t,a,new e.Configuration.Shape.CircleShapeConfig(s))}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidCircleShapeCenter}get providerObjectListener(){return this.provider}get providerBounds(){return this.provider.getBounds()}get providerCenter(){const e=this.provider.getLatLng();return void 0===e&&OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapeCenter),e}get providerEventsList(){return e.Constants.Shape.ProviderCircleEvents}get providerRadius(){const e=this.provider.getRadius();return void 0===e&&OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.API_FailedGettingShapeRadius),e}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapeCircleTag}_buildCenter(r){if(!OSFramework.Maps.Helper.IsEmptyString(r))return new Promise(((t,a)=>{e.Helper.Conversions.ValidateCoordinates(r).then((e=>{const r={lat:e.lat,lng:e.lng};t(r)})).catch((e=>a(e)))}));OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode)}_changeCenter(e){const r=this._buildCenter(e);void 0!==r&&r.then((e=>{this.provider.setLatLng(e)})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)}))}createProvider(e){return new L.Circle(e,this.getProviderConfig())}getShapeCoordinates(){return{coordinates:{Lat:this.providerCenter.lat,Lng:this.providerCenter.lng},location:{location:`${this.providerCenter.lat.toString()},${this.providerCenter.lng.toString()}`,radius:this.providerRadius}}}build(){super.build();const e=this._buildCenter(this.config.center);super.buildProvider(e)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.center:return void this._changeCenter(r);case OSFramework.Maps.Enum.OS_Config_Shape.radius:return void this.provider.setRadius(r);case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:return void this.provider.setStyle({fillColor:r});case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return void this.provider.setStyle({fillOpacity:r})}}}r.Circle=t}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(e){let r;!function(r){r.MakeShape=function(r,t,a,s){switch(a){case OSFramework.Maps.Enum.ShapeType.Polygon:return new e.Polygon(r,t,a,s);case OSFramework.Maps.Enum.ShapeType.Polyline:return new e.Polyline(r,t,a,s);case OSFramework.Maps.Enum.ShapeType.Circle:return new e.Circle(r,t,a,s);case OSFramework.Maps.Enum.ShapeType.Rectangle:return new e.Rectangle(r,t,a,s);default:throw new Error(`There is no factory for this type of Shape (${a})`)}}}(r=e.ShapeFactory||(e.ShapeFactory={}))}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractPolyshape{constructor(r,t,a,s){super(r,t,a,new e.Configuration.Shape.FilledShapeConfig(s))}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidPolygonShapeLocations}get providerObjectPath(){return this.provider.getLatLngs()[0]}get providerBounds(){return this.provider.getBounds()}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapePolygonTag}createProvider(e){return new L.Polygon(e,this.getProviderConfig())}getShapeCoordinates(){return{location:this.providerObjectPath.map((e=>`${e.lat},${e.lng}`)),coordinates:this.providerObjectPath.map((e=>({Lat:e.lat,Lng:e.lng})))}}}r.Polygon=t}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractPolyshape{constructor(r,t,a,s){super(r,t,a,new e.Configuration.Shape.BasicShapeConfig(s))}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidPolylineShapeLocations}get providerObjectPath(){return this.provider.getLatLngs()}get providerBounds(){return this.provider.getBounds()}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapePolylineTag}createProvider(e){return new L.Polyline(e,this.getProviderConfig())}getShapeCoordinates(){return{location:this.providerObjectPath.map((e=>`${e.lat},${e.lng}`)),coordinates:this.providerObjectPath.map((e=>({Lat:e.lat,Lng:e.lng})))}}}r.Polyline=t}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){!function(r){class t extends r.AbstractProviderShape{constructor(r,t,a,s){super(r,t,a,new e.Configuration.Shape.RectangleShapeConfig(s))}get invalidShapeLocationErrorCode(){return OSFramework.Maps.Enum.ErrorCodes.CFG_InvalidRectangleShapeBounds}get bounds(){const e=new OSFramework.Maps.OSStructures.OSMap.Bounds;return e.east=this.providerBounds.getNorthEast().lng,e.north=this.providerBounds.getNorthEast().lat,e.west=this.providerBounds.getSouthWest().lng,e.south=this.providerBounds.getSouthWest().lat,e}get providerBounds(){return this.provider.getBounds()}get providerEventsList(){return e.Constants.Shape.ProviderRectangleEvents}get shapeTag(){return OSFramework.Maps.Helper.Constants.shapeRectangleTag}_buildBounds(e){const r=JSON.parse(e);if(!OSFramework.Maps.Helper.HasAnyEmptyBound(r))return this._convertStringToBounds(r);OSFramework.Maps.Helper.ThrowError(this.map,this.invalidShapeLocationErrorCode)}_convertStringToBounds(r){const t=["north","south","east","west"];return new Promise(((a,s)=>{let o=0;const n=new OSFramework.Maps.OSStructures.OSMap.Bounds;t.forEach((t=>{/^-{0,1}\d*\.{0,1}\d*$/.test(r[t])?(o++,n[t]=parseFloat(r[t]),4===o&&a(n)):e.Helper.Conversions.ValidateCoordinates(r[t]).then((e=>{switch(o++,t){case"north":case"south":n[t]=e.lat;break;default:n[t]=e.lng}4===o&&a(n)})).catch((e=>s(e)))}))}))}createProvider(e){const r=[[e.south,e.west],[e.north,e.east]];return new L.Rectangle(r,Object.assign({},this.getProviderConfig()))}getShapeCoordinates(){const e={north:this.bounds.north,south:this.bounds.south,west:this.bounds.west,east:this.bounds.east};return{location:e,coordinates:e}}build(){super.build();const e=this._buildBounds(this.config.bounds);super.buildProvider(e)}changeProperty(e,r){const t=OSFramework.Maps.Enum.OS_Config_Shape[e];if(super.changeProperty(e,r),this.isReady)switch(t){case OSFramework.Maps.Enum.OS_Config_Shape.fillColor:return void this.provider.setStyle({fillColor:r});case OSFramework.Maps.Enum.OS_Config_Shape.fillOpacity:return void this.provider.setStyle({fillOpacity:r});case OSFramework.Maps.Enum.OS_Config_Shape.bounds:const e=this._buildBounds(r);return void(void 0!==e&&e.then((e=>{const r=[[e.south,e.west],[e.north,e.east]];this.provider.setBounds(r)})).catch((e=>{OSFramework.Maps.Helper.ThrowError(this.map,OSFramework.Maps.Enum.ErrorCodes.LIB_FailedGeocodingShapeLocations,e)})))}}}r.Rectangle=t}(e.Shape||(e.Shape={}))}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={})),function(e){!function(e){!function(e){var r;(r=e.Version||(e.Version={})).Change=function(r){return OSFramework.Maps.Helper.LogWarningMessage(`Changing Leaflet version is not supported. Using version '${e.Constants.leafletVersion}'.`),!1},r.Get=function(){return e.Constants.leafletVersion}}(e.Leaflet||(e.Leaflet={}))}(e.Maps||(e.Maps={}))}(Provider||(Provider={}))})();